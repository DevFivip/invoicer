(this["webpackJsonpinvoicer-front"]=this["webpackJsonpinvoicer-front"]||[]).push([[0],{490:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=490},596:function(e,t){},598:function(e,t){},628:function(e,t){},629:function(e,t){},740:function(e,t){},926:function(e,t,n){"use strict";n.r(t);var o=n(2),i=n.n(o),c=n(77),a=n.n(c),r=n(18),l=(n(459),n(460),n(13)),s=n(168),d=n.n(s);n(175);var u=function(){return"http://18.207.214.15/index.php/api/v1"},j=n(73),b=d.a.create({baseURL:u()});b.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),b.interceptors.response.use((function(e){return e}),(function(e){var t,n;return 401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&j.b.error("Error de Credenciales!"),422===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&j.b.error("Error al enviar datos!"),Promise.reject(e)}));var m=b;m.defaults.headers.common.Authorization=localStorage.getItem("jwt")?"Bearer "+localStorage.getItem("jwt"):null;var h={Login:function(e){return new Promise((function(t,n){m.post("/login",e).then((function(e){m.defaults.headers.common.Authorization="Bearer "+e.data[0].token,t(e.data[0].token)}),(function(e){n(new Error(e))}))}))},Me:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.defaults.headers.common.Authorization="Bearer "+e,new Promise((function(e,t){m.get("/me").then((function(t){e(t.data)}))}))},Out:function(){return new Promise((function(e,t){m.get("/logout").then((function(t){e(t.data)}))}))}},p=n(1),O=i.a.createContext({});function x(e){var t=e.children,n=Object(o.useState)({}),i=Object(l.a)(n,2),c=i[0],a=i[1],r=Object(o.useState)((function(){return window.localStorage.getItem("jwt")})),s=Object(l.a)(r,2),d=s[0],u=s[1];return Object(o.useEffect)((function(){if(!d)return a({});h.Me(d).then((function(e){a(e)}))}),[d]),Object(p.jsx)(O.Provider,{value:{me:c,jwt:d,setMe:a,setJwt:u},children:t})}var v=O,f=i.a.createContext({});function g(e){var t=e.children,n=Object(o.useState)(JSON.parse(localStorage.getItem("print_setting"))),i=Object(l.a)(n,2),c=i[0],a=i[1],r=Object(o.useState)(JSON.parse(window.localStorage.getItem("logo"))),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(JSON.parse(window.localStorage.getItem("empresa"))),b=Object(l.a)(j,2),m=b[0],h=b[1];return Object(p.jsx)(f.Provider,{value:{empresa:m,setEmpresa:h,logo:d,setLogo:u,impresion:c,setImpresion:a},children:t})}var _=f,w=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Home"}),Object(p.jsx)(r.b,{to:"/workspace",children:"App"})]})},C=n(960),y=n(22),k=n(8),S=n(950),P=n(949);function V(){var e=Object(o.useContext)(v),t=e.jwt,n=e.setMe,i=e.setJwt,c=Object(o.useState)({loading:!1,error:!1}),a=Object(l.a)(c,2),r=a[0],s=a[1],d=Object(o.useCallback)((function(e){s({loading:!0,error:!1}),h.Login(e).then((function(e){window.localStorage.setItem("jwt",e),h.Me(e).then((function(e){n(e)})),s({loading:!1,error:!1}),i(e)})).catch((function(e){window.localStorage.removeItem("jwt"),s({loading:!1,error:!0})}))}),[i]),u=Object(o.useCallback)((function(){window.localStorage.removeItem("jwt"),i(null)}),[i]);return{isLogged:Boolean(t),isLoginLoading:r.loading,hasLoginError:r.error,login:d,logout:u}}var F=function(){var e=Object(y.g)(),t=Object(o.useContext)(v).me,n=Object(o.useContext)(_),i=n.empresa,c=n.impresion,a=n.setImpresion,s=V(),d=s.isLogged,u=s.logout,b=Object(o.useState)(!1),m=Object(l.a)(b,2),h=m[0],O=m[1];Object(o.useEffect)((function(){e.pathname.search("/space/ventas/")&&e.pathname.search("/workspace/ventas")?O(!1):O(!0)}),[e]);var x=Object(y.h)(),f=function(e){localStorage.setItem("print_setting",JSON.stringify(Object(k.a)(Object(k.a)({},c),{size:e}))),a(Object(k.a)(Object(k.a)({},c),{size:e}))};return Object(p.jsxs)(p.Fragment,{children:[!d&&Object(p.jsx)(y.a,{to:"/signup"}),Object(p.jsxs)(S.a,{fixed:"top",inverted:!0,children:[Object(p.jsx)(r.b,{to:"/",children:Object(p.jsx)(S.a.Item,{as:"a",children:"Dashboard"})}),Object(p.jsx)(r.b,{to:"/welcome/empresas",children:Object(p.jsx)(S.a.Item,{as:"a",children:"Empresas"})}),Object(p.jsx)(r.b,{to:"/workspace/app",children:Object(p.jsx)(S.a.Item,{as:"a",onClick:function(){i?x({pathname:"/workspace/app"}):j.b.error("Selecione un Local \xf3 sucursal para continuar")},children:"Workspace"})}),Object(p.jsxs)(S.a.Menu,{position:"right",children:[h&&Object(p.jsx)(S.a.Item,{children:Object(p.jsx)(P.a,{as:"a",text:"Ajustes de Documento",style:{color:"white",fontSize:"13px"},children:Object(p.jsxs)(P.a.Menu,{children:[Object(p.jsx)(P.a.Header,{icon:"print",content:"Configuraci\xf3n de Impresi\xf3n"}),Object(p.jsx)(P.a.Item,{active:c.after_save,onClick:function(){var e;e=!c.after_save,localStorage.setItem("print_setting",JSON.stringify(Object(k.a)(Object(k.a)({},c),{after_save:e}))),a(Object(k.a)(Object(k.a)({},c),{after_save:e}))},children:"Mostrar impresion despues de generar el documento"}),Object(p.jsx)(P.a.Item,{active:"A4"===c.size,onClick:function(){f("A4")},children:"Impresi\xf3n A4"}),Object(p.jsx)(P.a.Item,{active:"88mm"===c.size,onClick:function(){f("88mm")},children:"Impresi\xf3n Ticket 88 mm"}),Object(p.jsx)(P.a.Item,{active:"70mm"===c.size,onClick:function(){f("70mm")},children:"Impresi\xf3n Ticket 80 mm"}),Object(p.jsx)(P.a.Item,{active:"80mm"===c.size,onClick:function(){f("80mm")},children:"Impresi\xf3n Ticket 70 mm"}),Object(p.jsx)(P.a.Divider,{}),Object(p.jsx)(P.a.Item,{})]})})}),d?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(S.a.Item,{as:"a",name:"profile",children:t.name}),Object(p.jsx)(S.a.Item,{as:"a",name:"Logout",onClick:function(){u(),x({pathname:"/signup"})},children:"Logout"})]}):Object(p.jsx)(r.b,{to:"/signup",children:Object(p.jsx)(S.a.Item,{as:"a",name:"Signup",children:"Sign Up"})})]})]})]})},D=function(){return Object(p.jsxs)("div",{className:"ui vertical labeled icon menu",children:[Object(p.jsxs)(r.c,{to:"/workspace/app",end:"active",className:"item",children:[Object(p.jsx)("i",{"aria-hidden":"true",className:"gamepad icon"}),"Inicio"]}),Object(p.jsxs)(r.c,{to:"/workspace/ventas",end:"active",className:"item",children:[Object(p.jsx)("i",{"aria-hidden":"true",className:"file alternate outline icon"}),"Ventas"]}),Object(p.jsxs)(r.c,{to:"/workspace/contactos",end:"active",className:"item",children:[Object(p.jsx)("i",{"aria-hidden":"true",className:"users icon"}),"Contactos"]}),Object(p.jsxs)(r.c,{to:"/workspace/productos",end:"active",className:"item",children:[Object(p.jsx)("i",{"aria-hidden":"true",className:"box icon"}),"Productos"]})]})},T=n(954),I=n(284),q=function(e){e.query,e.setQuery;var t=e.child,n=Object(o.useState)(!1),i=Object(l.a)(n,2),c=i[0],a=i[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(P.a,{onClick:function(){a(!c)},text:"Filtrar",button:!0,labeled:!0,icon:"filter",open:c,className:"icon mini",children:Object(p.jsx)(P.a.Menu,{onClick:function(e){e.stopPropagation()},style:{width:"45vh"},children:Object(p.jsx)("div",{style:{padding:"15px"},children:t})})})})},E=function(e){var t=e.empresaContext;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(P.a,{as:"a",text:"Crear Nuevo",className:"button ui mini",children:Object(p.jsxs)(P.a.Menu,{children:[Object(p.jsx)(r.b,{className:"item",to:"/space/ventas/create/1",state:{model:{empresa_id:t.empresa.id,local_id:t.id,tipo_operacion_id:1,detalles:[],fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10)}},children:"Documento de Venta"}),Object(p.jsx)(r.b,{className:"item",to:"/space/ventas/create/2",state:{model:{empresa_id:t.empresa.id,local_id:t.id,tipo_operacion_id:2,detalles:[],fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10)}},children:"Cotizaci\xf3n"}),Object(p.jsx)(r.b,{className:"item",to:"/space/ventas/create/3",state:{model:{empresa_id:t.empresa.id,local_id:t.id,tipo_operacion_id:3,detalles:[],fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10)}},children:"Guia de Remisi\xf3n"}),Object(p.jsx)(P.a.Divider,{}),Object(p.jsx)(P.a.Item,{text:"Cliente",description:"ctrl + o"})]})})})},N=n(78),A=n(951),L=n(12),G=n.n(L),R=n(15),z=n(943),B=n(429),M=n.n(B),H=n(122);function U(){return(U=Object(R.a)(G.a.mark((function e(t,n){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(u(),"/venta/download/").concat(t.empresa_id,"/").concat(t.local_id,"/").concat(t.id,"/").concat(n),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.blob()})).then((function(e){var o="cdn"===n?"zip":n;M()(e,"".concat(t.sunat_documento,".").concat(o))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y={show:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{limit:20,order:{id:"DESC"}},i=H.stringify(o);return new Promise((function(o,c){m.get("/venta/".concat(e,"/").concat(t,"?page=").concat(n,"&").concat(i)).then((function(e){o(e.data)}),(function(e){c(!1)}))}))},find:function(e){return new Promise((function(t,n){m.get("empresa/"+e).then((function(e){t(e.data)}))}))},create:function(e){return console.log(e),new Promise((function(t,n){m.post("venta",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return e.transportista_id=null===e.transportista_id?void 0:e.transportista_id,e.ubigeo_destino_id=null===e.ubigeo_destino_id?void 0:e.ubigeo_destino_id,e.ubigeo_partida_id=null===e.ubigeo_partida_id?void 0:e.ubigeo_partida_id,new Promise((function(n,o){m.put("venta/"+e.empresa_id+"/"+e.local_id+"/"+t,e).then((function(e){n(e.data)}))}))},showDetalles:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{limit:20,order:{id:"DESC"}},i=H.stringify(o);return new Promise((function(o,c){m.get("/venta-detalle/".concat(e,"/").concat(t,"?page=").concat(n,"&").concat(i)).then((function(e){o(e.data)}),(function(e){c(!1)}))}))},anular:function(e){return console.log(e),new Promise((function(t,n){m.delete("venta/".concat(e.empresa_id,"/").concat(e.local_id,"/").concat(e.id),e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},sendSunat:function(e){return console.log(e),new Promise((function(t,n){m.get("venta/enviar/".concat(e.empresa_id,"/").concat(e.local_id,"/").concat(e.id),e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},download:function(e,t){return U.apply(this,arguments)}},J=function(e){var t=e.documento,n=e.handleChangeVenta,i=Object(o.useContext)(_).empresa,c=Object(o.useState)(!1),a=Object(l.a)(c,2),s=a[0],d=a[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(P.a,{as:"a",text:"Convertir Documento",className:"button ui mini teal",children:Object(p.jsxs)(P.a.Menu,{children:[Object(p.jsxs)(P.a.Item,{onClick:function(){d(!s)},children:[Object(p.jsx)("i",{class:"delete icon"}),"Anular"]}),Object(p.jsxs)(r.b,{className:"item",to:"/space/ventas/create/1",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:1,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(p.jsx)("i",{className:"file alternate outline icon"}),"Venta"]}),Object(p.jsxs)(r.b,{className:"item",to:"/space/ventas/create/2",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:2,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(p.jsx)("i",{className:"file alternate outline icon"}),"Cotizaci\xf3n"]}),Object(p.jsxs)(r.b,{className:"item",to:"/space/ventas/create/3",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:3,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(p.jsx)("i",{className:"file alternate outline icon"}),"Guia de Remisi\xf3n"]}),Object(p.jsxs)(r.b,{className:"item",to:"/space/ventas/create/4",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:4,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(p.jsx)("i",{className:"file alternate outline icon"}),"Nota de Cr\xe9dito"]})]})}),Object(p.jsx)(z.a,{open:s,content:"\xbfSeguro que deseas anular este documento? -Esta operacion es irreversible recuerde que puede editar este documento",onCancel:function(){d(!s)},onConfirm:Object(R.a)(G.a.mark((function e(){var o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.anular(t);case 2:o=e.sent,n(o),console.log(o),d(!s);case 6:case"end":return e.stop()}}),e)})))})]})},W=function(){var e=Object(o.useContext)(_).empresa;return Object(p.jsx)(p.Fragment,{children:e?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(F,{}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(C.a.Row,{columns:3,children:[Object(p.jsx)(C.a.Column,{width:1,children:Object(p.jsx)(D,{fluid:!0})}),Object(p.jsx)(y.b,{})]})})]}):Object(p.jsx)(y.a,{to:"/welcome/empresas"})})},Q=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(F,{}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(C.a.Row,{columns:3,style:{height:"80rem"},children:[Object(p.jsx)(C.a.Column,{width:10,style:{border:"solid 1px #d5d8da"},children:Object(p.jsx)(y.b,{})}),Object(p.jsx)(C.a.Column,{width:6})]})})]})},K=n(961),X=n(962),Z=n(958),$=function(){var e=Object(o.useState)({email:"adolfo.gbztt@gmail.com",password:"adolfo2403"}),t=Object(l.a)(e,2),n=t[0],i=t[1],c=V(),a=c.login,r=c.isLogged,s=c.isLoginLoading,d=c.hasLoginError,u=function(e){var t={};t[e.target.name]=e.target.value,i(Object(k.a)(Object(k.a)({},n),t))};return Object(p.jsx)(C.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(p.jsxs)(C.a.Column,{style:{maxWidth:450},children:[Object(p.jsx)(K.a,{as:"h2",color:"teal",textAlign:"center",children:"Log-in to your account"}),Object(p.jsx)(A.a,{size:"large",loading:s,children:Object(p.jsxs)(X.a,{stacked:!0,children:[Object(p.jsx)(A.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"email",onChange:u,value:null===n||void 0===n?void 0:n.email}),Object(p.jsx)(A.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",onChange:u,value:null===n||void 0===n?void 0:n.password}),r&&Object(p.jsx)(y.a,{to:"/welcome/empresas"}),Object(p.jsx)(I.a,{color:"teal",fluid:!0,size:"large",onClick:function(){a(n)},children:"Login"})]})}),d&&Object(p.jsx)(Z.a,{error:!0,header:"Error!",content:"Verifique que haya escrito bien sus credenciales."}),Object(p.jsxs)(Z.a,{children:["New to us? ",Object(p.jsx)("a",{href:"#",children:"Sign Up"})]})]})})},ee=(n(489),n(959)),te=n(946),ne=n(953),oe=n(171),ie=n(947);var ce={show:function(){return new Promise((function(e,t){m.get("/empresa").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("empresa/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("empresa/create",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("empresa/"+t,e).then((function(e){n(e.data)}))}))},updateLogo:function(e,t){var n=new FormData;return n.append("file",t),new Promise((function(o,i){m.post("empresa/logo/".concat(e),n,{"content-type":t.type}).then((function(e){o(e.data)})).catch((function(e){e.response&&o(e.response.data)}))}))},updateCertificado:function(e,t){var n=new FormData;return n.append("file",t),new Promise((function(o,i){m.post("empresa/certificado/".concat(e),n,{"content-type":t.type}).then((function(e){o(e.data)})).catch((function(e){e.response&&o(e.response.data)}))}))},unlockCertificado:function(e,t){return new Promise((function(n,o){m.post("empresa/unlock/".concat(e),{pass:t}).then((function(e){n(e.data)})).catch((function(e){e.response&&n(e.response.data)}))}))}};var ae={show:function(){return new Promise((function(e,t){m.get("/local").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("local/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("local",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("local/"+t,e).then((function(e){n(e.data)}))}))}};n(175);var re=function(){var e,t,n=Object(y.g)(),i=Object(y.h)(),c=Object(o.useContext)(_),a=(c.empresa,c.setEmpresa),s=Object(o.useState)(!1),d=Object(l.a)(s,2),u=d[0],j=d[1],b=Object(o.useState)(!1),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(o.useState)([]),v=Object(l.a)(x,2),f=v[0],g=v[1];Object(o.useEffect)((function(){w()}),{instancias:f});var w=function(){var e=Object(R.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,ae.show();case 3:return t=e.sent,O(!1),e.abrupt("return",g(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(R.a)(G.a.mark((function e(t,n){var o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.find(n);case 2:o=e.sent,a(o),window.window.localStorage.setItem("empresa",JSON.stringify(o)),i({pathname:"/workspace/app"});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){j(!u)};(null===n||void 0===n?void 0:n.state)&&(null===n||void 0===n||null===(e=n.state)||void 0===e||null===(t=e.reload)||void 0===t?void 0:t.empresa)&&(w(),n.state=null);return Object(p.jsxs)("div",{style:{marginTop:"1rem",marginBottom:"1rem"},children:[Object(p.jsx)(r.b,{to:"/welcome/empresas/create",state:{backgroundLocation:n},children:Object(p.jsx)(I.a,{primary:!0,floated:"right",style:{marginBottom:"1rem"},children:"Nueva Empresa"})}),h?Object(p.jsx)(ee.a,{active:!0,inverted:!0,children:Object(p.jsx)(te.a,{size:"large",children:"Cargando..."})}):(null===f||void 0===f?void 0:f.length)?f.map((function(e){return Object(p.jsx)(ne.a.Group,{divided:!0,children:Object(p.jsxs)(ne.a,{children:[Object(p.jsx)(ne.a.Image,{id:"logo-".concat(e.id),src:"".concat("http://192.168.2.3:8000","/storage/").concat(e.id,"/").concat(e.logo)}),Object(p.jsx)("img",{src:"".concat("http://192.168.2.3:8000","/storage/").concat(e.id,"/").concat(e.logo),alt:"qlq",crossOrigin:"Anonymous"}),Object(p.jsxs)(ne.a.Content,{children:[Object(p.jsx)(ne.a.Header,{as:"a",children:e.nombre}),Object(p.jsx)(r.b,{to:"/welcome/locals/create",state:{backgroundLocation:n,model:{empresa_id:e.id}},children:Object(p.jsx)(I.a,{floated:"right",size:"mini",children:Object(p.jsx)(N.a,{name:"plus"})})}),Object(p.jsx)(r.b,{to:"/welcome/empresas/".concat(e.id),state:{backgroundLocation:n,model:e},children:Object(p.jsx)(I.a,{floated:"right",size:"mini",icon:"pencil"})}),Object(p.jsxs)(ne.a.Meta,{children:[e.nombre_comercial," - Ruc ",e.ruc]}),Object(p.jsx)(ne.a.Extra,{children:Object(p.jsx)(oe.a,{children:"Activo"})}),e.locales.map((function(t){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ie.a,{}),Object(p.jsxs)(ne.a.Extra,{children:[Object(p.jsxs)(I.a,{size:"mini",primary:!0,floated:"right",onClick:function(){C(e,t.id)},children:["Ingresar",Object(p.jsx)(N.a,{name:"right chevron"})]}),Object(p.jsx)(r.b,{to:"/welcome/locals/".concat(t.id),state:{backgroundLocation:n,model:t},children:Object(p.jsx)(I.a,{size:"mini",icon:"pencil",color:"teal",floated:"right",onClick:k})}),Object(p.jsx)(ne.a.Header,{as:"h4",children:t.nombre})]},t.id)]})}))]})]},e.id)})})):Object(p.jsx)(p.Fragment,{children:" settings no contenido posees empresa "})]})},le=n(229);var se=function(e){e.setOpen,e.open;var t=e.size,n=(e.dimmer,e.setTitle),o=e.children,i=Object(y.h)();return Object(p.jsxs)(le.a,{closeIcon:!0,centered:!0,dimmer:"blurring",open:!0,onClose:function(){i(-1)},size:t,children:[Object(p.jsx)(le.a.Header,{children:n}),Object(p.jsx)(le.a.Content,{scrolling:!0,children:o})]})},de=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C.a.Column,{width:6}),Object(p.jsx)(C.a.Column,{width:8})]})},ue=n(948),je=n(430),be=n(105),me=n.n(be),he=n(25),pe=n(431),Oe=n.n(pe),xe=n(944),ve=n(955),fe=n(964),ge=n(957),_e=n(945),we=n(41);function Ce(e){return e?new Date(e).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]}var ye=function(e){var t=e.name,n=e.title,o=e.type,i=e.control,c=e.errors,a=e.width,r=e.readOnly;return Object(p.jsx)(he.a,{name:t,control:i,render:function(e){var i,l=e.field,s=l.onChange,d=l.onBlur,u=l.value;return Object(p.jsx)(A.a.Field,{width:a||2,required:"required"===(null===(i=c[t])||void 0===i?void 0:i.type),control:xe.a,label:n,value:"date"===o?Ce(u):u,placeholder:n,type:o,error:c[t]&&{content:c[t].message,pointing:"above"},readOnly:r||!1,onBlur:d,onChange:s})}})},ke=n(17),Se=ke.a({}).required(),Pe=function(e){return Object.keys(null===e||void 0===e?void 0:e.errors).map((function(t){var n="";return null===e||void 0===e||e.errors[t].forEach((function(e){n=n+e+" "})),n}))},Ve={transportista:{title:"Transportista",name:"transportista_id",name_model:"transportista",placeholder:"Buscar...",endPoint:"/cliente",link:"/welcome/clientes/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},clientes:{title:"Cliente",name:"cliente_id",name_model:"cliente",placeholder:"Buscar...",endPoint:"/cliente",link:"/welcome/clientes/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},vendedor:{title:"Vendedor",name:"vendedor_id",name_model:"vendedor",placeholder:"Buscar...",endPoint:"/cliente",link:"/welcome/clientes/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},ubigeo:{title:"Ubigeo",name:"ubigeo_id",name_model:"ubigeo",placeholder:"Busca el ubigeo",endPoint:"/resource/ubigeo",link:!1,params:!1,keys:{text:"provincia",id:"id",concat:["provincia","distrito","departamento"]}},tipo_documento_identy:{title:"Documento",name:"tipo_documento_identy_id",name_model:"tipo_documento_identy",placeholder:"Selecciona",endPoint:"/resource/tipo_documento_identy",link:!1,params:!1,keys:{text:"nombre",id:"id"}},almacen:{title:"Almacen",name:"almacen_id",name_model:"almacen",placeholder:"Selecciona",endPoint:"/almacen/local",link:!1,params:{local_id:!0},keys:{text:"nombre",id:"id"}},serie:{title:"Serie",name:"serie_id",name_model:"serie",placeholder:"Selecciona",endPoint:"/serie/tipo_operacion",link:!1,params:{local_id:!0},keys:{text:"descripcion",id:"id",concat:["descripcion","serie"]}},forma_pago:{title:"Condicion de Pago",name:"forma_pago_id",name_model:"forma_pago",placeholder:"Selecciona",endPoint:"/resource/forma_pago",link:!1,params:!1,keys:{text:"nombre",id:"id"}},moneda:{title:"Moneda",name:"moneda_id",name_model:"moneda",placeholder:"Selecciona",endPoint:"/moneda",link:"/welcome/moneda/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},producto:{title:"Producto",name:"producto",name_model:"producto",placeholder:"Selecciona",endPoint:"/producto",link:"/welcome/producto/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},documento_relacion_search:{title:"Documento Relacionado",name:"documento_relacion_search_id",name_model:"documento_relacion_search",placeholder:"Buscar por serie y numero de correlativo",endPoint:"/venta",link:!1,params:{empresa_id:!0,local_id:!0},keys:{text:"uniqueserie",id:"id",concat:["uniqueserie"]}},motivos_sunat_guia_remision:{title:"Motivo Guia de Remisi\xf3n",name:"motivos_sunat_guia_remision_id",name_model:"motivos_sunat_guia_remision",placeholder:"Seleccione Motivo",endPoint:"/resource/motivos_sunat_guia_remision",link:!1,params:!1,keys:{text:"descripcion",id:"id"}},vehiculo:{title:"Veh\xedculo",name:"vehiculo_id",name_model:"vehiculo",placeholder:"Selecciona",endPoint:"/vehiculo",link:"/welcome/vehiculo/",params:{empresa_id:!0},keys:{text:"descripcion",id:"id",concat:["descripcion"]}},ubigeo_partida:{title:"Ubigeo de Partida",name:"ubigeo_partida_id",name_model:"ubigeo_partida",placeholder:"Buscar ubigeo",endPoint:"/resource/ubigeo",link:!1,params:!1,keys:{text:"provincia",id:"id",concat:["provincia","distrito","departamento"]}},ubigeo_destino:{title:"Ubigeo de Destino",name:"ubigeo_destino_id",name_model:"ubigeo_destino",placeholder:"Buscar Destino",endPoint:"/resource/ubigeo",link:!1,params:!1,keys:{text:"provincia",id:"id",concat:["provincia","distrito","departamento"]}},tipo_producto:{title:"Tipo de producto",name:"tipo_producto_id",name_model:"tipo_producto",placeholder:"Seleccione un tipo de Producto",endPoint:"/resource/tipo_producto",link:!1,params:!1,keys:{text:"nombre",id:"id"}},presentacion:{title:"Presentaci\xf3n",name:"presentacion_id",name_model:"presentacion",placeholder:"Seleccione Presentaci\xf3n",endPoint:"/resource/presentacion",link:!1,params:!1,keys:{text:"nombre",id:"id"}},marca:{title:"Marca",name:"marca_id",name_model:"marca",placeholder:"Seleccione Marca",endPoint:"/producto_features/marcas",link:!1,params:!1,keys:{text:"nombre",id:"id"}},linea:{title:"Linea",name:"linea_id",name_model:"linea",placeholder:"Seleccione Marca",endPoint:"/producto_features/lineas",link:!1,params:!1,keys:{text:"nombre",id:"id"}},categoria:{title:"Categoria",name:"categoria_id",name_model:"categoria",placeholder:"Seleccione Categoria",endPoint:"/producto_features/categorias",link:!1,params:!1,keys:{text:"nombre",id:"id"}},subcategoria:{title:"Sub Categorias",name:"subcategoria_id",name_model:"sub_categoria",placeholder:"Seleccione Sub Categoria",endPoint:"/producto_features/subcategorias",link:!1,params:!1,keys:{text:"nombre",id:"id"}}},Fe=n(122),De=n.n(Fe);var Te={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{order:{id:"DESC"}},n=De.a.stringify(t);return new Promise((function(t,o){m.get("".concat(e,"?").concat(n)).then((function(e){t(e.data)}),(function(e){o(new Error("bad request"))}))}))}},Ie=function(e,t){return!(e&&!e[0])&&(null===e||void 0===e?void 0:e.map((function(e,n){return t.concat?{text:t.concat.map((function(t){return e[t]})).join("-"),value:e[null===t||void 0===t?void 0:t.id],key:n,model:e}:{text:e[null===t||void 0===t?void 0:t.text],value:e[null===t||void 0===t?void 0:t.id],key:n,model:e}})))},qe=function(){var e=Object(R.a)(G.a.mark((function e(t,n,o,i){var c,a,r,l,s,d,u,j,b=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=b.length>4&&void 0!==b[4]?b[4]:null,a=b.length>5?b[5]:void 0,r=b.length>6?b[6]:void 0,(null===i||void 0===i?void 0:i.empresa_id)&&(o+="/"+t.empresa.id),(null===i||void 0===i?void 0:i.local_id)&&(console.log(t.id),o+="/"+t.id),o.search("undefined"),a)for(s=Object.keys(a).map((function(e){return r[e]})),d=0;d<s.length;d++)o+="/"+s[d];if(!("string"===typeof c&&c.length<3)){e.next=9;break}return e.abrupt("return",!1);case 9:return"string"===typeof c&&c.length>3&&(l={filter:[[n.text,"like","%"+c+"%"]]}),"object"===typeof c&&(l=c),l=c?l:null,e.next=14,Te.show(o,l);case 14:return u=e.sent,e.next=17,Ie(u.data,n);case 17:return j=e.sent,o.search("/vehiculo")>0&&console.log(n,o,i,c,a),e.abrupt("return",j);case 20:case"end":return e.stop()}}),e)})));return function(t,n,o,i){return e.apply(this,arguments)}}(),Ee=function(e){var t,n,i=e.model,c=e.moreRouteParams,a=e.empresaContexto,s=e.control,d=e.venta,u=(e.handleChangeVenta,e.setValue),j=e.width,b=e.autoFocus,m=e.onListenChange,h=Object(y.h)(),O=Object(y.g)(),x=Object(o.useState)({isFetching:!1,multiple:!0,searchQuery:null,value:"",options:[]}),v=Object(l.a)(x,2),f=v[0],g=v[1],_=function(){var e=Object(R.a)(G.a.mark((function e(t,n){var o,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.searchQuery,g({isFetching:!0}),e.next=4,qe(a,i.keys,i.endPoint,i.params,o,c,d);case 4:r=e.sent,g(Object(k.a)(Object(k.a)({},f),{options:r,isFetching:!1}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(R.a)(G.a.mark((function e(){var t,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe(a,i.keys,i.endPoint,i.params,{limit:20,order:{id:"DESC"}},c,d);case 2:if(t=e.sent,!d||!d[null===i||void 0===i?void 0:i.name_model]){e.next=15;break}return e.next=6,Ie([d[null===i||void 0===i?void 0:i.name_model]],i.keys);case 6:if(n=e.sent,!t.find((function(e){return e.value===n[0].value}))){e.next=12;break}return e.abrupt("return",t);case 12:return n[0].key=t.length,t.push(n[0]),e.abrupt("return",t);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){w().then((function(e){g(Object(k.a)(Object(k.a)({},f),{options:e,isFetching:!1}))}),(function(e){console.log(e),alert("efecto fallo posiblemente la respuesta no esta en formato adecuado [data]=>{}")}))}),[]),Object(o.useEffect)((function(){var e;if((null===O||void 0===O?void 0:O.state)&&(null===O||void 0===O||null===(e=O.state)||void 0===e?void 0:e.reload)){var t,n,o,c;console.log(O.state,"- Has changed"),console.log(O.state,O.state.reload);var a=Ie([null===(t=O.state)||void 0===t?void 0:t.reload[i.name]],i.keys);g({options:a}),u(i.name,null===O||void 0===O||null===(n=O.state)||void 0===n||null===(o=n.reload[i.name])||void 0===o?void 0:o.id),u(i.name_model,null===O||void 0===O||null===(c=O.state)||void 0===c?void 0:c.reload[null===i||void 0===i?void 0:i.name])}}),[null===(t=O.state)||void 0===t||null===(n=t.reload)||void 0===n?void 0:n[[i.name]]]),Object(p.jsx)(he.a,{name:i.name,control:s,render:function(e){var t,n=e.field,o=(n.onChange,n.onBlur,n.value);return Object(p.jsxs)(A.a.Field,{width:j||5,children:[Object(p.jsxs)("label",{children:[i.title," ",!(null===O||void 0===O||null===(t=O.state)||void 0===t?void 0:t.backgroundLocation)&&i.link&&Object(p.jsx)(N.a,{onClick:function(){!function(e,t){var n=f.options.find((function(e){return e.value===t}));h(i.link+t,{state:{backgroundLocation:O,model:n.model,empresaContexto:e}})}(a,o)},name:"pencil",size:"small"})]}),Object(p.jsx)(P.a,{searchInput:{autoFocus:b},clearable:!0,options:f.options,placeholder:i.placeholder,onChange:function(e,t){u(i.name,t.value);var n=f.options.find((function(e){return e.value===t.value}));u(null===i||void 0===i?void 0:i.name_model,null===n||void 0===n?void 0:n.model),m&&m(t)},onSearchChange:_,loading:f.isFetching,search:!0,value:parseInt(o),selection:!0,noResultsMessage:i.link?Object(p.jsx)(r.b,{to:i.link+"create",state:{backgroundLocation:O,model:{local_id:a.id,empresa_id:a.empresa.id}},children:"Agregar Nuevo"}):"Sin Resultados"})]})}})},Ne=n(122);var Ae={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:20,order:{id:"DESC"}},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Ne.stringify(t);return new Promise((function(t,i){m.get("".concat(e,"?page=").concat(n,"&").concat(o)).then((function(e){t(e.data)}),(function(e){i(!1)}))}))},find:function(e){return new Promise((function(t,n){m.get("empresa/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("producto",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("producto/"+e.empresa_id+"/"+t,e).then((function(e){n(e.data)}))}))}},Le=function(e,t){return e.map((function(e,n){return t.concat?{text:t.concat.map((function(t){return e[t]})).join("-"),value:e[t.id],key:n,model:e}:{text:e[t.text],value:e[t.id],key:n,model:e}}))},Ge=function(){var e=Object(R.a)(G.a.mark((function e(t,n,o,i){var c,a,r,l,s,d,u,j,b=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=b.length>4&&void 0!==b[4]?b[4]:null,a=b.length>5?b[5]:void 0,r=b.length>6?b[6]:void 0,console.log(o),(null===i||void 0===i?void 0:i.empresa_id)&&(o=o+"/"+t.empresa.id),console.log(o),(null===i||void 0===i?void 0:i.local_id)&&(o=o+"/"+t.id),console.log(o),a)for(s=Object.keys(a).map((function(e){return r[e]})),d=0;d<s;d++)o=o+"/"+s[d];if(console.log(o),!("string"===typeof c&&c.length<3)){e.next=12;break}return e.abrupt("return",!1);case 12:return console.log(o),"string"===typeof c&&c.length>3&&(l={filter:[[n.text,"like","%"+c+"%"]]}),console.log(o),"object"===typeof c&&(l=c),console.log(o),l=c?l:null,console.log(l),e.next=21,Ae.show(o,l);case 21:return u=e.sent,e.next=24,Le(u.data,n);case 24:return j=e.sent,e.abrupt("return",j);case 26:case"end":return e.stop()}}),e)})));return function(t,n,o,i){return e.apply(this,arguments)}}(),Re=function(e,t){var n=e.model,i=e.moreRouteParams,c=e.empresaContexto,a=e.venta,r=e.setItemSelected,s=(e.width,Object(o.useState)({isFetching:!1,multiple:!1,searchQuery:null,value:"",options:[]})),d=Object(l.a)(s,2),u=d[0],j=d[1],b=function(){var e=Object(R.a)(G.a.mark((function e(t,o){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({isFetching:!0}),e.next=3,Ge(c,n.keys,n.endPoint,n.params,i,a);case 3:r=e.sent,j(Object(k.a)(Object(k.a)({},u),{options:r,isFetching:!1}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=Object(o.useRef)(null);return Object(o.useImperativeHandle)(t,(function(){return{open:function(){setTimeout((function(){console.log(m),m.current.open()}),200)}}})),Object(p.jsx)(P.a,{ref:m,fluid:!0,selection:!0,clearable:!0,multiple:!1,search:!0,options:u.options,placeholder:"Buscar Producto \xf3 Servicio",onChange:function(e,t){var n=t.options.find((function(e){return e.value===t.value}));r(n)},onSearchChange:b,loading:u.isFetching,noResultsMessage:"result not fund "})},ze=Object(o.forwardRef)(Re),Be=n(29),Me=n(30),He=function(){function e(t,n,o,i,c,a,r){Object(Be.a)(this,e),this.modo=t,this.limite_detraccion=n,this.por_detraccion=o,this.por_percepcion=i,this.limite_percepcion=c,this.por_igv=a,this.decimales=r,this.total_afecto=0,this.total_inafecto=0,this.total_igv=0,this.total_isc=0,this.total_exonerado=0,this.total_descuento_lineal=0,this.total_descuento_global=0,this.total_documento=0,this.total_percepcion=0,this.total_detraccion=0,this.total_documento_fin=0,this.total_peso=0}return Object(Me.a)(e,[{key:"roundOff",value:function(e){var t=Math.pow(10,8);return Math.round(e*t)/t}},{key:"item",value:function(e,t){return e.afecto?(e=this.isc(e,t),e=this.igv(e,t),e=this.detraccion(e,t)):e=this.inafecto(e,t),(t=Object(k.a)(Object(k.a)({},t),e)).id=void 0,t.producto_id=e.id,t.total_impuestos=0,t.val_descuento=t.val_descuento||0,t.tipo_afecto_igv=t.tipo_afecto_igv||10,t.tipo_producto_id=e.tipo_producto_id,t}},{key:"isc",value:function(e,t){return t&&t.por_isc&&"venta"===this.modo?t.isc=(null===t||void 0===t?void 0:t.precio_venta)*(null===e||void 0===e?void 0:e.por_isc)/100:t.isc=0,e}},{key:"igv",value:function(e,t){return"venta"===this.modo?(t.monto_base_igv=t.precio_venta+t.isc,e.costo_venta=this.roundOff(t.precio_venta/(this.por_igv/100+1)),e.igv=e.costo_venta*(this.por_igv/100),e.por_utilidad=this.roundOff(parseFloat(e.costo_venta)/t.costo_compra*100-100)):t.monto_base_igv=t.precio_venta,e.monto_igv=1.18*t.monto_base_igv-t.monto_base_igv-(t.val_descuento-t.val_descuento/1.18),e}},{key:"inafecto",value:function(e,t){return"venta"===this.modo?(t.monto_base_igv=t.precio_venta,e.costo_venta=this.roundOff(t.precio_venta),e.igv=0,e.por_utilidad=this.roundOff(parseFloat(e.costo_venta)/t.costo_compra*100-100)):t.monto_base_igv=t.precio_venta,e.monto_igv=0,e.isc=0,e}},{key:"detraccion",value:function(e,t){return 2===e.tipo_producto_id||e.por_detraccion>0?(e.check_detraccion_amount=(this.roundOff(t.costo_venta)+this.roundOff(t.isc)+this.roundOff(t.igv))*this.roundOff(t.cantidad),1===e.tipo_producto_id?(e.detraccion=e.check_detraccion_amount*this.roundOff(e.por_detraccion/100),e):2===e.tipo_producto_id?(e.detraccion=e.check_detraccion_amount*this.roundOff(this.por_detraccion/100),console.log("detraccion >>>>>>>>>>>>>>>>",e.detraccion),e):void 0):(e.detraccion=0,e.check_detraccion_amount=0,e)}},{key:"descuentoEfectivo",value:function(e){return e.por_descuento=this.roundOff(100*e.val_descuento/(e.costo_venta+e.igv)).toFixed(2),console.log(e.val_descuento,e.costo_venta,e.igv),e}},{key:"descuentoPorcentaje",value:function(e){return e.val_descuento=this.roundOff(e.por_descuento*(e.costo_venta+e.igv)/100).toFixed(2),console.log(e.val_descuento),e}},{key:"afecto",value:function(e,t){}},{key:"totales",value:function(e,t){this.total_afecto=0,this.total_inafecto=0,this.total_igv=0,this.total_isc=0,this.total_exonerado=0,this.total_descuento_global=t,this.total_descuento_lineal=0,this.total_documento=0,this.total_percepcion=0,this.total_detraccion=0,this.total_documento_fin=0,this.total_peso=0,this.check_detraccion_amount=0;for(var n=0;n<e.length;n++){var o,i=e[n];i.producto.afecto?(this.total_afecto+=this.roundOff(i.precio_unitario*parseFloat(i.cantidad)),this.total_igv+=this.roundOff(i.igv*parseFloat(i.cantidad))):(this.total_inafecto+=this.roundOff(i.precio_unitario*parseFloat(i.cantidad)),this.total_igv+=this.roundOff(i.igv*parseFloat(i.cantidad))),this.total_peso+=this.roundOff((null===i||void 0===i||null===(o=i.producto)||void 0===o?void 0:o.peso)*parseFloat(null===i||void 0===i?void 0:i.cantidad)),this.total_isc+=this.roundOff(null===i||void 0===i?void 0:i.isc)*this.roundOff(null===i||void 0===i?void 0:i.cantidad),this.check_detraccion_amount+=this.roundOff(i.check_detraccion_amount),this.total_detraccion+=this.roundOff(i.detraccion),console.log("total detraccion >>>>>>>>>>>>>>>>>>>>>>>",this.total_detraccion),this.total_descuento_lineal+=this.roundOff(null===i||void 0===i?void 0:i.val_descuento)*this.roundOff(null===i||void 0===i?void 0:i.cantidad),console.log(this.total_descuento_lineal)}return this.check_detraccion_amount>this.limite_detraccion||(this.total_detraccion=0),this.total_documento=this.roundOff(this.roundOff(this.total_igv)+this.roundOff(this.total_afecto)+this.roundOff(this.total_inafecto)+this.roundOff(this.total_isc)),this.por_percepcion>0?this.total_percepcion=this.total_documento*(this.roundOff(this.por_percepcion)/100):this.total_percepcion=0,this.total_documento_fin=this.total_documento+this.total_percepcion-this.roundOff(this.total_descuento_global)-this.roundOff(this.total_descuento_lineal),{total_afecto:this.total_afecto,total_inafecto:this.total_inafecto,total_igv:this.total_igv,total_isc:this.total_isc,total_exonerado:this.total_exonerado,total_descuento_lineal:this.total_descuento_lineal,total_descuento_global:this.roundOff(t),total_documento:this.total_documento,total_percepcion:this.total_percepcion,total_detraccion:this.total_detraccion,total_documento_fin:this.total_documento_fin,total_peso:this.total_peso}}}]),e}(),Ue=n(14),Ye=n(442),Je=n.n(Ye);n(175);var We=function(e){var t,n,o,i,c,a,r,l,s,d,j,b,m,h,O,x,v,f,g,_,w,C,y,S,P,V,F,D,T,I,q,E,N,A,L=e.empresa,G=e.status,R=e.qrCodeBase64,z={fontSize:"8px"},B={padding:"5"},M={padding:"2"};return Object(p.jsx)(Ue.Document,{children:Object(p.jsxs)(Ue.Page,{wrap:!0,size:"A4",style:{paddingTop:"35",paddingBottom:"65",paddingHorizontal:"35",fontSize:"9px"},children:[Object(p.jsxs)(Ue.View,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},fixed:!0,children:[Object(p.jsx)(Ue.View,{children:Object(p.jsx)(Ue.Image,{source:{uri:u()+"/logo/"+L.empresa.id},style:{width:"100px",maxWidth:"100px",maxHeigh:"100px"}})}),Object(p.jsxs)(Ue.View,{style:{padding:"10px",fontSize:"7px"},children:[Object(p.jsx)(Ue.Text,{style:M,children:null===L||void 0===L||null===(t=L.empresa)||void 0===t?void 0:t.nombre_comercial}),Object(p.jsx)(Ue.Text,{style:M,children:null===L||void 0===L||null===(n=L.empresa)||void 0===n?void 0:n.direccion}),Object(p.jsxs)(Ue.Text,{style:M,children:["Email: ",null===L||void 0===L||null===(o=L.empresa)||void 0===o?void 0:o.email," Tlf: ",null===L||void 0===L||null===(i=L.empresa)||void 0===i?void 0:i.telefono," ","Cel.",null===L||void 0===L||null===(c=L.empresa)||void 0===c?void 0:c.celular," "]})]}),Object(p.jsxs)(Ue.View,{style:{border:"1px",padding:"10px"},children:[Object(p.jsxs)(Ue.Text,{style:{textAlign:"center"},children:["RUC ",null===L||void 0===L||null===(a=L.empresa)||void 0===a?void 0:a.ruc]}),Object(p.jsx)(Ue.Text,{style:{textAlign:"center"},children:null===G||void 0===G||null===(r=G.serie)||void 0===r?void 0:r.descripcion}),Object(p.jsxs)(Ue.Text,{style:{textAlign:"center"},children:[null===G||void 0===G||null===(l=G.serie)||void 0===l?void 0:l.serie," ",null===G||void 0===G?void 0:G.correlativo]})]})]}),Object(p.jsxs)(Ue.View,{style:{display:"flex",flexDirection:"row",alignItems:"space-between",border:"1px",padding:"5",marginTop:"5"},fixed:!0,children:[Object(p.jsxs)(Ue.View,{style:{display:"flex",flexDirection:"column",justifyContent:"",minWidth:"50%",maxWidth:"50%",fontSize:"7px",alignItems:"flex-start"},children:[Object(p.jsxs)(Ue.Text,{style:M,children:["Cliente: ",null===G||void 0===G||null===(s=G.cliente)||void 0===s?void 0:s.nombre_comercial]}),Object(p.jsxs)(Ue.Text,{style:M,children:[1===(null===G||void 0===G||null===(d=G.cliente)||void 0===d?void 0:d.tipo_documento_identy_id)?"DNI":2===(null===G||void 0===G||null===(j=G.cliente)||void 0===j?void 0:j.tipo_documento_identy_id)?"RUC":"DOCUMENTO",": ",null===G||void 0===G||null===(b=G.cliente)||void 0===b?void 0:b.numero_documento]}),Object(p.jsxs)(Ue.Text,{style:M,children:["Direcci\xf3n: ",null===G||void 0===G||null===(m=G.cliente)||void 0===m?void 0:m.direccion]}),Object(p.jsxs)(Ue.Text,{style:M,children:["Ubigeo: ",null===G||void 0===G||null===(h=G.cliente)||void 0===h?void 0:h.ubigeo.provincia," ",null===G||void 0===G||null===(O=G.cliente)||void 0===O?void 0:O.ubigeo.distrito," ",null===G||void 0===G||null===(x=G.cliente)||void 0===x?void 0:x.ubigeo.departamento]})]}),Object(p.jsxs)(Ue.View,{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:"50%",maxWidth:"50%",fontSize:"7px"},children:[Object(p.jsx)(Ue.Text,{style:M,children:"Fecha Emi: 08/09/2021"}),Object(p.jsx)(Ue.Text,{style:M,children:"Fecha Reg: 08/09/2021"}),Object(p.jsx)(Ue.Text,{style:M,children:"Condici\xf3n: Cr\xe9dito"}),Object(p.jsx)(Ue.Text,{style:M,children:"\xa0"})]})]}),Object(p.jsxs)(Ue.View,{style:{display:"flex",flexDirection:"row",alignItems:"space-evenly",marginTop:"5px"},fixed:!0,children:[Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:50,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"center"}),children:"C\xf3digo"})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:310,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)({},z),children:"Descripcion"})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:50,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:"Cant."})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:"Present."})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:"Precio"})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,borderBottom:"1px",borderLeft:"1px",borderTop:"1px",borderRight:"1px"}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:"Importe"})})]}),null===G||void 0===G?void 0:G.detalles.map((function(e,t,n){var o,i,c,a=n.length;return Object(p.jsxs)(Ue.View,{style:{display:"flex",flexDirection:"row",marginBottom:"1",fontSize:"9px"},children:[Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:50,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"center"}),children:null===e||void 0===e||null===(o=e.producto)||void 0===o?void 0:o.codigo})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:310,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)({},z),children:null===e||void 0===e||null===(i=e.producto)||void 0===i?void 0:i.nombre})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:50,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsxs)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:["10",null===e||void 0===e?void 0:e.cantidad]})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:null===e||void 0===e||null===(c=e.presentacion)||void 0===c?void 0:c.nombre})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:null===e||void 0===e?void 0:e.precio_unitario.toFixed(3)})}),Object(p.jsx)(Ue.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,marginTop:"-2px",borderLeft:"1px",borderRight:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:((null===e||void 0===e?void 0:e.cantidad)*(null===e||void 0===e?void 0:e.precio_unitario)).toFixed(3)})})]})})),Object(p.jsxs)(Ue.View,{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",marginBottom:"1",fontSize:"9px",padding:"10"},children:[Object(p.jsxs)(Ue.View,{children:[Object(p.jsxs)(Ue.Text,{style:M,children:["Son:"," ",(A=Je()(null===G||void 0===G?void 0:G.total_documento_fin,{lang:"es"}),A.charAt(0).toUpperCase()+A.slice(1))," ","con 00/100 ",null===G||void 0===G||null===(v=G.moneda)||void 0===v?void 0:v.nombre.toLowerCase()]}),Object(p.jsx)(Ue.Image,{source:{uri:R},style:{width:"80px",marginBottom:"10px"}}),(null===G||void 0===G?void 0:G.detalle)&&Object(p.jsxs)(Ue.Text,{style:M,children:["Observaci\xf3n: ",null===G||void 0===G?void 0:G.detalle," "]}),(null===L||void 0===L||null===(f=L.empresa)||void 0===f?void 0:f.detalle)&&Object(p.jsxs)(Ue.Text,{style:M,children:[null===L||void 0===L||null===(g=L.empresa)||void 0===g?void 0:g.detalle," "]})]}),Object(p.jsxs)(Ue.View,{style:{fontSize:"8px",flexDirection:"row",justifyContent:"space-between"},children:[Object(p.jsxs)(Ue.View,{style:{flexDirection:"column",width:"50px"},children:[Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Afecto"}),Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Inafecto"}),Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"ISC"}),Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"IGV"}),Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Total"}),Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Percepci\xf3n"}),Object(p.jsx)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Total"})]}),Object(p.jsxs)(Ue.View,{style:{flexDirection:"column",width:"80px",textAlign:"right"},children:[Object(p.jsxs)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===G||void 0===G||null===(_=G.moneda)||void 0===_?void 0:_.simbolo," ",null===G||void 0===G||null===(w=G.total_afecto)||void 0===w?void 0:w.toFixed(3)]}),Object(p.jsxs)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===G||void 0===G||null===(C=G.moneda)||void 0===C?void 0:C.simbolo," ",null===G||void 0===G||null===(y=G.total_inafecto)||void 0===y?void 0:y.toFixed(3)]}),Object(p.jsxs)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===G||void 0===G||null===(S=G.moneda)||void 0===S?void 0:S.simbolo," ",null===G||void 0===G||null===(P=G.total_isc)||void 0===P?void 0:P.toFixed(3)]}),Object(p.jsxs)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===G||void 0===G||null===(V=G.moneda)||void 0===V?void 0:V.simbolo," ",null===G||void 0===G||null===(F=G.total_igv)||void 0===F?void 0:F.toFixed(3)]}),Object(p.jsxs)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===G||void 0===G||null===(D=G.moneda)||void 0===D?void 0:D.simbolo," ",null===G||void 0===G||null===(T=G.total_documento)||void 0===T?void 0:T.toFixed(3)]}),Object(p.jsxs)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===G||void 0===G||null===(I=G.moneda)||void 0===I?void 0:I.simbolo," ",null===G||void 0===G||null===(q=G.total_percepcion)||void 0===q?void 0:q.toFixed(3)]}),Object(p.jsxs)(Ue.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===G||void 0===G||null===(E=G.moneda)||void 0===E?void 0:E.simbolo," ",null===G||void 0===G||null===(N=G.total_documento_fin)||void 0===N?void 0:N.toFixed(3)]})]})]})]}),Object(p.jsx)(Ue.View,{style:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},fixed:!0,children:Object(p.jsx)(Ue.Text,{style:{color:"black",fontSize:"10px"},children:"este es el footer"})})]})})},Qe=function(e){var t,n,i,c,a,r,s,d,u,b,m,h,O,x,v,f,g,w,V,F,D,T,q,E,L,B,M,H,U,J,W,Q,$,ee,te,ne,oe,ie,ce,ae,re,le,se,de=e.selected,je=e.handleChangeVenta,be=e.editionMode,me=e.state,pe=e.formatPrint,Ce=e.setFormatPrint,ke=Object(y.h)(),Fe=Object(y.g)(),De=Object(o.useContext)(_),Te=De.empresa,Ie=De.setEmpresa,qe=De.impresion,Ne=Object(o.useState)(!1),Ae=Object(l.a)(Ne,2),Le=Ae[0],Ge=Ae[1],Re=Object(o.useState)(!1),Be=Object(l.a)(Re,2),Me=Be[0],Ye=Be[1],Je=Object(o.useState)(!1),Qe=Object(l.a)(Je,2),Ke=Qe[0],Xe=Qe[1],Ze=Object(o.useState)(!1),$e=Object(l.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(o.useState)(!1),ot=Object(l.a)(nt,2),it=ot[0],ct=ot[1],at=Object(o.useState)(2),rt=Object(l.a)(at,2),lt=rt[0],st=rt[1],dt=Object(o.useState)(!1),ut=Object(l.a)(dt,2),jt=ut[0],bt=ut[1],mt=Object(o.useState)(!1),ht=Object(l.a)(mt,2),pt=ht[0],Ot=ht[1],xt=Object(o.useState)(),vt=Object(l.a)(xt,2),ft=(vt[0],vt[1]),gt=Object(o.useState)(!1),_t=Object(l.a)(gt,2),wt=_t[0],Ct=_t[1],yt=Object(o.useState)([{key:0}]),kt=Object(l.a)(yt,2),St=kt[0],Pt=kt[1],Vt=Object(o.useState)({model:{precio_venta:0,cantidad:0,descuento:0}}),Ft=Object(l.a)(Vt,2),Dt=Ft[0],Tt=Ft[1],It=Object(o.useState)([]),qt=Object(l.a)(It,2),Et=(qt[0],qt[1]),Nt=(Object(o.useRef)(null),function(e,t){var n=t.index,o=lt.activeIndex;st(o===n?-1:n)});de||(de=me||{serie:{tipo_operacion_id:1},tipo_operacion_id:1,detalles:[],documento_relacion_search:void 0,documento_relacion_search_id:void 0});var At=Object(he.e)({resolver:Object(we.a)(Se),defaultValues:de||me.model}),Lt=At.control,Gt=At.handleSubmit,Rt=At.formState.errors,zt=At.setValue,Bt=At.reset,Mt=(0,At.watch)(),Ht=new He("venta",Te.empresa.limite_detraccion,Te.empresa.por_detraccion,Te.empresa.por_percepcion,null,18,8);Object(o.useEffect)((function(){var e,t=null===wt||void 0===wt||null===(e=wt.model)||void 0===e?void 0:e.precios.map((function(e,t){var n;return{key:t,text:null===e||void 0===e||null===(n=e.presentacion)||void 0===n?void 0:n.abbr,value:null===e||void 0===e?void 0:e.id,model:e}}));return Pt(t),function(){Pt(!1)}}),[wt]),Object(o.useEffect)((function(){if(wt)return Kt(null,{name:"cantidad",value:1}),function(){Kt(!1)}}),[wt]),Object(o.useEffect)((function(){if(de){var e;Ce({status:!1});var t=null===(e=document)||void 0===e?void 0:e.querySelector("canvas");ct(null===t||void 0===t?void 0:t.toDataURL("image/jpg",.3)),ft(de)}return function(){ft(!1)}}),[]);var Ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ht.totales(e,t);Object.keys(n).map((function(e){return zt(e,n[e]),e}))},Yt=function(e){var t=e.productoChoose,n=e.itemSelected;return new Promise((function(e,o){t&&n&&n.model&&t.model.costo_venta&&t.model.cantidad?e({productoChoose:t,itemSelected:n}):o(!1)}))},Jt=function(e){"Tab"!==e.key&&"Enter"!==e.key||(Wt(),$t.current.open())},Wt=function(){var e=Object(R.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tt(!0),e.next=3,Yt({productoChoose:Dt,itemSelected:wt}).then((function(e){var t=Dt.model;t.codigo=Dt.model.codigo,t.monto_igv=Dt.model.igv,t.precio_unitario=Dt.model.costo_venta,t.monto_precio_unitario=Dt.model.costo_venta,t.producto={nombre:wt.model.nombre,peso:wt.model.peso,afecto:wt.model.afecto};var n=Mt.detalles||[];n.push(t),zt("detalles",n),Ut(Mt.detalles),tt(!1),Tt({model:{precio_venta:0,cantidad:0,descuento:0}})}),(function(e){j.b.error("complete el formulario de ingreso de producto"),tt(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qt=function(){var e;if(!(null===(e=Fe.state)||void 0===e?void 0:e.backgroundLocation))return Ge(!1),!1;ke(Fe.state.backgroundLocation.pathname,{state:{reload:{ventas:!0}}})},Kt=function(e,t){"precio_venta"===t.name&&(Dt.model.cantidad=0);var n={};n[t.name]=t.value;var o=Object(k.a)(Object(k.a)({},Dt.model),n),i=Ht.item(wt.model,o),c=Dt;c.model=i,Tt(Object(k.a)({},c))},Xt=function(){zt("correlativo",parseFloat(null===Mt||void 0===Mt?void 0:Mt.correlativo)+1),zt("detalles",[]),zt("total_afecto",0),zt("total_descuento_global",0),zt("total_descuento_lineal",0),zt("total_detraccion",0),zt("total_documento",0),zt("total_documento_fin",0),zt("total_exonerado",0),zt("total_igv",0),zt("total_inafecto",0),zt("total_isc",0),zt("total_percepcion",0),zt("total_peso",0)},Zt=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id){e.next=24;break}return Ge(!0),e.next=4,Y.update(t,t.id);case 4:if(n=e.sent,me){e.next=20;break}if(je(t),Te.empresa.id!==n.id){e.next=16;break}return Te.empresa=n,e.next=11,Ie(Te);case 11:return e.next=13,Ge(!1);case 13:Qt(),e.next=18;break;case 16:Qt(),Ge(!1);case 18:e.next=21;break;case 20:Ge(!1);case 21:qe.after_save&&Ce({status:!(null===pe||void 0===pe?void 0:pe.status),from:"update"}),e.next=30;break;case 24:return e.next=26,Y.create(t);case 26:return o=e.sent,Ge(!1),(null===o||void 0===o?void 0:o.errors)?(me.id&&je(t),Ye(Pe(o))):(qe.after_save&&Ce({status:!(null===pe||void 0===pe?void 0:pe.status),from:"create"}),Ye(null),Qt()),e.abrupt("return",o);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$t=Object(o.useRef)();return Object(p.jsx)("div",{style:Fe.pathname.search("/space/ventas/")?{overflowY:"scroll",height:"85vh",marginTop:"1vh"}:{overflowY:"scroll",height:"95vh",marginTop:"0vh"},children:pe&&!(null===pe||void 0===pe?void 0:pe.status)?Object(p.jsxs)(A.a,{onSubmit:Gt(Zt),noValidate:!0,children:[Object(p.jsxs)(X.a,{children:[Object(p.jsxs)(A.a.Group,{children:[be?Object(p.jsx)(Ee,{model:Ve.serie,moreRouteParams:{tipo_operacion_id:null===(i=de)||void 0===i||null===(c=i.serie)||void 0===c?void 0:c.tipo_operacion_id},empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:4,onListenChange:function(e){var t,n=e.options,o=e.value,i=n.find((function(e,t){return e.value===o}));zt("correlativo",(null===i||void 0===i||null===(t=i.model)||void 0===t?void 0:t.correlativo)||1)}}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Serie",placeholder:"Seleccione Serie",value:(null===Mt||void 0===Mt||null===(t=Mt.serie)||void 0===t?void 0:t.descripcion)+"-"+(null===Mt||void 0===Mt||null===(n=Mt.serie)||void 0===n?void 0:n.serie),readOnly:!0,width:4}),be?Object(p.jsx)(ye,{name:"correlativo",title:"Correlativo",control:Lt,errors:Rt,type:"number",width:2}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Correlativo",placeholder:"Selecione",value:null===Mt||void 0===Mt?void 0:Mt.correlativo,readOnly:!0,width:2}),be?Object(p.jsx)(Ee,{model:Ve.clientes,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:10}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Cliente",placeholder:"Selecione",value:null===Mt||void 0===Mt||null===(a=Mt.cliente)||void 0===a?void 0:a.nombre,readOnly:!0,width:10})]}),Object(p.jsxs)(A.a.Group,{children:[be?Object(p.jsx)(Ee,{model:Ve.almacen,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:4}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Almacen",placeholder:"Selecione",value:null===Mt||void 0===Mt||null===(r=Mt.almacen)||void 0===r?void 0:r.nombre,readOnly:!0,width:4}),be?Object(p.jsx)(Ee,{model:Ve.forma_pago,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:3}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Condici\xf3n de Pago",placeholder:"Selecione",value:null===Mt||void 0===Mt?void 0:Mt.forma_pago.nombre,readOnly:!0,width:3}),be?Object(p.jsx)(ye,{name:"fecha_emision",title:"Fecha Emisi\xf3n",control:Lt,errors:Rt,type:"date",width:3}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Fecha de Emisi\xf3n",placeholder:"Selecione",value:null===Mt||void 0===Mt?void 0:Mt.fecha_emision,readOnly:!0,width:3}),be?Object(p.jsx)(ye,{name:"fecha_registro",title:"Fecha Registro",control:Lt,errors:Rt,type:"date",width:3}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Fecha de Registro",placeholder:"Selecione",value:null===Mt||void 0===Mt?void 0:Mt.fecha_emision,readOnly:!0,width:3}),be?Object(p.jsx)(Ee,{model:Ve.moneda,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:3}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Moneda",placeholder:"Selecione",value:null===Mt||void 0===Mt?void 0:Mt.moneda.nombre,readOnly:!0,width:3})]}),be&&Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(A.a.Field,{width:6,children:Object(p.jsx)(ze,{empresaContexto:Te,model:Ve.producto,setItemSelected:Ct,ref:$t})}),Object(p.jsx)(A.a.Field,{width:2,children:Object(p.jsx)(P.a,{fluid:!0,clearable:!0,options:St,onChange:function(e,t){var n,o=null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.find((function(e){return(null===t||void 0===t?void 0:t.value)===e.value}));Tt(o)},selection:!0})}),Object(p.jsx)(A.a.Field,{width:3,children:Object(p.jsx)(ue.a,{content:"Precio de Venta (Con IGV Incluido)",trigger:Object(p.jsx)(xe.a,{label:Dt.model.val_descuento?{tag:!0,content:(Dt.model.precio_venta-Dt.model.val_descuento).toFixed(2),color:"teal"}:{icon:"money"},labelPosition:Dt.model.val_descuento?"right":"right corner",type:"number",name:"precio_venta",value:Dt.model.precio_venta,onChange:Kt,placeholder:"Precio"})})}),Object(p.jsx)(A.a.Field,{width:2,children:Object(p.jsx)(ue.a,{content:"Cantidad de Items",trigger:Object(p.jsx)(xe.a,{label:{icon:"boxes"},labelPosition:"right corner",type:"number",name:"cantidad",value:Dt.model.cantidad,placeholder:"Cantidad",onChange:Kt})})}),Object(p.jsx)(A.a.Field,{width:2,children:Object(p.jsx)(ue.a,{content:"Descuento en ".concat(pt?"Porcentaje":"Efectivo"),trigger:Object(p.jsx)("div",{children:pt?Object(p.jsxs)(xe.a,{type:"number",name:"por_descuento",value:Dt.model.por_descuento,placeholder:"Descuento Porcentaje",onChange:function(e,t){var n=t.name,o=t.value,i={};i[n]=Number(o);var c=Object(k.a)(Object(k.a)({},Dt.model),i),a=Object(k.a)(Object(k.a)({},wt.model),c),r=Ht.descuentoPorcentaje(a),l=Dt;l.model=r,l.model=Object(k.a)(Object(k.a)({},l.model),i),Tt(Object(k.a)({},l))},onKeyDown:Jt,children:[Object(p.jsx)("input",{}),Object(p.jsx)(I.a,{icon:"percent",style:{marginLeft:"10px"},onClick:function(e){e.preventDefault(),Ot(!pt)}})]}):Object(p.jsxs)(xe.a,{type:"number",name:"val_descuento",value:Dt.model.val_descuento,placeholder:"Descuento Valor",onChange:function(e,t){var n=t.name,o=t.value,i={};i[n]=Number(o);var c=Object(k.a)(Object(k.a)({},Dt.model),i),a=Object(k.a)(Object(k.a)({},wt.model),c),r=Ht.descuentoEfectivo(a),l=Dt;l.model=r,l.model=Object(k.a)(Object(k.a)({},l.model),i),Tt(Object(k.a)({},l))},onKeyDown:Jt,children:[Object(p.jsx)("input",{}),Object(p.jsx)(I.a,{icon:"money",style:{marginLeft:"10px"},onClick:function(e){e.preventDefault(),Ot(!pt)}})]})})})}),Object(p.jsx)(A.a.Field,{width:1,children:Object(p.jsxs)(I.a,{as:"a",fluid:!0,color:"teal",animated:"vertical",onClick:Wt,disabled:et,children:[Object(p.jsx)(I.a.Content,{hidden:!0,children:"Agregar"}),Object(p.jsx)(I.a.Content,{visible:!0,children:Object(p.jsx)(N.a,{name:"arrow down"})})]})})]}),Object(p.jsxs)(C.a,{children:[Object(p.jsxs)(C.a.Column,{width:12,style:{overflowY:"scroll",height:"55vh"},children:[Object(p.jsxs)(ve.a,{compact:!0,definition:!0,striped:!0,children:[Object(p.jsx)(ve.a.Header,{fullWidth:!0,children:Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.HeaderCell,{width:1}),Object(p.jsx)(ve.a.HeaderCell,{width:8,children:"Producto \xf3 Servicio"}),Object(p.jsx)(ve.a.HeaderCell,{textAlign:"right",width:2,children:Object(p.jsx)("abbr",{title:"Precio de venta con IGV",children:null===Mt||void 0===Mt||null===(s=Mt.moneda)||void 0===s?void 0:s.simbolo})}),Object(p.jsx)(ve.a.HeaderCell,{textAlign:"right",width:2,children:Object(p.jsx)("abbr",{title:"Cantidad",children:"Cant"})}),Object(p.jsx)(ve.a.HeaderCell,{textAlign:"right",width:2,children:Object(p.jsx)("abbr",{title:"Descuento",children:"Desc"})}),Object(p.jsx)(ve.a.HeaderCell,{textAlign:"right",width:1})]})}),Object(p.jsx)(ve.a.Body,{children:null===Mt||void 0===Mt||null===(d=Mt.detalles)||void 0===d?void 0:d.map((function(e,t){return Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{collapsing:!0,children:Object(p.jsx)(fe.a,{slider:!0})}),Object(p.jsx)(ve.a.Cell,{children:e.producto.nombre}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:e.val_descuento?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("s",{children:e.precio_venta?Number(null===e||void 0===e?void 0:e.precio_venta).toFixed(3):(0).toFixed(3)}),Object(p.jsx)("span",{style:{marginLeft:"10px"},children:e.precio_venta?Number((null===e||void 0===e?void 0:e.precio_venta)-e.val_descuento).toFixed(3):(0).toFixed(3)})]}):e.precio_venta?Number(null===e||void 0===e?void 0:e.precio_venta).toFixed(3):(0).toFixed(3)}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:e.cantidad?Number(null===e||void 0===e?void 0:e.cantidad).toFixed(3):(0).toFixed(3)}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:e.val_descuento?Number(null===e||void 0===e?void 0:e.val_descuento).toFixed(3):(0).toFixed(3)}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:Object(p.jsx)(I.a,{circular:!0,as:"a",size:"mini",onClick:function(){!function(e){var t=Mt.detalles;t.splice(e,1),Et(t),zt("detalles",t),Ut(Mt.detalles,Mt.total_descuento_global)}(t)},disabled:!be,icon:"trash"})})]},t)}))})]}),Mt.is_nulled?Object(p.jsx)(X.a,{placeholder:!0,children:Object(p.jsxs)(K.a,{icon:!0,children:[Object(p.jsx)(N.a,{name:"ban"}),"Documento sin detalles."]})}):Object(p.jsx)(p.Fragment,{})]}),Object(p.jsxs)(C.a.Column,{floated:"right",width:4,children:[Object(p.jsx)(ve.a,{compact:"very",color:"black",children:Object(p.jsxs)(ve.a.Body,{children:[Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:"Peso "}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:["Kg ",null===Mt||void 0===Mt||null===(u=Mt.total_peso)||void 0===u?void 0:u.toFixed(3)]})})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:" Afecto "}),Object(p.jsxs)(ve.a.Cell,{textAlign:"right",children:[Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(b=Mt.moneda)||void 0===b?void 0:b.simbolo," ",null===Mt||void 0===Mt||null===(m=Mt.total_afecto)||void 0===m?void 0:m.toFixed(3)]})," "]})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:" Inafecto "}),Object(p.jsxs)(ve.a.Cell,{textAlign:"right",children:[Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(h=Mt.moneda)||void 0===h?void 0:h.simbolo," ",null===Mt||void 0===Mt||null===(O=Mt.total_inafecto)||void 0===O?void 0:O.toFixed(3)]})," "]})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:" ISC "}),Object(p.jsxs)(ve.a.Cell,{textAlign:"right",children:[Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(x=Mt.moneda)||void 0===x?void 0:x.simbolo," ",null===(v=Mt.total_isc)||void 0===v?void 0:v.toFixed(3)]})," "]})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:" IGV "}),Object(p.jsxs)(ve.a.Cell,{textAlign:"right",children:[Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(f=Mt.moneda)||void 0===f?void 0:f.simbolo," ",null===Mt||void 0===Mt||null===(g=Mt.total_igv)||void 0===g?void 0:g.toFixed(3)]})," "]})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:"Descuento Items"}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(w=Mt.moneda)||void 0===w?void 0:w.simbolo,null===Mt||void 0===Mt||null===(V=Mt.total_descuento_lineal)||void 0===V?void 0:V.toFixed(3)]})})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:"Descuento Global"}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(F=Mt.moneda)||void 0===F?void 0:F.simbolo," ",null===Mt||void 0===Mt||null===(D=Mt.total_descuento_global)||void 0===D?void 0:D.toFixed(3)]})})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:"Documento"}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(T=Mt.moneda)||void 0===T?void 0:T.simbolo," ",null===Mt||void 0===Mt||null===(q=Mt.total_documento)||void 0===q?void 0:q.toFixed(3)]})})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:" Percepci\xf3n "}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(E=Mt.moneda)||void 0===E?void 0:E.simbolo," ",null===Mt||void 0===Mt||null===(L=Mt.total_percepcion)||void 0===L?void 0:L.toFixed(3)]})})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:"Detracci\xf3n"}),Object(p.jsx)(ve.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(B=Mt.moneda)||void 0===B?void 0:B.simbolo," ",null===Mt||void 0===Mt||null===(M=Mt.total_detraccion)||void 0===M?void 0:M.toFixed(3)]})})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{active:!0,textAlign:"right",children:"Total"}),Object(p.jsx)(ve.a.Cell,{active:!0,textAlign:"right",children:Mt.is_free?Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(J=Mt.moneda)||void 0===J?void 0:J.simbolo," ",(0).toFixed(3)]}):Object(p.jsxs)("strong",{children:[null===Mt||void 0===Mt||null===(H=Mt.moneda)||void 0===H?void 0:H.simbolo," ",null===Mt||void 0===Mt||null===(U=Mt.total_documento_fin)||void 0===U?void 0:U.toFixed(3)]})})]})]})}),be&&Object(p.jsxs)("div",{children:[Object(p.jsx)(I.a,{loading:Le,disabled:Le,content:"Guardar",primary:!0,fluid:!0}),Object(p.jsx)(I.a,{style:{marginTop:"1vh"},fluid:!0,as:"a",content:"Deshacer Cambios",onClick:function(){Bt(de)}}),Object(p.jsx)(ge.a,{as:S.a,vertical:!0,fluid:!0,children:Object(p.jsxs)(S.a.Item,{children:[Object(p.jsx)(ge.a.Title,{active:!0===jt,content:"Mas Opciones",index:0,onClick:function(){bt(!jt)}}),Object(p.jsx)(ge.a.Content,{active:!0===jt,content:Object(p.jsxs)(A.a.Group,{grouped:!0,children:[Object(p.jsx)(A.a.Checkbox,{label:"Es gratuita",name:"is_free",checked:Mt.is_free,onChange:function(){zt("is_free",!Mt.is_free)}}),Object(p.jsx)(A.a.Field,{children:Object(p.jsx)(xe.a,{label:{content:"Desc"},labelPosition:"right",placeholder:"Descuento Global",type:"number",value:Mt.total_descuento_global,onChange:function(e,t){zt("total_descuento_global",e.target.value),Ut(Mt.detalles,e.target.value)}})})]})})]})})]})]})]}),(null===(W=Object.keys(Rt))||void 0===W?void 0:W.length)?Object(p.jsx)(Z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===Me||void 0===Me?void 0:Me.length)&&Object(p.jsx)(Z.a,{color:"red",header:"Verifique los siguientes campos",list:Me})]}),Object(p.jsx)(z.a,{open:Ke,content:"Seguro de Deshacer los cambios, perderas los datos modificados",onCancel:function(){return Xe(!1)},onConfirm:function(e){Bt(de)}}),3===Mt.tipo_operacion_id&&Object(p.jsxs)(X.a,{color:"teal",inverted:!0,style:{marginTop:"1vh"},children:[Object(p.jsxs)(A.a.Group,{children:[be?Object(p.jsx)(Ee,{model:null===Ve||void 0===Ve?void 0:Ve.motivos_sunat_guia_remision,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:4}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Motivo de la Guia de Remision",placeholder:"Selecione",value:null===Mt||void 0===Mt||null===(Q=Mt.motivos_sunat_guia_remision)||void 0===Q?void 0:Q.descripcion,readOnly:!0,width:4}),be?Object(p.jsx)(Ee,{model:null===Ve||void 0===Ve?void 0:Ve.transportista,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:6}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Transportista",placeholder:"Selecione",value:null===Mt||void 0===Mt||null===($=Mt.transportista)||void 0===$?void 0:$.nombre,readOnly:!0,width:6}),be?Object(p.jsx)(Ee,{model:null===Ve||void 0===Ve?void 0:Ve.vehiculo,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:6}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Veh\xedculo",placeholder:"Selecione",value:null===Mt||void 0===Mt||null===(ee=Mt.vehiculo)||void 0===ee?void 0:ee.descripcion,readOnly:!0,width:6})]}),Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(ye,{name:"direccion_partida",title:"Direccion de Partida",control:Lt,errors:Rt,type:"text",width:8,readOnly:!be}),be?Object(p.jsx)(Ee,{model:Ve.ubigeo_partida,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:8}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Ubigeo de Partida",placeholder:"Selecione",value:(null===Mt||void 0===Mt?void 0:Mt.ubigeo_partida)?(null===Mt||void 0===Mt||null===(te=Mt.ubigeo_partida)||void 0===te?void 0:te.provincia)+"-"+(null===Mt||void 0===Mt||null===(ne=Mt.ubigeo_partida)||void 0===ne?void 0:ne.distrito)+"-"+(null===Mt||void 0===Mt||null===(oe=Mt.ubigeo_partida)||void 0===oe?void 0:oe.departamento):"",readOnly:!0,width:8})]}),Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(ye,{name:"direccion_destino",title:"Direccion de Destino",control:Lt,errors:Rt,type:"text",width:8,readOnly:!be}),be?Object(p.jsx)(Ee,{model:Ve.ubigeo_destino,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:8}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Ubigeo de Destino",placeholder:"Selecione",value:(null===Mt||void 0===Mt?void 0:Mt.ubigeo_destino)?(null===Mt||void 0===Mt||null===(ie=Mt.ubigeo_destino)||void 0===ie?void 0:ie.provincia)+"-"+(null===Mt||void 0===Mt||null===(ce=Mt.ubigeo_destino)||void 0===ce?void 0:ce.distrito)+"-"+(null===Mt||void 0===Mt||null===(ae=Mt.ubigeo_destino)||void 0===ae?void 0:ae.departamento):"",readOnly:!0,width:8})]})]}),Object(p.jsxs)(X.a,{secondary:!0,children:[Object(p.jsxs)(ge.a,{exclusive:!1,fluid:!0,color:"teal",children:[Object(p.jsxs)(ge.a.Title,{active:2===lt,index:2,onClick:Nt,children:[Object(p.jsx)(N.a,{name:"dropdown"}),"Detalles de la venta"]}),Object(p.jsx)(ge.a.Content,{active:2===lt,children:Object(p.jsx)(he.a,{name:"detalle",control:Lt,render:function(e){var t=e.field,n=t.onChange,o=t.onBlur,i=t.value;return Object(p.jsx)(_e.a,{value:i,onBlur:o,onChange:n,placeholder:"Escribe un Comentario (sera agreagado en la impresi\xf3n del documento)",readOnly:!be})}})}),Object(p.jsxs)(ge.a.Title,{active:0===lt,index:0,onClick:Nt,children:[Object(p.jsx)(N.a,{name:"dropdown"}),"Documentos asociados"]}),Object(p.jsxs)(ge.a.Content,{active:0===lt,children:[be&&Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(Ee,{model:null===Ve||void 0===Ve?void 0:Ve.documento_relacion_search,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:10}),Object(p.jsx)(A.a.Field,{style:{marginTop:"24px"},children:Object(p.jsx)(I.a,{primary:!0,as:"a",onClick:function(){if(!Mt.documento_relacion_search&&!Mt.documento_relacion_search_id)return j.b.error("Seleccione un documento v\xe1lido"),!1;var e=Mt.documento_relacion||[],t={documento_relacion_id:Mt.documento_relacion_search.id,documento_relacion:Mt.documento_relacion_search};e.push(t),zt("documento_relacion",e),zt("documento_relacion_search",0),zt("documento_relacion_search_id",0)},children:"Agregar Documento"})})]}),!be&&Object(p.jsx)(I.a,{secondary:!0,as:"a",children:"Ver Historial"}),Object(p.jsxs)(ve.a,{compact:!0,collapsing:!0,children:[Object(p.jsx)(ve.a.Header,{children:Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.HeaderCell,{children:"Documento"}),Object(p.jsx)(ve.a.HeaderCell,{children:"Eliminar"})]})}),Object(p.jsx)(ve.a.Body,{children:!!Mt.documento_relacion&&(null===Mt||void 0===Mt?void 0:Mt.documento_relacion.map((function(e,t){return Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{children:null===e||void 0===e?void 0:e.documento_relacion.uniqueserie.split("-").splice(2).join("-")}),Object(p.jsx)(ve.a.Cell,{children:Object(p.jsx)(I.a,{circular:!0,as:"a",size:"mini",onClick:function(){!function(e){var t=Mt.documento_relacion;t.splice(e,1),zt("documento_relacion",t)}(t)},disabled:!be,icon:"trash"})})]})})))})]})]}),Object(p.jsxs)(ge.a.Title,{active:1===lt,index:1,onClick:Nt,children:[Object(p.jsx)(N.a,{name:"dropdown"}),"Vendedor"]}),Object(p.jsx)(ge.a.Content,{active:1===lt,children:Object(p.jsx)(A.a.Group,{children:be?Object(p.jsx)(Ee,{model:null===Ve||void 0===Ve?void 0:Ve.vendedor,empresaContexto:Te,control:Lt,venta:de,handleChangeVenta:je,setValue:zt,width:10}):Object(p.jsx)(A.a.Input,{fluid:!0,label:"Vendedor",placeholder:"Selecione",value:null===Mt||void 0===Mt||null===(re=Mt.vendedor)||void 0===re?void 0:re.nombre,readOnly:!0,width:10})})}),Object(p.jsxs)(ge.a.Title,{active:3===lt,index:3,onClick:Nt,children:[Object(p.jsx)(N.a,{name:"dropdown"}),"Informacion Relacionada"]}),Object(p.jsxs)(ge.a.Content,{active:3===lt,children:[Object(p.jsx)(A.a.Group,{children:Object(p.jsx)(ye,{name:"numero_expediente",title:"Numero de Expediente",control:Lt,errors:Rt,type:"text",width:10,readOnly:!be})}),Object(p.jsx)(A.a.Group,{children:Object(p.jsx)(ye,{name:"orden_compra",title:"Orden de Compra",control:Lt,errors:Rt,type:"text",width:10,readOnly:!be})}),Object(p.jsx)(A.a.Group,{children:Object(p.jsx)(ye,{name:"codigo_unidad_ejecutora",title:"C\xf3digo Unidad Ejecutora",control:Lt,errors:Rt,type:"text",width:10,readOnly:!be})}),Object(p.jsx)(A.a.Group,{children:Object(p.jsx)(ye,{name:"numero_proceso_seleccion",title:"N\xfamero de proceso de selecci\xf3n",control:Lt,errors:Rt,type:"text",width:10,readOnly:!be})}),Object(p.jsx)(A.a.Group,{children:Object(p.jsx)(ye,{name:"numero_contrato",title:"N\xfamero de Contrato",control:Lt,errors:Rt,type:"text",width:10,readOnly:!be})})]})]}),be&&Object(p.jsxs)("div",{style:{marginTop:"5vh"},children:[Object(p.jsx)(I.a,{loading:Le,disabled:Le,content:"Guardar",primary:!0}),Object(p.jsx)(I.a,{style:{marginTop:"1vh"},as:"a",content:"Deshacer Cambios",onClick:function(){Bt(de)}})]})]}),Object(p.jsx)(X.a,{style:{marginBottom:"20vh"},children:Object(p.jsx)(Oe.a,{value:"http://fivip.net/comprobante/".concat(Te.empresa.ruc,"/").concat(null===Mt||void 0===Mt||null===(le=Mt.serie)||void 0===le?void 0:le.id,"/").concat(null===Mt||void 0===Mt||null===(se=Mt.serie)||void 0===se?void 0:se.serie,"/").concat(null===Mt||void 0===Mt?void 0:Mt.correlativo)})})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ue.PDFViewer,{style:{width:"100%",height:"80vh"},children:Object(p.jsx)(We,{empresa:Te,status:Mt,qrCodeBase64:it})}),Object(p.jsxs)(I.a,{color:"teal",fluid:!0,onClick:function(){"create"===pe.from?(Ce({status:!1}),Xt()):Ce({status:!1})},children:[" ","Cerrar"]})]})})},Ke=n(215),Xe=n.n(Ke),Ze=function(e){var t=Xe()(e),n=Xe()(new Date);return!(t.diff(n)<-36e4)},$e=function(e){return Object(p.jsx)(ue.a,{content:"Actualizado recientemente",pinned:!0,trigger:Object(p.jsx)(oe.a,{circular:!0,color:"blue",empty:!0},e)})},et=function(){Object(y.h)();var e=Object(y.g)(),t=Object(o.useContext)(_),n=t.empresa,i=(t.setEmpresa,Object(o.useState)({current_page:0})),c=Object(l.a)(i,2),a=c[0],s=c[1],d=Object(o.useState)([]),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(o.useState)(null),h=Object(l.a)(m,2),O=h[0],x=h[1],v=Object(o.useState)(!1),f=Object(l.a)(v,2),g=f[0],w=f[1],S=Object(o.useState)(!1),V=Object(l.a)(S,2),F=V[0],D=V[1],A=Object(o.useState)({status:!1,format:"A4"}),L=Object(l.a)(A,2),z=L[0],B=L[1],M=function(){var e=Object(R.a)(G.a.mark((function e(){var t,o,i,c,r=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]&&r[0],t=n.empresa.id,o=n.id,e.next=5,Y.show(t,o,(null===a||void 0===a?void 0:a.current_page)+1);case 5:i=e.sent,s(i),c=j.concat(i.data),b(c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e){console.log(e);var t=j.map((function(t){return parseInt(t.id)===parseInt(e.id)?e:t}));b(t)},U=function(){var e=Object(R.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(null);case 2:return e.next=4,x(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e){Y.download(O,e)},Q=function(){var e=Object(R.a)(G.a.mark((function e(t,n){var o,i,c,a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=j.find((function(e,n){return e.id===t}))).send_status=!0,i=j.map((function(e,t){return e.id===o.id?o:e})),b(i),e.next=6,Y.sendSunat(o);case 6:c=e.sent,(a=Object(k.a)(Object(k.a)({},o),c)).send_status=!1,r=j.map((function(e,t){return e.id===a.id?a:e})),b(r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return M(),function(){b([])}}),[]),Object(o.useEffect)((function(){return B({status:!1,format:"A4"}),e.state=O,O||w(!1),setTimeout((function(){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector("canvas");D(null===t||void 0===t?void 0:t.toDataURL("image/jpg",.3))}),500),function(){}}),[O]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(C.a.Column,{width:5,children:[Object(p.jsx)(T.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(T.a.Item,{children:[Object(p.jsxs)(T.a.Content,{floated:"right",children:[Object(p.jsx)(q,{}),Object(p.jsx)(E,{empresaContext:n})]}),Object(p.jsxs)(T.a.Content,{children:[Object(p.jsx)(T.a.Header,{as:"a",children:Object(p.jsx)(r.b,{to:"/welcome/empresas/".concat(n.empresa.id),state:{backgroundLocation:e,model:n.empresa},children:n.empresa.nombre})}),n.nombre]})]})}),Object(p.jsx)(je.a,{dataLength:j.length,next:function(){M()},hasMore:!0,loader:Object(p.jsx)(T.a,{celled:!0,relaxed:"very",children:Array(12).fill(null).map((function(e,t){return Object(p.jsx)(T.a.Item,{children:Object(p.jsx)("div",{class:"ui placeholder",children:Object(p.jsxs)("div",{class:"paragraph",children:[Object(p.jsx)("div",{class:"line"}),Object(p.jsx)("div",{class:"line"}),Object(p.jsx)("div",{class:"line"})]})})},t)}))}),height:790,endMessage:Object(p.jsx)("p",{style:{textAlign:"center"},children:Object(p.jsx)("b",{children:"Yay! You have seen it all"})}),children:Object(p.jsx)(T.a,{celled:!0,relaxed:"very",children:null===j||void 0===j?void 0:j.map((function(e,t){var n,o,i,c;return Object(p.jsxs)(T.a.Item,{onClick:function(){U(e)},style:{backgroundColor:(null===e||void 0===e?void 0:e.id)===(null===O||void 0===O?void 0:O.id)?"#00b5ad":"#fff"},children:[Object(p.jsxs)(T.a.Content,{style:{width:"135px"},floated:"right",children:[Object(p.jsx)(oe.a.Group,{tag:!0,children:Object(p.jsxs)(oe.a,{as:"a",children:[null===e||void 0===e||null===(n=e.moneda)||void 0===n?void 0:n.simbolo," ",e.total_documento_fin.toFixed(3)]})}),Object(p.jsx)(ue.a,{content:"Click para enviar comprobante a Sunat",header:"Pendiente por enviar",trigger:Object(p.jsx)(I.a,{icon:"0"===e.sunat_code?"check":e.sunat_code>="2000"?"times":"cloud upload",size:"mini",onClick:function(n){n.stopPropagation(),Q(e.id,t)},color:"0"===e.sunat_code?"green":e.sunat_code>="2000"?"red":"success",loading:e.send_status,disabled:e.send_status||"0"===e.sunat_code})},t),(null===e||void 0===e?void 0:e.is_nulled)?Object(p.jsx)(oe.a,{as:"span",content:"Anulado",color:"red"}):Object(p.jsx)(p.Fragment,{children:" \xa0"})]}),Object(p.jsxs)(T.a.Content,{children:[Object(p.jsxs)(T.a.Header,{as:"a",children:[null===e||void 0===e||null===(o=e.serie)||void 0===o?void 0:o.abbr," ",null===e||void 0===e||null===(i=e.serie)||void 0===i?void 0:i.serie," ",null===e||void 0===e?void 0:e.correlativo," ",Ze(e.updated_at)&&Object(p.jsx)($e,{index:t})]}),Object(p.jsx)(T.a.Item,{children:Object(p.jsx)("strong",{children:null===e||void 0===e||null===(c=e.cliente)||void 0===c?void 0:c.nombre})}),Object(p.jsxs)(T.a.Item,{children:["Fecha Emision:"," ",Object(p.jsx)(me.a,{format:"DD/MM/YYYY hh:mm",children:e.fecha_emision})]})]})]},t)}))})})]}),Object(p.jsx)(C.a.Column,{width:10,children:O?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsx)(T.a.Item,{children:Object(p.jsxs)(T.a.Content,{floated:"right",children:[Object(p.jsx)(P.a,{text:"Descargar",icon:"download",floating:!0,labeled:!0,button:!0,className:"button ui mini icon",children:Object(p.jsxs)(P.a.Menu,{children:[O.sunat_documento&&Object(p.jsx)(P.a.Item,{onClick:function(){W("xml")},children:"Descargar XML"}),Object(p.jsx)(P.a.Item,{children:Object(p.jsx)(Ue.PDFDownloadLink,{style:{color:"#000000DE"},document:Object(p.jsx)(We,{empresa:n,status:O,qrCodeBase64:F}),fileName:"".concat(O.sunat_documento,".pdf"),children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Cargando documento...":"Descargar PDF"}})}),O.sunat_notes&&Object(p.jsx)(P.a.Item,{onClick:function(){W("cdn")},children:"Descargar CDN"})]})}),Object(p.jsx)(I.a,{size:"mini",content:"Imprimir",icon:"print",labelPosition:"left",style:{marginRight:"2px",marginLeft:"2px"},onClick:function(){var e;e=!z.status,B({status:e,format:"A4"})},active:z.status}),O.is_nulled?Object(p.jsx)(p.Fragment,{}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I.a,{size:"mini",content:"Editar",icon:"pencil",labelPosition:"left",style:{marginRight:"2px",marginLeft:"2px"},active:g,onClick:function(){w(!g)}}),Object(p.jsx)(I.a,{size:"mini",content:"Enviar",icon:"envelope",labelPosition:"left",style:{marginRight:"2px",marginLeft:"2px"}}),Object(p.jsx)(J,{handleChangeVenta:H,documento:O,style:{marginRight:"2px",marginLeft:"2px"}})]})]})})}),Object(p.jsx)(I.a,{circular:!0,size:"mini",icon:!0,onClick:function(){x(null)},children:Object(p.jsx)(N.a,{name:"times"})}),Object(p.jsx)(r.b,{to:"/space/ventas/1",state:{model:O},children:Object(p.jsx)(I.a,{circular:!0,size:"mini",icon:!0,children:Object(p.jsx)(N.a,{name:"expand"})})}),O.is_nulled?Object(p.jsx)(oe.a,{as:"span",content:"Anulado",icon:"ban",color:"red"}):Object(p.jsx)(p.Fragment,{children:"Otros Estatus [type: array] "}),Object(p.jsx)(Qe,{selected:O,handleChangeVenta:H,editionMode:g,formatPrint:z,setFormatPrint:B})]}):Object(p.jsx)(X.a,{placeholder:!0,style:{marginTop:"6vh"},children:Object(p.jsxs)(K.a,{icon:!0,children:[Object(p.jsx)(N.a,{name:"file outline"}),"No tienes un documento seleccionado"]})})})]})};n(175);var tt=function(e){var t=e.type,n=e.name,c=e.icon,a=e.title,r=e.value,l=e.color,s=e.service,d=e.setValue,u=e.isContextEmpresa,j=Object(o.useContext)(_),b=j.empresa,m=j.setEmpresa,h=i.a.createRef(),O=function(){var e=Object(R.a)(G.a.mark((function e(t){var o,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.target.files[0],e.next=3,s(b.empresa.id,o);case 3:i=e.sent,d(n,i.success),b.empresa.certificado=i.success,"certificado"===n&&d("certificado_validate",0),"logo"===n&&d("logo",i.success),u&&m(b),console.log(b);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:["imagen"===t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("label",{children:a}),Object(p.jsxs)(oe.a,{as:"a",onClick:function(e){e.preventDefault(),h.current.click()},children:[Object(p.jsx)("img",{src:"".concat("http://192.168.2.3:8000","/storage/").concat(b.empresa.id,"/").concat(r),alt:"logo_empresa"})," ",r]})]}),"file"===t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("label",{children:a}),Object(p.jsx)(I.a,{as:"a",color:l,fluid:!0,content:r||"Certificado",labelPosition:"left",icon:c||"file",onClick:function(e){e.preventDefault(),h.current.click()}})]}),Object(p.jsx)("input",{ref:h,hidden:!0,type:"file",onChange:O})]})},nt=ke.a({ruc:ke.b().required("Complete"),nombre:ke.b().required("Complete"),nombre_comercial:ke.b().required("Complete").min(2,"Minimo 2 letras").max(50,"Max 50 Letras"),direccion:ke.b().required("Complete"),ubigeo_id:ke.b().required("Complete"),telefono:ke.b().required("Complete"),celular:ke.b().required("Complete"),email:ke.b().email().required("Complete"),decimales:ke.b().required("Complete"),por_detraccion:ke.b().required("Complete"),por_retencion:ke.b().required("Complete"),igv:ke.b().required("Complete"),agente:ke.b().required("Complete"),por_percepcion:ke.b().required("Complete"),limite_detraccion:ke.b().required("Complete"),country_id:ke.b().required("Complete")}).required(),ot=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=a.empresa,s=a.setEmpresa,d=Object(o.useState)(!1),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(o.useState)(!1),h=Object(l.a)(m,2),O=h[0],x=h[1],v=Object(o.useState)(!1),f=Object(l.a)(v,2),g=f[0],w=f[1],C=Object(he.e)({resolver:Object(we.a)(nt),defaultValues:n}),k=C.control,S=C.handleSubmit,P=C.setValue,V=C.formState.errors,F=(0,C.watch)(),D=Object(o.useState)(),T=Object(l.a)(D,2),q=T[0],E=T[1];Object(o.useEffect)(Object(R.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,ce.find(n.id);case 3:return t=e.sent,e.abrupt("return",E(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:q});var N=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),n=F.certificado_clave,e.next=5,ce.unlockCertificado(r.empresa.id,n);case 5:o=e.sent,P("certificado_validate",o.status),w(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){i(c.state.backgroundLocation.pathname,{state:{reload:{empresa:!0}}})},z=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!t||!t.id){e.next=8;break}return e.next=4,ce.update(t,t.id);case 4:n=e.sent,r.empresa.id===n.id?(r.empresa=n,window.localStorage.removeItem("empresa"),window.localStorage.setItem("empresa",JSON.stringify(r)),s(r),b(!1),L()):L(),e.next=14;break;case 8:return e.next=10,ce.create(t);case 10:return o=e.sent,b(!1),(null===o||void 0===o?void 0:o.errors)?x(Pe(o)):(x(null),L()),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(A.a,{onSubmit:S(z),noValidate:!0,children:[Object(p.jsxs)(A.a.Group,{widths:1,children:[Object(p.jsx)(ye,{name:"ruc",title:"Ruc",control:k,errors:V,width:8}),Object(p.jsx)(A.a.Field,{children:Object(p.jsx)(tt,{type:"imagen",name:"logo",title:"Logo de la Empresa",value:F.logo,service:ce.updateLogo,setValue:P,isContextEmpresa:!0})})]}),Object(p.jsxs)(A.a.Group,{widths:2,children:[Object(p.jsx)(ye,{name:"nombre",title:"Nombre",control:k,errors:V,width:8}),Object(p.jsx)(ye,{name:"nombre_comercial",title:"Nombre Comercial",control:k,errors:V,width:8})]}),Object(p.jsxs)(A.a.Group,{widths:4,children:[Object(p.jsx)(ye,{name:"direccion",title:"Direccion",control:k,errors:V,width:8}),Object(p.jsx)(Ee,{model:Ve.ubigeo,empresaContexto:r,control:k,venta:F,setValue:P,width:8})]}),Object(p.jsxs)(A.a.Group,{widths:4,children:[Object(p.jsx)(ye,{name:"telefono",title:"Telefono Fijo",control:k,errors:V,width:4}),Object(p.jsx)(ye,{name:"celular",title:"Telefono Celular",control:k,errors:V,width:4}),Object(p.jsx)(ye,{name:"email",title:"Email",control:k,errors:V,width:4}),Object(p.jsx)(ye,{name:"decimales",title:"Decimales",control:k,errors:V,width:4})]}),Object(p.jsx)(ie.a,{}),Object(p.jsxs)(A.a.Group,{widths:5,children:[Object(p.jsx)(A.a.Field,{width:6,children:Object(p.jsx)(tt,{type:"file",icon:"expeditedssl",name:"certificado",title:"Certificado Digital",value:F.certificado,color:0===F.certificado_validate?"secundary":1===F.certificado_validate?"red":2===F.certificado_validate?"green":"secundary",service:ce.updateCertificado,empresaContexto:r,setValue:P,isContextEmpresa:!0})}),Object(p.jsx)(ye,{name:"certificado_clave",title:"Contrase\xf1a del Certificado Digital",control:k,errors:V,width:6,type:"password"}),Object(p.jsxs)(A.a.Field,{children:[Object(p.jsx)("label",{children:"\xa0"}),Object(p.jsx)(I.a,{fluid:!0,content:"Validar Certificado",onClick:N,loading:g})]})]}),Object(p.jsxs)(A.a.Group,{widths:5,children:[Object(p.jsx)(ye,{name:"usuario_sunat",title:"Usuario Sunat",control:k,errors:V,width:6}),Object(p.jsx)(ye,{name:"usuario_sunat_clave",title:"Clave de Usuario Sunat",control:k,errors:V,width:6}),Object(p.jsx)(ye,{name:"country_id",title:"Pais",control:k,errors:V,width:4})]}),Object(p.jsx)(ie.a,{}),Object(p.jsxs)(A.a.Group,{widths:5,children:[Object(p.jsx)(ye,{name:"igv",title:"IGV",control:k,errors:V,width:3}),Object(p.jsx)(ye,{name:"agente",title:"Agente",control:k,errors:V,width:3}),Object(p.jsx)(ye,{name:"por_percepcion",title:"% Percepci\xf3n",control:k,errors:V,width:3}),Object(p.jsx)(ye,{name:"por_retencion",title:"% Retencion",control:k,errors:V,width:3})]}),Object(p.jsx)(ie.a,{}),Object(p.jsxs)(A.a.Group,{widths:16,children:[Object(p.jsx)(ye,{name:"por_detraccion",title:"% Detracci\xf3n",control:k,errors:V,width:3}),Object(p.jsx)(ye,{name:"limite_detraccion",title:"Limite Detracci\xf3n",control:k,errors:V,width:3}),Object(p.jsx)(ye,{name:"cuenta_detraccion",title:"Cuenta Detracci\xf3n",control:k,errors:V,width:5})]}),Object(p.jsx)(A.a.Group,{widths:16,children:Object(p.jsx)(A.a.Field,{width:16,children:Object(p.jsx)(he.a,{name:"detalle",control:k,render:function(e){var t=e.field,n=t.onChange,o=t.onBlur,i=t.value;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("label",{children:"Comentario de Pie de P\xe1gina"}),Object(p.jsx)(_e.a,{rows:12,value:i,onBlur:o,onChange:n,placeholder:"Comentarios de pie de pagina de las impresiones del modulo de ventas"})]})}})})}),(null===(t=Object.keys(V))||void 0===t?void 0:t.length)?Object(p.jsx)(Z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===O||void 0===O?void 0:O.length)&&Object(p.jsx)(Z.a,{color:"red",header:"Verifique los siguientes campos",list:O}),Object(p.jsx)(I.a,{loading:j,secondary:!0,children:"Guardar"})]})},it=ke.a({nombre:ke.b().required("Complete"),direccion:ke.b().required("Complete"),ubigeo_id:ke.b().required("Complete"),empresa_id:ke.b().required("Complete")}).required(),ct=function(e){var t,n=e.state;console.log(n);var i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=(a.empresa,a.setEmpresa),s=Object(o.useState)(!1),d=Object(l.a)(s,2),u=d[0],j=d[1],b=Object(o.useState)(!1),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(he.e)({resolver:Object(we.a)(it),defaultValues:n}),v=x.control,f=x.handleSubmit,g=x.formState.errors,w=Object(o.useState)(),C=Object(l.a)(w,2),k=C[0],S=C[1];Object(o.useEffect)(Object(R.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,ae.find(n.id);case 3:return t=e.sent,e.abrupt("return",S(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:k});var P=function(){i(c.state.backgroundLocation.pathname,{state:{reload:{empresa:!0}}})},V=function(){var e=Object(R.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),!t||!t.id){e.next=10;break}return e.next=4,ae.update(t,t.id);case 4:e.sent,localStorage.removeItem("empresa"),r(null),P(),e.next=16;break;case 10:return e.next=12,ae.create(t);case 12:return n=e.sent,j(!1),(null===n||void 0===n?void 0:n.errors)?O(Pe(n)):(O(null),P()),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(A.a,{onSubmit:f(V),noValidate:!0,children:[Object(p.jsx)(ye,{name:"nombre",title:"Nombre",control:v,errors:g}),Object(p.jsxs)(A.a.Group,{widths:2,children:[Object(p.jsx)(ye,{name:"direccion",title:"Direccion",control:v,errors:g}),Object(p.jsx)(ye,{name:"ubigeo_id",title:"Ubigeo",control:v,errors:g})]}),(null===(t=Object.keys(g))||void 0===t?void 0:t.length)?Object(p.jsx)(Z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===h||void 0===h?void 0:h.length)&&Object(p.jsx)(Z.a,{color:"red",header:"Verifique los siguientes campos",list:h}),Object(p.jsx)(I.a,{loading:u,secondary:!0,children:"Guardar"}),Object(p.jsx)("a",{onClick:P,children:"asd"})]})};var at={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{order:{id:"DESC"}},n=De.a.stringify(t);return console.log(n),new Promise((function(t,o){m.get("/cliente/".concat(e,"?").concat(n)).then((function(e){t(e.data)}),(function(e){o(new Error("bad request"))}))}))},find:function(e,t){return new Promise((function(n,o){m.get("cliente/"+e+"/"+t).then((function(e){n(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("cliente",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("cliente/"+t,e).then((function(e){n(e.data)}))}))},getDni:function(e){return new Promise((function(t,n){d.a.post("https://api.nubefa.com/api/dni",e).then((function(e){t(e)}),(function(e){n(e)}))}))},getRuc:function(e){return new Promise((function(t,n){d.a.post("https://api.nubefa.com/api/ruc",e).then((function(e){t(e)}),(function(e){n(e)}))}))}},rt=ke.a({tipo_documento_identy_id:ke.b().required("Complete"),numero_documento:ke.b().required("Complete"),nombre:ke.b().required("Complete"),nombre_comercial:ke.b().required("Complete").min(2,"Minimo 2 letras").max(50,"Max 50 Letras"),direccion:ke.b().required("Complete"),ubigeo_id:ke.b().required("Complete"),empresa_id:ke.b().required("Complete")}).required(),lt=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_).empresa,r=Object(o.useState)(!1),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],O=Object(o.useState)(!1),x=Object(l.a)(O,2),v=x[0],f=x[1],g=Object(o.useState)(!1),w=Object(l.a)(g,2),C=w[0],k=w[1],S=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{cliente_id:e}}})},P=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),!t||!t.id){e.next=8;break}return e.next=4,at.update(t,t.id);case 4:(null===(n=e.sent)||void 0===n?void 0:n.errors)?k(Pe(n)):(console.log("debugger"),k(null),S(n)),e.next=14;break;case 8:return e.next=10,at.create(t);case 10:return o=e.sent,u(!1),(null===o||void 0===o?void 0:o.errors)?k(Pe(o)):(k(null),S(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(he.e)({resolver:Object(we.a)(rt),defaultValues:n}),F=V.control,D=V.handleSubmit,T=V.formState.errors,q=V.setValue,E=V.watch,N=V.reset,L=E(),z=function(){var e=Object(R.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),3===(null===L||void 0===L?void 0:L.tipo_documento_identy_id)&&at.getDni({data:L.numero_documento}).then((function(e){return q("nombre",e.data.ane_alias),q("nombre_comercial",e.data.ane_alias),f(!0),h(!1),!0}),(function(e){return h(!1),!0})),4===(null===L||void 0===L?void 0:L.tipo_documento_identy_id)&&at.getRuc({data:L.numero_documento}).then((function(e){return q("nombre",e.data.razonSocial),q("nombre_comercial",e.data.razonSocial),q("direccion",e.data.direccion),q("ubigeo_id",parseInt(e.data.ubi_id)),q("ubigeo",{id:e.data.ubi_id,provincia:e.data.provincia,distrito:e.data.distrito,departamento:e.data.departamento}),f(!0),h(!1),!0}),(function(e){return h(!1),!0}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(A.a,{onSubmit:D(P),noValidate:!0,children:[Object(p.jsx)(A.a.Group,{children:Object(p.jsx)(Ee,{model:Ve.tipo_documento_identy,empresaContexto:a,control:F,setValue:q,width:7})}),Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(ye,{name:"numero_documento",title:"Numero de Documento",control:F,errors:T,width:7}),4===L.tipo_documento_identy_id||3===L.tipo_documento_identy_id?Object(p.jsx)(A.a.Field,{children:Object(p.jsx)(I.a,{primary:!0,style:{marginTop:"22px"},onClick:function(e){e.preventDefault(),z()},loading:m,children:"Buscar en Sunat"})}):Object(p.jsx)(p.Fragment,{})]}),Object(p.jsxs)(A.a.Group,{widths:2,children:[Object(p.jsx)(ye,{name:"nombre",title:"Nombre",control:F,errors:T,width:7}),Object(p.jsx)(ye,{name:"nombre_comercial",title:"Nombre Comercial",control:F,errors:T,width:8})]}),Object(p.jsx)(A.a.Group,{widths:2,children:Object(p.jsx)(ye,{name:"direccion",title:"Direccion",control:F,errors:T,width:15})}),Object(p.jsx)(A.a.Group,{children:v?Object(p.jsx)(A.a.Field,{width:5,control:xe.a,label:"Ubigeo",value:"".concat(L.ubigeo.provincia," ").concat(L.ubigeo.distrito," ").concat(L.ubigeo.departamento),placeholder:"Ubigeo",type:"text",readOnly:!0}):Object(p.jsx)(Ee,{model:Ve.ubigeo,empresaContexto:a,control:F,setValue:q,venta:L})}),Object(p.jsxs)(A.a.Group,{widths:3,children:[Object(p.jsx)(ye,{name:"telefono",title:"Telefono Fijo",control:F,errors:T,width:5}),Object(p.jsx)(ye,{name:"celular",title:"Telefono Celular",control:F,errors:T,width:5}),Object(p.jsx)(ye,{name:"email",title:"Email",control:F,errors:T,width:5})]}),(null===(t=Object.keys(T))||void 0===t?void 0:t.length)?Object(p.jsx)(Z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===C||void 0===C?void 0:C.length)&&Object(p.jsx)(Z.a,{color:"red",header:"Verifique los siguientes campos",list:C}),Object(p.jsx)(I.a,{disabled:d,loading:d,primary:!0,children:"Guardar"}),Object(p.jsx)(I.a,{style:{marginTop:"1vh"},as:"a",content:"Deshacer Cambios",onClick:function(){N(n)}})]})};var st={show:function(){return new Promise((function(e,t){m.get("/moneda").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("moneda/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("moneda",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){var n=e.empresa_id;return new Promise((function(o,i){m.put("moneda/"+n+"/"+t,e).then((function(e){o(e.data)}))}))}},dt=ke.a({nombre:ke.b().required("Complete"),iso:ke.b().required("Complete"),simbolo:ke.b().required("Complete"),sunat_codigo:ke.b().required("Complete"),dolar:ke.b().required("Complete"),empresa_id:ke.b().required("Complete")}).required(),ut=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=(a.empresa,a.setEmpresa,Object(o.useState)(!1)),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],O=Object(he.e)({resolver:Object(we.a)(dt),defaultValues:n}),x=O.control,v=O.handleSubmit,f=O.formState.errors,g=O.reset,w=Object(o.useState)(),C=Object(l.a)(w,2),k=C[0],S=C[1];Object(o.useEffect)(Object(R.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,st.find(n.id);case 3:return t=e.sent,e.abrupt("return",S(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:k});var P=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{moneda_id:e}}})},V=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),u(!0),!t||!t.id){e.next=9;break}return e.next=5,st.update(t,t.id);case 5:n=e.sent,P(n),e.next=15;break;case 9:return e.next=11,st.create(t);case 11:return o=e.sent,u(!1),(null===o||void 0===o?void 0:o.errors)?h(Pe(o)):(h(null),P(o)),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(A.a,{onSubmit:v(V),noValidate:!0,children:[Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(ye,{name:"nombre",title:"Nombre",control:x,errors:f,width:4}),Object(p.jsx)(ye,{name:"iso",title:"ISO",control:x,errors:f,width:3}),Object(p.jsx)(ye,{name:"simbolo",title:"Simbolo",control:x,errors:f,width:3}),Object(p.jsx)(ye,{name:"sunat_codigo",title:"Codigo Sunat",control:x,errors:f,width:3}),Object(p.jsx)(ye,{name:"dolar",title:"Dolar",control:x,errors:f,width:3})]}),(null===(t=Object.keys(f))||void 0===t?void 0:t.length)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}),Object(p.jsx)(X.a,{children:JSON.stringify(f,null,2)})]}):Object(p.jsx)(p.Fragment,{}),(null===m||void 0===m?void 0:m.length)&&Object(p.jsx)(Z.a,{color:"red",header:"Verifique los siguientes campos",list:m}),Object(p.jsx)(I.a,{loading:d,disabled:d,content:"Guardar",primary:!0}),Object(p.jsx)(I.a,{as:"a",content:"Deshacer Cambios",secondary:!0,onClick:function(){g(n)}})]})};var jt={show:function(){return new Promise((function(e,t){m.get("/vehiculo").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("vehiculo/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("vehiculo",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){var n=e.empresa_id;return new Promise((function(o,i){m.put("vehiculo/"+n+"/"+t,e).then((function(e){o(e.data)}))}))}},bt=ke.a({descripcion:ke.b().required("Complete"),placa:ke.b().required("Complete"),marca:ke.b().required("Complete"),empresa_id:ke.b().required("Complete")}).required(),mt=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=(a.empresa,a.setEmpresa,Object(o.useState)(!1)),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],O=Object(he.e)({resolver:Object(we.a)(bt),defaultValues:n}),x=O.control,v=O.handleSubmit,f=O.formState.errors,g=O.reset,w=Object(o.useState)(),C=Object(l.a)(w,2),k=C[0],S=C[1];Object(o.useEffect)(Object(R.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,jt.find(n.id);case 3:return t=e.sent,e.abrupt("return",S(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:k});var P=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{moneda_id:e}}})},V=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),u(!0),!t||!t.id){e.next=9;break}return e.next=5,jt.update(t,t.id);case 5:n=e.sent,P(n),e.next=15;break;case 9:return e.next=11,jt.create(t);case 11:return o=e.sent,u(!1),(null===o||void 0===o?void 0:o.errors)?h(Pe(o)):(h(null),P(o)),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(A.a,{onSubmit:v(V),noValidate:!0,children:[Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(ye,{name:"descripcion",title:"Descripci\xf3n",control:x,errors:f,width:4}),Object(p.jsx)(ye,{name:"placa",title:"Placa",control:x,errors:f,width:3}),Object(p.jsx)(ye,{name:"marca",title:"Marca",control:x,errors:f,width:3})]}),(null===(t=Object.keys(f))||void 0===t?void 0:t.length)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}),Object(p.jsx)(X.a,{children:JSON.stringify(f,null,2)})]}):Object(p.jsx)(p.Fragment,{}),(null===m||void 0===m?void 0:m.length)&&Object(p.jsx)(Z.a,{color:"red",header:"Verifique los siguientes campos",list:m}),Object(p.jsx)(I.a,{loading:d,disabled:d,content:"Guardar",primary:!0}),Object(p.jsx)(I.a,{as:"a",content:"Deshacer Cambios",secondary:!0,onClick:function(){g(n)}})]})},ht=ke.a({nombre:ke.b().required("Complete")}).required(),pt=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=a.empresa,s=(a.setEmpresa,Object(o.useState)(!1)),d=Object(l.a)(s,2),u=d[0],j=d[1],b=Object(o.useState)(!1),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(he.e)({resolver:Object(we.a)(ht),defaultValues:n}),v=x.control,f=x.handleSubmit,g=x.watch,w=x.setValue,C=x.formState.errors,k=Object(o.useState)(),S=Object(l.a)(k,2),P=S[0],V=S[1],F=g();Object(o.useEffect)((function(){Object(R.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,Ae.find(n.id);case 3:return t=e.sent,e.abrupt("return",V(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))()}),{data:P});var D=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{producto_id:e}}})},T=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),!t||!t.id){e.next=8;break}return e.next=4,Ae.update(t,t.id);case 4:n=e.sent,D(n),e.next=14;break;case 8:return e.next=10,Ae.create(t);case 10:return o=e.sent,j(!1),(null===o||void 0===o?void 0:o.errors)?O(Pe(o)):(O(null),D(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(A.a,{onSubmit:f(T),noValidate:!0,children:[Object(p.jsx)(Ee,{autoFocus:!0,model:Ve.tipo_producto,empresaContexto:r,control:v,venta:F,setValue:w,width:8}),Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(ye,{name:"nombre",title:"Descripci\xf3n",control:v,errors:C,width:8}),Object(p.jsx)(ye,{name:"codigo",title:"C\xf3digo",control:v,errors:C,width:4}),Object(p.jsx)(ye,{name:"codigo_barras",title:"C\xf3digo de Barras",control:v,errors:C,width:4})]}),Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(Ee,{model:Ve.presentacion,empresaContexto:r,control:v,venta:F,setValue:w,width:8}),Object(p.jsx)(ye,{name:"peso",title:"Peso KG",control:v,errors:C,width:4,type:"number"})]}),Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(ye,{name:"precio_compra",title:"Costo de Compra (SIN IGV)",control:v,errors:C,width:4,type:"number"}),Object(p.jsx)(ye,{name:"por_detraccion",title:"% Detracci\xf3n",control:v,errors:C,width:4,type:"number"}),Object(p.jsx)(ye,{name:"por_isc",title:"% ISC",control:v,errors:C,width:4,type:"number"}),Object(p.jsxs)(A.a.Field,{children:[Object(p.jsx)("label",{children:" \xa0"}),Object(p.jsx)(fe.a,{label:"Afecto",checked:F.afecto,onChange:function(){w("afecto",!F.afecto)}})]})]}),Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(Ee,{model:Ve.categoria,empresaContexto:r,control:v,venta:F,setValue:w,width:8}),Object(p.jsx)(Ee,{model:Ve.subcategoria,empresaContexto:r,control:v,venta:F,setValue:w,width:8})]}),Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(Ee,{model:Ve.marca,empresaContexto:r,control:v,venta:F,setValue:w,width:8}),Object(p.jsx)(Ee,{model:Ve.linea,empresaContexto:r,control:v,venta:F,setValue:w,width:8})]}),(null===(t=Object.keys(C))||void 0===t?void 0:t.length)?Object(p.jsx)(Z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===h||void 0===h?void 0:h.length)&&Object(p.jsx)(Z.a,{color:"red",header:"Verifique los siguientes campos",list:h}),Object(p.jsx)(I.a,{loading:u,secondary:!0,children:"Guardar"})]})},Ot=function(){var e=Object(o.useContext)(_).empresa;return Object(p.jsx)(p.Fragment,{children:e?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(F,{}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(C.a.Row,{children:[Object(p.jsx)(C.a.Column,{width:1,children:Object(p.jsx)(D,{fluid:!0})}),Object(p.jsx)(C.a.Column,{width:15,style:{marginTop:"1rem",overflowY:"scroll",height:"93vh"},children:Object(p.jsx)(y.b,{})})]})})]}):Object(p.jsx)(y.a,{to:"/welcome/empresas"})})},xt=n(956),vt=n(444),ft=n(952),gt=function(e){return{filter:e.filter,limit:e.limit,order:e.order,page:e.page}},_t=function(e){for(var t=[],n=Object.keys(e),o=0;o<n.length;o++){var i=n[o];e[i]&&"object"!=typeof e[i]&&t.push([i,"like","%".concat(e[i],"%")])}return t},wt=function(e,t,n){var i=Object(o.useContext)(_).empresa,c=Object(he.e)({resolver:Object(we.a)(rt),defaultValues:n}),a=c.control,r=c.formState.errors,l=c.setValue,s=(0,c.watch)();return Object(p.jsxs)(A.a,{onSubmit:function(t){var n=_t(s);e.setQuery(Object(k.a)(Object(k.a)({},e.query),{filter:n}))},children:[Object(p.jsx)(Ee,{model:Ve.tipo_documento_identy,empresaContexto:i,control:a,setValue:l,width:16}),Object(p.jsx)(ye,{name:"numero_documento",title:"Numero de Documento",control:a,errors:r,width:16}),Object(p.jsx)(ye,{name:"nombre",title:"Nombre",control:a,errors:r,width:16}),Object(p.jsx)(ye,{name:"nombre_comercial",title:"Nombre Comercial",control:a,errors:r,width:16}),Object(p.jsx)(ye,{name:"direccion",title:"Direccion",control:a,errors:r,width:16}),Object(p.jsx)(Ee,{model:Ve.ubigeo,empresaContexto:i,control:a,setValue:l,width:16}),Object(p.jsx)(ye,{name:"telefono",title:"Telefono Fijo",control:a,errors:r,width:16}),Object(p.jsx)(ye,{name:"celular",title:"Telefono Celular",control:a,errors:r,width:16}),Object(p.jsx)(ye,{name:"email",title:"Email",control:a,errors:r,width:16}),Object(p.jsx)(A.a.Button,{content:"Submit"})]})},Ct=function(e){var t=e.state,n=e.resolve,i=Object(o.useState)({}),c=Object(l.a)(i,2),a=c[0],r=c[1];return Object(o.useEffect)((function(){r(n(t))}),[]),Object(p.jsx)(xt.a,{children:Object(p.jsxs)(xt.a.Content,{children:[Object(p.jsx)(xt.a.Header,{content:null===a||void 0===a?void 0:a.title}),Object(p.jsx)(xt.a.Meta,{content:null===a||void 0===a?void 0:a.mensaje}),a.detalles&&Object.keys(a.detalles).map((function(e,t){return Object(p.jsx)(xt.a.Description,{content:"Total: ".concat(a.detalles[e].simbolo," ").concat(a.detalles[e].total)})}))]})})},yt=function(){var e,t,n,i,c=Object(y.h)(),a=Object(y.g)(),s=Object(o.useContext)(_).empresa,d=Object(o.useState)(!1),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(o.useState)(null),h=Object(l.a)(m,2),O=h[0],x=h[1],v=Object(o.useState)([]),f=Object(l.a)(v,2),g=f[0],w=f[1],P=Object(o.useState)({page:0,limit:14,order:{id:"DESC"}}),V=Object(l.a)(P,2),F=V[0],D=V[1],E=function(){var e=Object(R.a)(G.a.mark((function e(){var t,n,o,i=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]&&i[0],t=i.length>1&&void 0!==i[1]&&i[1],n=s.empresa.id,e.next=5,at.show(n,t);case 5:o=e.sent,b(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("contacto",t.id),(n={}).filter=[["cliente_id","=",t.id]],n.limit=25,n.order={id:"DESC"},e.next=7,Y.show(s.empresa.id,s.id,1,n);case 7:o=e.sent,w(o.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=gt(F);console.log(e),E(!1,e)}),[F]),Object(o.useEffect)((function(){var e;if(null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.reload){var t=gt(F);E(!1,t),x(Object(k.a)({},a.state.reload.cliente_id)),a.state=null}}),[null===a||void 0===a?void 0:a.state]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(C.a.Column,{width:10,children:[Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(T.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(T.a.Item,{children:[Object(p.jsx)(T.a.Content,{floated:"left"}),Object(p.jsxs)(T.a.Content,{floated:"right",children:[Object(p.jsx)(q,{child:Object(p.jsx)(wt,{query:F,setQuery:D})}),Object(p.jsx)(I.a,{size:"mini",color:"teal",onClick:function(){c("/welcome/clientes/create",{state:{backgroundLocation:a,model:{empresa_id:s.empresa.id},empresa:s}})},children:"Nuevo Contacto"})]})]})})}),Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(T.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(T.a.Item,{children:[Object(p.jsx)(T.a.Content,{floated:"left",children:null===F||void 0===F||null===(e=F.filter)||void 0===e?void 0:e.map((function(e,t){return Object(p.jsxs)(oe.a,{as:"a",onClick:function(){!function(e){var t=F;t.filter.splice(e,1),D(Object(k.a)({},t))}(t)},children:[e[0],Object(p.jsx)(N.a,{name:"delete"},t)]},t)}))}),Object(p.jsx)(T.a.Content,{children:j?Object(p.jsx)(S.a,{pagination:!0,size:"mini",children:null===j||void 0===j||null===(t=j.links)||void 0===t?void 0:t.map((function(e,t){var n=parseFloat(null===e||void 0===e?void 0:e.label);return"number"===typeof n&&n?Object(p.jsx)(S.a.Item,{as:"a",active:null===e||void 0===e?void 0:e.active,onClick:function(){!function(e){var t=Object(k.a)(Object(k.a)({},F),{},{page:e});E(!1,t)}(n)},children:Object(p.jsx)("span",{children:null===e||void 0===e?void 0:e.label})},t):Object(p.jsx)(p.Fragment,{})}))}):Object(p.jsx)("div",{className:"ui placeholder",style:{padding:"8px"},children:Object(p.jsx)("div",{className:"line"})})})]})})}),Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(C.a.Column,{style:{overflowY:"scroll",height:"83vh",marginTop:"1rem"},children:Object(p.jsxs)(ve.a,{celled:!0,selectable:!0,children:[Object(p.jsx)(ve.a.Header,{children:Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.HeaderCell,{children:"Nombre"}),Object(p.jsx)(ve.a.HeaderCell,{children:"Documento"}),Object(p.jsx)(ve.a.HeaderCell,{children:"Direccion"})]})}),Object(p.jsx)(ve.a.Body,{children:j?null===j||void 0===j||null===(n=j.data)||void 0===n?void 0:n.map((function(e,t){var n;return Object(p.jsxs)(ve.a.Row,{onClick:function(){var t;x(t=e),A(t)},children:[Object(p.jsxs)(ve.a.Cell,{width:3,children:[e.nombre,"\xa0",Ze(e.updated_at)&&Object(p.jsx)($e,{index:t})]}),Object(p.jsxs)(ve.a.Cell,{width:3,children:[null===e||void 0===e||null===(n=e.tipo_documento)||void 0===n?void 0:n.nombre," ",e.numero_documento]}),Object(p.jsx)(ve.a.Cell,{width:10,children:null===e||void 0===e?void 0:e.direccion})]})})):Array(14).fill(null).map((function(e,t){return Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{width:3,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(ve.a.Cell,{width:3,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(ve.a.Cell,{width:10,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})})]})}))})]})})})]}),Object(p.jsx)(C.a.Column,{width:5,children:O&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(xt.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,style:{marginTop:"5vh"},children:Object(p.jsxs)(xt.a,{children:[Object(p.jsx)(xt.a.Content,{children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(xt.a.Header,{children:[Object(p.jsx)(vt.a,{srcSet:null===O||void 0===O?void 0:O.photo,alt:O.nombre_comercial,as:"div",size:"tiny",circular:!0}),"\xa0 ",null===O||void 0===O?void 0:O.nombre," ",Ze(null===O||void 0===O?void 0:O.updated_at)&&Object(p.jsx)($e,{index:null===O||void 0===O?void 0:O.id})]}),Object(p.jsxs)(xt.a.Description,{children:[Object(p.jsx)("b",{children:"Nombre Comercial"})," : ",null===O||void 0===O?void 0:O.nombre_comercial," "]}),Object(p.jsxs)(xt.a.Description,{children:[Object(p.jsx)("b",{children:"Documento "}),": ",null===O||void 0===O||null===(i=O.tipo_documento)||void 0===i?void 0:i.nombre," ",null===O||void 0===O?void 0:O.numero_documento," "]}),Object(p.jsxs)(xt.a.Description,{children:[Object(p.jsx)("b",{children:"Direcci\xf3n "}),": ",null===O||void 0===O?void 0:O.direccion]}),Object(p.jsxs)(xt.a.Description,{children:[Object(p.jsx)("b",{children:"Email "}),": ",null===O||void 0===O?void 0:O.email]}),Object(p.jsxs)(xt.a.Description,{children:[Object(p.jsx)("b",{children:"Tel\xe9fono "}),": ",null===O||void 0===O?void 0:O.telefono]}),Object(p.jsxs)(xt.a.Description,{children:[Object(p.jsx)("b",{children:"Celular "}),": ",null===O||void 0===O?void 0:O.celular]})]})}),Object(p.jsxs)(xt.a.Content,{extra:!0,children:[Object(p.jsx)(I.a,{primary:!0,onClick:function(){c("/welcome/clientes/"+O.id,{state:{backgroundLocation:a,model:O,empresa:s}})},children:"Editar"}),Object(p.jsx)(I.a,{children:"Redactar Mensaje"})]})]})}),!!O&&!!g.length&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(xt.a.Group,{itemsPerRow:1,stackable:!0,children:Object(p.jsx)(Ct,{state:g,resolve:function(e){for(var t={title:"Ventas",mensaje:"Ultimos 25 Documento",detalles:{}},n=0;n<e.length;n++){var o=e[n];t.detalles.hasOwnProperty(o.moneda.nombre)?t.detalles[o.moneda.nombre].total+=o.total_documento_fin:t.detalles[o.moneda.nombre]={simbolo:o.moneda.simbolo,total:o.total_documento_fin}}return t}})}),Object(p.jsx)(xt.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,children:Object(p.jsx)(xt.a,{children:Object(p.jsx)(xt.a.Content,{style:{overflowY:"scroll",height:"30vh"},children:Object(p.jsx)(ft.a,{children:g.map((function(e,t){var n,o,i;return Object(p.jsxs)(ft.a.Event,{children:[Object(p.jsx)(ft.a.Label,{icon:"shopping bag"}),Object(p.jsxs)(ft.a.Content,{children:[Object(p.jsx)(ft.a.Date,{children:Object(p.jsx)(me.a,{fromNow:!0,children:e.updated_at})}),Object(p.jsxs)(ft.a.Summary,{children:[Object(p.jsxs)(r.b,{to:"/space/ventas/".concat(e.id),state:{model:e},children:[null===e||void 0===e||null===(n=e.serie)||void 0===n?void 0:n.descripcion," ",null===e||void 0===e||null===(o=e.serie)||void 0===o?void 0:o.serie,"-",null===e||void 0===e?void 0:e.correlativo," \xa0\xa0\xa0"]}),null===e||void 0===e||null===(i=e.moneda)||void 0===i?void 0:i.simbolo," ",e.total_documento_fin]}),Object(p.jsx)(ft.a.Meta,{children:Object(p.jsxs)(ft.a.Like,{children:[Object(p.jsx)(N.a,{name:"comments outline"}),"1 Comentarios"]})})]})]})}))})})})})]})]})})]})};var kt={show:function(){return new Promise((function(e,t){m.get("/local").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("local/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("precio",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t,n){return new Promise((function(o,i){m.put("precio/"+t+"/"+n,e).then((function(e){o(e.data)}))}))},destroy:function(e,t,n){m.delete("precio/"+t+"/"+n,e).then((function(e){return e.data}))}},St=function(){var e,t,n,i,c,a,r,s=Object(y.h)(),d=Object(y.g)(),u=Object(o.useContext)(_).empresa,j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],O=Object(o.useState)(null),x=Object(l.a)(O,2),v=x[0],f=x[1],g=Object(o.useState)([]),w=Object(l.a)(g,2),P=w[0],V=w[1],F=Object(o.useState)({show:!1,message:"Eliminar Precio"}),D=Object(l.a)(F,2),E=D[0],A=D[1],L=Object(o.useState)({page:0,limit:14,order:{id:"DESC"}}),B=Object(l.a)(L,2),M=B[0],H=B[1],U=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={}).filter=[["producto_id","=",t.id]],n.limit=25,n.order={id:"DESC"},e.next=6,Y.showDetalles(u.empresa.id,u.id,1,n);case 6:o=e.sent,V(o.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(R.a)(G.a.mark((function e(){var t,n,o,i=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]&&i[0],t=i.length>1&&void 0!==i[1]&&i[1],n=u.empresa.id,e.next=5,Ae.show("producto/"+n,t);case 5:o=e.sent,h(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(R.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt.destroy(E.precio.id);case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=gt(M);console.log(e),J(!1,e)}),[M]),Object(o.useEffect)((function(){var e,t,n,o,i,c;if((null===d||void 0===d||null===(e=d.state)||void 0===e?void 0:e.reload)&&(null===d||void 0===d||null===(t=d.state)||void 0===t||null===(n=t.reload)||void 0===n?void 0:n.producto_id)){var a=gt(M);J(!1,a),f(Object(k.a)({},d.state.reload.producto_id)),d.state=null}if((null===d||void 0===d||null===(o=d.state)||void 0===o?void 0:o.reload)&&(null===d||void 0===d||null===(i=d.state)||void 0===i||null===(c=i.reload)||void 0===c?void 0:c.precio_id)){var r,l;if(null===d||void 0===d||null===(r=d.state)||void 0===r||null===(l=r.reload)||void 0===l?void 0:l.push){var s=v,u=v.precios||[];u.push(d.state.reload.precio_id),s.precios=u,f(Object(k.a)({},s))}else{var j=v.precios.map((function(e,t){return e.id===d.state.reload.precio_id.id?d.state.reload.precio_id:e})),b=v;b.precios=j,f(Object(k.a)({},b))}d.state=null}}),[null===d||void 0===d?void 0:d.state]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(C.a.Column,{width:8,children:[Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(T.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(T.a.Item,{children:[Object(p.jsx)(T.a.Content,{floated:"left"}),Object(p.jsxs)(T.a.Content,{floated:"right",children:[Object(p.jsx)(q,{child:Object(p.jsx)(wt,{query:M,setQuery:H})}),Object(p.jsx)(I.a,{size:"mini",color:"teal",onClick:function(){s("/welcome/productos/create",{state:{backgroundLocation:d,model:{empresa_id:u.empresa.id,local_id:u.id,afecto:1},empresa:u}})},children:"Nuevo Producto"})]})]})})}),Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(T.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(T.a.Item,{children:[Object(p.jsx)(T.a.Content,{floated:"left",children:null===M||void 0===M||null===(e=M.filter)||void 0===e?void 0:e.map((function(e,t){return Object(p.jsxs)(oe.a,{as:"a",onClick:function(){!function(e){var t=M;t.filter.splice(e,1),H(Object(k.a)({},t))}(t)},children:[e[0],Object(p.jsx)(N.a,{name:"delete"},t)]},t)}))}),Object(p.jsx)(T.a.Content,{children:m?Object(p.jsx)(S.a,{pagination:!0,size:"mini",children:null===m||void 0===m||null===(t=m.links)||void 0===t?void 0:t.map((function(e,t){var n=parseFloat(null===e||void 0===e?void 0:e.label);return"number"===typeof n&&n?Object(p.jsx)(S.a.Item,{as:"a",active:null===e||void 0===e?void 0:e.active,onClick:function(){!function(e){var t=Object(k.a)(Object(k.a)({},M),{},{page:e});J(!1,t)}(n)},children:Object(p.jsx)("span",{children:null===e||void 0===e?void 0:e.label})},t):Object(p.jsx)(p.Fragment,{})}))}):Object(p.jsx)("div",{className:"ui placeholder",style:{padding:"8px"},children:Object(p.jsx)("div",{className:"line"})})})]})})}),Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(C.a.Column,{style:{overflowY:"scroll",height:"83vh",marginTop:"1rem"},children:Object(p.jsxs)(ve.a,{celled:!0,selectable:!0,children:[Object(p.jsx)(ve.a.Header,{children:Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.HeaderCell,{children:"Codigo"}),Object(p.jsx)(ve.a.HeaderCell,{children:"Descripci\xf3n"}),Object(p.jsx)(ve.a.HeaderCell,{children:"Codigo de Barras"}),Object(p.jsx)(ve.a.HeaderCell,{children:"Marca"}),Object(p.jsx)(ve.a.HeaderCell,{children:"Presentaci\xf3n"}),Object(p.jsx)(ve.a.HeaderCell,{children:"Categor\xeda"}),Object(p.jsx)(ve.a.HeaderCell,{children:"Sub Categoria"})]})}),Object(p.jsx)(ve.a.Body,{children:m?null===m||void 0===m||null===(n=m.data)||void 0===n?void 0:n.map((function(e,t){var n,o,i,c;return Object(p.jsxs)(ve.a.Row,{onClick:function(){var t;f(t=e),U(t)},children:[Object(p.jsx)(ve.a.Cell,{width:1,children:e.codigo}),Object(p.jsxs)(ve.a.Cell,{width:6,children:[e.nombre,"\xa0",Ze(e.updated_at)&&Object(p.jsx)($e,{index:t})]}),Object(p.jsx)(ve.a.Cell,{width:2,children:null===e||void 0===e?void 0:e.codigo_barras}),Object(p.jsx)(ve.a.Cell,{width:2,children:null===e||void 0===e||null===(n=e.marca)||void 0===n?void 0:n.nombre}),Object(p.jsx)(ve.a.Cell,{width:1,children:null===e||void 0===e||null===(o=e.presentacion)||void 0===o?void 0:o.nombre}),Object(p.jsx)(ve.a.Cell,{width:2,children:null===e||void 0===e||null===(i=e.categoria)||void 0===i?void 0:i.nombre}),Object(p.jsx)(ve.a.Cell,{width:2,children:null===e||void 0===e||null===(c=e.subcategoria)||void 0===c?void 0:c.nombre})]})})):Array(14).fill(null).map((function(e,t){return Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.Cell,{width:1,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(ve.a.Cell,{width:6,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(ve.a.Cell,{width:2,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(ve.a.Cell,{width:2,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(ve.a.Cell,{width:1,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(ve.a.Cell,{width:2,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(ve.a.Cell,{width:2,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})})]})}))})]})})})]}),Object(p.jsxs)(C.a.Column,{width:5,children:[v&&v.id&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(xt.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,style:{marginTop:"5vh"},children:[Object(p.jsxs)(xt.a,{children:[Object(p.jsx)(xt.a.Content,{children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(xt.a.Header,{children:[null===v||void 0===v?void 0:v.nombre," ",Ze(null===v||void 0===v?void 0:v.updated_at)&&Object(p.jsx)($e,{index:null===v||void 0===v?void 0:v.id})]}),Object(p.jsx)(xt.a.Description,{children:Object(p.jsx)(ve.a,{basic:"very",children:Object(p.jsxs)(ve.a.Body,{children:[Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"C\xf3digo:"}),Object(p.jsx)("br",{}),null===v||void 0===v?void 0:v.codigo]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"C\xf3digo de Barras:"}),Object(p.jsx)("br",{}),null===v||void 0===v?void 0:v.codigo_barras]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"Marca:"}),Object(p.jsx)("br",{}),null===v||void 0===v||null===(i=v.marca)||void 0===i?void 0:i.nombre]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"Linea:"}),Object(p.jsx)("br",{}),null===v||void 0===v||null===(c=v.linea)||void 0===c?void 0:c.nombre]})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"Afecto:"}),Object(p.jsx)("br",{}),(null===v||void 0===v?void 0:v.afecto)?"Si":"No"]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"Precio de Compra:"}),Object(p.jsx)("br",{}),null===v||void 0===v||null===(a=v.moneda)||void 0===a?void 0:a.simbolo," ",null===v||void 0===v?void 0:v.precio_compra]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"Peso:"}),Object(p.jsx)("br",{}),null===v||void 0===v?void 0:v.peso," KG"]}),Object(p.jsx)(ve.a.Cell,{children:"\xa0"})]}),Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"% IGV:"}),Object(p.jsx)("br",{}),null===v||void 0===v?void 0:v.igv]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"% Detracci\xf3n:"}),Object(p.jsx)("br",{}),null===v||void 0===v?void 0:v.por_detraccion]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"% ISC:"}),Object(p.jsx)("br",{}),null===v||void 0===v?void 0:v.por_isc]}),Object(p.jsx)(ve.a.Cell,{children:" \xa0"})]})]})})})]})}),Object(p.jsx)(xt.a.Content,{extra:!0,children:Object(p.jsx)(I.a,{primary:!0,onClick:function(){s("/welcome/productos/"+v.id,{state:{backgroundLocation:d,model:v,empresa:u}})},children:"Editar"})})]}),Object(p.jsx)(xt.a,{children:Object(p.jsxs)(xt.a.Content,{style:{overflowY:"scroll",height:"24vh"},children:[Object(p.jsxs)(xt.a.Header,{children:["Precios de Venta",Object(p.jsxs)(I.a,{floated:"right",icon:!0,labelPosition:"left",primary:!0,size:"small",onClick:function(){s("/welcome/precios/create",{state:{backgroundLocation:d,model:{local_id:u.id,empresa_id:u.empresa.id,producto_id:v.id,costo_compra:v.precio_compra,presentacion_id:49},empresa:u}})},style:{marginBottom:"1vh"},children:[Object(p.jsx)(N.a,{name:"currency"}),"Nuevo Precio"]})]}),Object(p.jsx)(xt.a.Description,{children:Object(p.jsxs)(ve.a,{basic:"very",children:[Object(p.jsx)(ve.a.Header,{children:Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Presentacion Unitaria",children:"PST."})}),Object(p.jsx)(ve.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Utlidad",children:"UTL."})}),Object(p.jsx)(ve.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Precio de Compra sin IGV",children:"COSTO"})}),Object(p.jsx)(ve.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Precio de Venta sin IGV",children:"GRAV."})}),Object(p.jsx)(ve.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Valor del IGV",children:"IGV"})}),Object(p.jsx)(ve.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Precio de Venta",children:"PV."})}),Object(p.jsx)(ve.a.HeaderCell,{})]})}),Object(p.jsx)(ve.a.Body,{children:null===v||void 0===v||null===(r=v.precios)||void 0===r?void 0:r.map((function(e,t){var n,o,i,c;return Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsxs)(ve.a.Cell,{children:[e.presentacion.nombre," \xa0",Ze(e.updated_at)&&Object(p.jsx)($e,{index:t})," "]}),Object(p.jsxs)(ve.a.Cell,{children:["% ",null===e||void 0===e?void 0:e.por_utilidad]}),Object(p.jsxs)(ve.a.Cell,{children:[null===(n=v.moneda)||void 0===n?void 0:n.simbolo," ",null===e||void 0===e?void 0:e.costo_compra]}),Object(p.jsxs)(ve.a.Cell,{children:[null===e||void 0===e||null===(o=e.moneda)||void 0===o?void 0:o.simbolo," ",e.costo_venta]}),Object(p.jsxs)(ve.a.Cell,{children:[null===e||void 0===e||null===(i=e.moneda)||void 0===i?void 0:i.simbolo," ",e.igv]}),Object(p.jsx)(ve.a.Cell,{children:Object(p.jsxs)("b",{children:[null===e||void 0===e||null===(c=e.moneda)||void 0===c?void 0:c.simbolo," ",e.precio_venta]})}),Object(p.jsx)(ve.a.Cell,{children:Object(p.jsx)(I.a.Group,{size:"mini",children:Object(p.jsx)(I.a,{icon:"pencil",onClick:function(){var t;s("/welcome/precios/"+(t=e).id,{state:{backgroundLocation:d,model:t,empresa:u}})}})})})]})}))}),Object(p.jsx)(ve.a.Footer,{fullWidth:!0,children:Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsx)(ve.a.HeaderCell,{}),Object(p.jsx)(ve.a.HeaderCell,{colSpan:"6"})]})})]})})]})})]}),Object(p.jsx)(xt.a.Group,{}),!!v&&!!P.length&&Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(xt.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,children:Object(p.jsx)(xt.a,{children:Object(p.jsx)(xt.a.Content,{style:{overflowY:"scroll",height:"30vh"},children:Object(p.jsx)(ft.a,{children:P.map((function(e,t){var n,o;return Object(p.jsxs)(ft.a.Event,{children:[Object(p.jsx)(ft.a.Label,{icon:"box"}),Object(p.jsxs)(ft.a.Content,{children:[Object(p.jsx)(ft.a.Date,{children:Object(p.jsx)(me.a,{fromNow:!0,children:e.updated_at})}),Object(p.jsxs)(ft.a.Summary,{children:[null===e||void 0===e||null===(n=e.venta)||void 0===n?void 0:n.uniqueserie,"\xa0\xa0\xa0",null===e||void 0===e||null===(o=e.moneda)||void 0===o?void 0:o.simbolo," ",e.total_documento_fin]}),Object(p.jsx)(ft.a.Summary,{children:Object(p.jsx)(ve.a,{basic:"very",children:Object(p.jsx)(ve.a.Body,{children:Object(p.jsxs)(ve.a.Row,{children:[Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"Cant:"}),Object(p.jsx)("br",{}),null===e||void 0===e?void 0:e.cantidad.toFixed(2)]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"Gravado:"}),Object(p.jsx)("br",{}),null===e||void 0===e?void 0:e.monto_base_igv.toFixed(2)]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"IGV:"}),Object(p.jsx)("br",{}),null===e||void 0===e?void 0:e.monto_igv.toFixed(2)]}),Object(p.jsxs)(ve.a.Cell,{children:[Object(p.jsx)("b",{children:"PV:"}),Object(p.jsx)("br",{}),null===e||void 0===e?void 0:e.precio_venta.toFixed(2)]})]})})})})]})]})}))})})})})})]}),Object(p.jsx)(z.a,{open:E.show,content:E.message,onCancel:function(){A({show:!E.show})},onConfirm:function(){W()}})]})]})},Pt=ke.a({presentacion_id:ke.b().required("Complete"),moneda_id:ke.b().required("Complete"),producto_id:ke.b().required("Complete")}).required(),Vt=n(46),Ft=n(47),Dt=function(e){Object(Vt.a)(n,e);var t=Object(Ft.a)(n);function n(){return Object(Be.a)(this,n),t.apply(this,arguments)}return Object(Me.a)(n,[{key:"costoVenta",value:function(e){return e.precio_venta=this.roundOff(1.18*e.costo_venta).toFixed(4),e.por_utilidad=this.roundOff(e.costo_venta/e.costo_compra*100-100).toFixed(4),e.utilidad=this.roundOff(e.por_utilidad*e.costo_venta/100).toFixed(4),e.igv=18,e}},{key:"precioVenta",value:function(e){return e.costo_venta=this.roundOff(e.precio_venta/1.18).toFixed(4),e.por_utilidad=this.roundOff(e.costo_venta/e.costo_compra*100-100).toFixed(4),e.utilidad=this.roundOff(e.por_utilidad*e.costo_venta/100).toFixed(4),e.igv=18,e}}]),n}(He),Tt=Dt,It=function(e){var t,n,c,a=e.state,r=Object(y.h)(),s=Object(y.g)(),d=Object(o.useContext)(_),u=d.empresa,j=(d.setEmpresa,Object(o.useState)(!1)),b=Object(l.a)(j,2),m=b[0],h=b[1],O=Object(o.useState)(!1),x=Object(l.a)(O,2),v=x[0],f=x[1],g=Object(he.e)({resolver:Object(we.a)(Pt),defaultValues:a}),w=g.control,C=g.handleSubmit,k=g.setValue,S=g.watch,P=g.formState.errors,V=S(),F=new Tt;i.a.useEffect((function(){var e=S((function(e,t){var n=t.name,o=t.type,i=[];"precio_venta"===n&&"change"===o&&(i=F.precioVenta(e)),"costo_venta"===n&&"change"===o&&(i=F.costoVenta(e));for(var c=Object.keys(i),a=0;a<c.length;a++){var r=c[a];k(r,i[r])}}));return function(){return e.unsubscribe()}}),[S]);var D=Object(o.useState)(),T=Object(l.a)(D,2),q=T[0],E=T[1];Object(o.useEffect)((function(){Object(R.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.id){e.next=7;break}return e.next=3,kt.find(a.id);case 3:return t=e.sent,e.abrupt("return",E(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))()}),{data:q});var N=function(e,t){r(s.state.backgroundLocation.pathname,{state:{reload:{precio_id:e,push:t}}})},L=function(){var e=Object(R.a)(G.a.mark((function e(t){var n,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),!t||!t.id){e.next=8;break}return e.next=4,kt.update(t,u.empresa.id,t.id);case 4:n=e.sent,N(n,!1),e.next=14;break;case 8:return e.next=10,kt.create(t);case 10:return o=e.sent,h(!1),(null===o||void 0===o?void 0:o.errors)?f(Pe(o)):(f(null),N(o,!0)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(A.a,{onSubmit:C(L),noValidate:!0,children:[Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(Ee,{model:Ve.presentacion,empresaContexto:u,control:w,venta:a,setValue:k,width:6}),Object(p.jsx)(Ee,{model:Ve.moneda,empresaContexto:u,control:w,venta:a,setValue:k,width:3})]}),Object(p.jsxs)(A.a.Group,{children:[Object(p.jsx)(ye,{name:"costo_compra",title:"Costo de Compra",control:w,errors:P,width:3,readOnly:!0}),Object(p.jsx)(ye,{name:"igv",title:"% de IGV",control:w,errors:P,width:3,readOnly:!0}),Object(p.jsx)(ye,{name:"por_utilidad",title:"% de Utilidad",type:"number",control:w,errors:P,width:3,readOnly:!0}),Object(p.jsx)(ye,{name:"utilidad",title:(null===V||void 0===V||null===(t=V.moneda)||void 0===t?void 0:t.simbolo)?"Utilidad "+(null===V||void 0===V||null===(n=V.moneda)||void 0===n?void 0:n.simbolo):"Utilidad",control:w,errors:P,width:3,readOnly:!0,type:"number"}),Object(p.jsx)(ye,{name:"costo_venta",title:"Costo de Venta",control:w,errors:P,width:3,type:"number"}),Object(p.jsx)(ye,{name:"precio_venta",title:"Precio Venta",control:w,errors:P,width:3,type:"number"})]}),(null===(c=Object.keys(P))||void 0===c?void 0:c.length)?Object(p.jsx)(Z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===v||void 0===v?void 0:v.length)&&Object(p.jsx)(Z.a,{color:"red",header:"Verifique los siguientes campos",list:v}),Object(p.jsx)(I.a,{loading:m,secondary:!0,children:"Guardar"})]})};function qt(){return Object(p.jsx)("div",{children:Object(p.jsx)("h2",{children:"Reports"})})}function Et(){return Object(p.jsx)("div",{children:Object(p.jsx)("h2",{children:"Profile"})})}function Nt(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Nothing to see here!"}),Object(p.jsx)("p",{children:Object(p.jsx)(r.b,{to:"/",children:"Go to the home page"})})]})}var At=function(){var e=Object(o.useState)({status:!1}),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(y.g)(),a=c.state||{backgroundLocation:c};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(y.e,{location:(null===a||void 0===a?void 0:a.backgroundLocation)?null===a||void 0===a?void 0:a.backgroundLocation:c,children:[Object(p.jsx)(y.c,{path:"/",element:Object(p.jsx)(w,{})}),Object(p.jsx)(y.c,{path:"/signup",element:Object(p.jsx)($,{})}),Object(p.jsx)(y.c,{path:"welcome",element:Object(p.jsx)(Q,{}),children:Object(p.jsx)(y.c,{path:"empresas",element:Object(p.jsx)(re,{})})}),Object(p.jsxs)(y.c,{path:"/workspace",element:Object(p.jsx)(W,{}),children:[Object(p.jsx)(y.c,{path:"app",element:Object(p.jsx)(de,{})}),Object(p.jsx)(y.c,{path:"ventas",element:Object(p.jsx)(et,{})}),Object(p.jsx)(y.c,{path:"ventas/:id",fullwidth:!0,element:Object(p.jsx)(Qe,{state:null===a||void 0===a?void 0:a.model,editionMode:!0})}),Object(p.jsx)(y.c,{path:"contactos",element:Object(p.jsx)(yt,{})}),Object(p.jsx)(y.c,{path:"productos",element:Object(p.jsx)(St,{})}),Object(p.jsx)(y.c,{path:"reports",element:Object(p.jsx)(qt,{})}),Object(p.jsx)(y.c,{path:"profile",element:Object(p.jsx)(Et,{})})]}),Object(p.jsxs)(y.c,{path:"/space",element:Object(p.jsx)(Ot,{}),children:[Object(p.jsx)(y.c,{path:"productos/create/:id",element:Object(p.jsx)(Qe,{state:null===a||void 0===a?void 0:a.model,editionMode:!0})}),Object(p.jsx)(y.c,{path:"productos/:id",element:Object(p.jsx)(Qe,{state:null===a||void 0===a?void 0:a.model,editionMode:!0})}),Object(p.jsx)(y.c,{path:"ventas/create/:id",element:Object(p.jsx)(Qe,{formatPrint:n,setFormatPrint:i,state:null===a||void 0===a?void 0:a.model,editionMode:!0})}),Object(p.jsx)(y.c,{path:"ventas/:id",element:Object(p.jsx)(Qe,{formatPrint:n,setFormatPrint:i,state:null===a||void 0===a?void 0:a.model,editionMode:!0})})]}),Object(p.jsx)(y.c,{path:"*",element:Object(p.jsx)(Nt,{})})]}),(null===a||void 0===a?void 0:a.backgroundLocation)&&Object(p.jsxs)(y.e,{children:[Object(p.jsx)(y.c,{path:"welcome/empresas/create",element:Object(p.jsx)(se,{size:"large",setTitle:"Crea Nueva Empresa",children:Object(p.jsx)(ot,{})})}),Object(p.jsx)(y.c,{path:"welcome/empresas/:id",element:Object(p.jsx)(se,{size:"large",setTitle:"Editar Empresa",children:Object(p.jsx)(ot,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/locals/create",element:Object(p.jsx)(se,{size:"large",setTitle:"Crea Nuevo Local",children:Object(p.jsx)(ct,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/locals/:id",element:Object(p.jsx)(se,{size:"large",setTitle:"Editar Local",children:Object(p.jsx)(ct,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/clientes/create",element:Object(p.jsx)(se,{size:"large",setTitle:"Crea Nuevo Cliente",children:Object(p.jsx)(lt,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/clientes/:id",element:Object(p.jsx)(se,{size:"large",setTitle:"Editar Cliente",children:Object(p.jsx)(lt,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/moneda/create",element:Object(p.jsx)(se,{size:"small",setTitle:"Crea Nueva Moneda",children:Object(p.jsx)(ut,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/moneda/:id",element:Object(p.jsx)(se,{size:"small",setTitle:"Editar Moneda",children:Object(p.jsx)(ut,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/vehiculo/create",element:Object(p.jsx)(se,{size:"small",setTitle:"Crea Nuevo Vehiculo",children:Object(p.jsx)(mt,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/vehiculo/:id",element:Object(p.jsx)(se,{size:"small",setTitle:"Editar Vehiculo",children:Object(p.jsx)(mt,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/ventas/create",element:Object(p.jsx)(se,{size:"fullscreen",setTitle:"Title",children:Object(p.jsx)(ut,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/ventas/:id",element:Object(p.jsx)(se,{size:"fullscreen",setTitle:"Title"})}),Object(p.jsx)(y.c,{path:"welcome/productos/create",element:Object(p.jsx)(se,{size:"large",setTitle:"Crea Nuevo Producto \xf3 Servicio",children:Object(p.jsx)(pt,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/productos/:id",element:Object(p.jsx)(se,{size:"large",setTitle:"Editar Producto \xf3 Servicio",children:Object(p.jsx)(pt,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/precios/create",element:Object(p.jsx)(se,{size:"small",setTitle:"Crea Nuevo Precio",children:Object(p.jsx)(It,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/precios/:id",element:Object(p.jsx)(se,{size:"small",setTitle:"Editar Precio",children:Object(p.jsx)(It,{state:null===a||void 0===a?void 0:a.model})})})]})]})};console.log=function(){};var Lt=function(){return Object(p.jsx)(x,{children:Object(p.jsxs)(g,{children:[Object(p.jsx)(r.a,{children:Object(p.jsx)(At,{})}),Object(p.jsx)(j.a,{})]})})};a.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(Lt,{})}),document.getElementById("root"))}},[[926,1,2]]]);
//# sourceMappingURL=main.44ed521e.chunk.js.map