(this["webpackJsonpinvoicer-front"]=this["webpackJsonpinvoicer-front"]||[]).push([[0],{488:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=488},596:function(e,t){},598:function(e,t){},628:function(e,t){},629:function(e,t){},740:function(e,t){},926:function(e,t,n){"use strict";n.r(t);var o=n(2),i=n.n(o),c=n(77),a=n.n(c),r=n(19),l=(n(459),n(460),n(12)),s=n(170),d=n.n(s);n(177);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return"any"===e?"https://api.fivip.net/index.php/api/v1":"public"===e?"https://api.fivip.net":void 0},j=n(73),b=d.a.create({baseURL:u()});b.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),b.interceptors.response.use((function(e){return e}),(function(e){var t,n;return 401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&j.b.error("Error de Credenciales!"),422===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&j.b.error("Error al enviar datos!"),Promise.reject(e)}));var m=b;m.defaults.headers.common.Authorization=localStorage.getItem("jwt")?"Bearer "+localStorage.getItem("jwt"):null;var h={Login:function(e){return new Promise((function(t,n){m.post("/login",e).then((function(e){m.defaults.headers.common.Authorization="Bearer "+e.data[0].token,t(e.data[0].token)}),(function(e){n(new Error(e))}))}))},Me:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.defaults.headers.common.Authorization="Bearer "+e,new Promise((function(e,t){m.get("/me").then((function(t){e(t.data)}))}))},Out:function(){return new Promise((function(e,t){m.get("/logout").then((function(t){e(t.data)}))}))}},p=n(1),v=i.a.createContext({});function O(e){var t=e.children,n=Object(o.useState)({}),i=Object(l.a)(n,2),c=i[0],a=i[1],r=Object(o.useState)((function(){return window.localStorage.getItem("jwt")})),s=Object(l.a)(r,2),d=s[0],u=s[1];return Object(o.useEffect)((function(){if(!d)return a({});h.Me(d).then((function(e){a(e)}))}),[d]),Object(p.jsx)(v.Provider,{value:{me:c,jwt:d,setMe:a,setJwt:u},children:t})}var x=v,f=i.a.createContext({});function g(e){var t=e.children,n=Object(o.useState)(JSON.parse(localStorage.getItem("print_setting"))),i=Object(l.a)(n,2),c=i[0],a=i[1],r=Object(o.useState)(JSON.parse(window.localStorage.getItem("logo"))),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(JSON.parse(window.localStorage.getItem("empresa"))),b=Object(l.a)(j,2),m=b[0],h=b[1];return Object(p.jsx)(f.Provider,{value:{empresa:m,setEmpresa:h,logo:d,setLogo:u,impresion:c,setImpresion:a},children:t})}var _=f,w=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Home"}),Object(p.jsx)(r.b,{to:"/workspace",children:"App"})]})},C=n(962),y=n(22),k=n(8),S=n(960),P=n(950);function V(){var e=Object(o.useContext)(x),t=e.jwt,n=e.setMe,i=e.setJwt,c=Object(o.useState)({loading:!1,error:!1}),a=Object(l.a)(c,2),r=a[0],s=a[1],d=Object(o.useCallback)((function(e){s({loading:!0,error:!1}),h.Login(e).then((function(e){window.localStorage.setItem("jwt",e),h.Me(e).then((function(e){n(e)})),s({loading:!1,error:!1}),i(e)})).catch((function(e){window.localStorage.removeItem("jwt"),s({loading:!1,error:!0})}))}),[i]),u=Object(o.useCallback)((function(){window.localStorage.removeItem("jwt"),i(null)}),[i]);return{isLogged:Boolean(t),isLoginLoading:r.loading,hasLoginError:r.error,login:d,logout:u}}var F=i.a.createContext({});function D(e){var t=e.children,n=Object(o.useState)({}),i=Object(l.a)(n,2),c=i[0],a=i[1],r=Object(o.useState)(JSON.parse(localStorage.getItem("venta_default_content"))),s=Object(l.a)(r,2),d=s[0],u=s[1];return Object(p.jsx)(F.Provider,{value:{documento:c,setDocumento:a,ventaDefaultContent:d,handleDefaultVenta:function(){var e={};e.cliente=c.cliente,e.cliente_id=c.cliente_id,e.almacen=c.almacen,e.almacen_id=c.almacen_id,e.forma_pago=c.forma_pago,e.forma_pago_id=c.forma_pago_id,e.moneda=c.moneda,e.moneda_id=c.moneda_id,localStorage.setItem("venta_default_content",JSON.stringify(e)),u(e),console.log(e)}},children:t})}var T=F,I=function(){var e=Object(y.g)(),t=Object(o.useContext)(x).me,n=Object(o.useContext)(_),i=n.empresa,c=n.impresion,a=n.setImpresion,s=Object(o.useContext)(T).handleDefaultVenta,d=V(),u=d.isLogged,b=d.logout,m=Object(o.useState)(!1),h=Object(l.a)(m,2),v=h[0],O=h[1];Object(o.useEffect)((function(){e.pathname.search("/space/ventas/")&&e.pathname.search("/workspace/ventas")?O(!1):O(!0)}),[e]);var f=Object(y.h)(),g=function(e){localStorage.setItem("print_setting",JSON.stringify(Object(k.a)(Object(k.a)({},c),{size:e}))),a(Object(k.a)(Object(k.a)({},c),{size:e}))};return Object(p.jsxs)(p.Fragment,{children:[!u&&Object(p.jsx)(y.a,{to:"/signup"}),Object(p.jsxs)(S.a,{fixed:"top",inverted:!0,children:[Object(p.jsx)(r.b,{to:"/",children:Object(p.jsx)(S.a.Item,{as:"a",children:"Dashboard"})}),Object(p.jsx)(r.b,{to:"/welcome/empresas",children:Object(p.jsx)(S.a.Item,{as:"a",children:"Empresas"})}),Object(p.jsx)(r.b,{to:"/workspace/app",children:Object(p.jsx)(S.a.Item,{as:"a",onClick:function(){i?f({pathname:"/workspace/app"}):j.b.error("Selecione un Local \xf3 sucursal para continuar")},children:"Workspace"})}),Object(p.jsxs)(S.a.Menu,{position:"right",children:[v&&Object(p.jsx)(S.a.Item,{children:Object(p.jsx)(P.a,{as:"a",text:"Ajustes de Documento",style:{color:"white",fontSize:"13px"},children:Object(p.jsxs)(P.a.Menu,{children:[Object(p.jsx)(P.a.Header,{icon:"print",content:"Configuraci\xf3n de Impresi\xf3n"}),Object(p.jsx)(P.a.Item,{active:null===c||void 0===c?void 0:c.after_save,onClick:function(){var e;e=!(null===c||void 0===c?void 0:c.after_save),localStorage.setItem("print_setting",JSON.stringify(Object(k.a)(Object(k.a)({},c),{after_save:e}))),a(Object(k.a)(Object(k.a)({},c),{after_save:e}))},children:"Mostrar impresion despues de generar el documento"}),Object(p.jsx)(P.a.Item,{active:"A4"===(null===c||void 0===c?void 0:c.size),onClick:function(){g("A4")},children:"Impresi\xf3n A4"}),Object(p.jsx)(P.a.Item,{active:"88mm"===(null===c||void 0===c?void 0:c.size),onClick:function(){g("88mm")},children:"Impresi\xf3n Ticket 88 mm"}),Object(p.jsx)(P.a.Item,{active:"70mm"===(null===c||void 0===c?void 0:c.size),onClick:function(){g("70mm")},children:"Impresi\xf3n Ticket 80 mm"}),Object(p.jsx)(P.a.Item,{active:"80mm"===(null===c||void 0===c?void 0:c.size),onClick:function(){g("80mm")},children:"Impresi\xf3n Ticket 70 mm"}),Object(p.jsx)(P.a.Divider,{}),Object(p.jsx)(P.a.Item,{onClick:function(){s()},children:"Ajustes Predeterminados"})]})})}),u?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(S.a.Item,{as:"a",name:"profile",children:t.name}),Object(p.jsx)(S.a.Item,{as:"a",name:"Logout",onClick:function(){b(),f({pathname:"/signup"})},children:"Logout"})]}):Object(p.jsx)(r.b,{to:"/signup",children:Object(p.jsx)(S.a.Item,{as:"a",name:"Signup",children:"Sign Up"})})]})]})]})},N=function(){return Object(p.jsxs)("div",{className:"ui vertical labeled icon menu",children:[Object(p.jsxs)(r.c,{to:"/workspace/app",end:"active",className:"item",children:[Object(p.jsx)("i",{"aria-hidden":"true",className:"gamepad icon"}),"Inicio"]}),Object(p.jsxs)(r.c,{to:"/workspace/ventas",end:"active",className:"item",children:[Object(p.jsx)("i",{"aria-hidden":"true",className:"file alternate outline icon"}),"Ventas"]}),Object(p.jsxs)(r.c,{to:"/workspace/contactos",end:"active",className:"item",children:[Object(p.jsx)("i",{"aria-hidden":"true",className:"users icon"}),"Contactos"]}),Object(p.jsxs)(r.c,{to:"/workspace/productos",end:"active",className:"item",children:[Object(p.jsx)("i",{"aria-hidden":"true",className:"box icon"}),"Productos"]})]})},q=function(){var e=Object(o.useContext)(_).empresa;return Object(p.jsx)(p.Fragment,{children:e?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I,{}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(C.a.Row,{columns:3,children:[Object(p.jsx)(C.a.Column,{width:1,children:Object(p.jsx)(N,{fluid:!0})}),Object(p.jsx)(y.b,{})]})})]}):Object(p.jsx)(y.a,{to:"/welcome/empresas"})})},E=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I,{}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(C.a.Row,{columns:3,style:{height:"80rem"},children:[Object(p.jsx)(C.a.Column,{width:10,style:{border:"solid 1px #d5d8da"},children:Object(p.jsx)(y.b,{})}),Object(p.jsx)(C.a.Column,{width:6})]})})]})},A=n(963),L=n(951),R=n(964),G=n(285),z=n(959),B=function(){var e=Object(o.useState)({email:"adolfo.gbztt@gmail.com",password:"adolfo2403"}),t=Object(l.a)(e,2),n=t[0],i=t[1],c=V(),a=c.login,r=c.isLogged,s=c.isLoginLoading,d=c.hasLoginError,u=function(e){var t={};t[e.target.name]=e.target.value,i(Object(k.a)(Object(k.a)({},n),t))};return Object(p.jsx)(C.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(p.jsxs)(C.a.Column,{style:{maxWidth:450},children:[Object(p.jsx)(A.a,{as:"h2",color:"teal",textAlign:"center",children:"Log-in to your account"}),Object(p.jsx)(L.a,{size:"large",loading:s,children:Object(p.jsxs)(R.a,{stacked:!0,children:[Object(p.jsx)(L.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"email",onChange:u,value:null===n||void 0===n?void 0:n.email}),Object(p.jsx)(L.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",onChange:u,value:null===n||void 0===n?void 0:n.password}),r&&Object(p.jsx)(y.a,{to:"/welcome/empresas"}),Object(p.jsx)(G.a,{color:"teal",fluid:!0,size:"large",onClick:function(){a(n)},children:"Login"})]})}),d&&Object(p.jsx)(z.a,{error:!0,header:"Error!",content:"Verifique que haya escrito bien sus credenciales."}),Object(p.jsxs)(z.a,{children:["New to us? ",Object(p.jsx)("a",{href:"#",children:"Sign Up"})]})]})})},M=n(13),H=n.n(M),U=n(16),J=(n(487),n(961)),Y=n(946),W=n(953),Q=n(79),K=n(173),X=n(947);var Z={show:function(){return new Promise((function(e,t){m.get("/empresa").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("empresa/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("empresa/create",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("empresa/"+t,e).then((function(e){n(e.data)}))}))},updateLogo:function(e,t){var n=new FormData;return n.append("file",t),new Promise((function(o,i){m.post("empresa/logo/".concat(e),n,{"content-type":t.type}).then((function(e){o(e.data)})).catch((function(e){e.response&&o(e.response.data)}))}))},updateCertificado:function(e,t){var n=new FormData;return n.append("file",t),new Promise((function(o,i){m.post("empresa/certificado/".concat(e),n,{"content-type":t.type}).then((function(e){o(e.data)})).catch((function(e){e.response&&o(e.response.data)}))}))},unlockCertificado:function(e,t){return new Promise((function(n,o){m.post("empresa/unlock/".concat(e),{pass:t}).then((function(e){n(e.data)})).catch((function(e){e.response&&n(e.response.data)}))}))}};var $={show:function(){return new Promise((function(e,t){m.get("/local").then((function(t){e(t.data)}),(function(e){t(!1)}))}))},find:function(e){return new Promise((function(t,n){m.get("local/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("local",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("local/"+t,e).then((function(e){n(e.data)}))}))}};n(177);var ee=function(){var e,t,n=Object(y.g)(),i=Object(y.h)(),c=u("public"),a=Object(o.useContext)(_),s=(a.empresa,a.setEmpresa),d=Object(o.useState)(!1),j=Object(l.a)(d,2),b=j[0],m=j[1],h=Object(o.useState)(!1),v=Object(l.a)(h,2),O=v[0],x=v[1],f=Object(o.useState)([]),g=Object(l.a)(f,2),w=g[0],C=g[1];Object(o.useEffect)((function(){k()}),{instancias:w});var k=function(){var e=Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,$.show();case 3:return t=e.sent,x(!1),e.abrupt("return",C(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(U.a)(H.a.mark((function e(t,n){var o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.find(n);case 2:o=e.sent,s(o),window.window.localStorage.setItem("empresa",JSON.stringify(o)),i({pathname:"/workspace/app"});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){m(!b)};return(null===n||void 0===n?void 0:n.state)&&(null===n||void 0===n||null===(e=n.state)||void 0===e||null===(t=e.reload)||void 0===t?void 0:t.empresa)&&(k(),n.state=null),Object(p.jsxs)("div",{style:{marginTop:"1rem",marginBottom:"1rem"},children:[Object(p.jsx)(r.b,{to:"/welcome/empresas/create",state:{backgroundLocation:n},children:Object(p.jsx)(G.a,{primary:!0,floated:"right",style:{marginBottom:"1rem"},children:"Nueva Empresa"})}),O?Object(p.jsx)(J.a,{active:!0,inverted:!0,children:Object(p.jsx)(Y.a,{size:"large",children:"Cargando..."})}):(null===w||void 0===w?void 0:w.length)?w.map((function(e,t){return Object(p.jsx)(W.a.Group,{divided:!0,children:Object(p.jsxs)(W.a,{children:[Object(p.jsx)(W.a.Image,{id:"logo-".concat(e.id),src:"".concat(c,"/storage/").concat(e.id,"/").concat(e.logo)}),Object(p.jsxs)(W.a.Content,{children:[Object(p.jsx)(W.a.Header,{as:"a",children:e.nombre}),Object(p.jsx)(r.b,{to:"/welcome/locals/create",state:{backgroundLocation:n,model:{empresa_id:e.id}},children:Object(p.jsx)(G.a,{floated:"right",size:"mini",children:Object(p.jsx)(Q.a,{name:"plus"})})}),Object(p.jsx)(r.b,{to:"/welcome/empresas/".concat(e.id),state:{backgroundLocation:n,model:e},children:Object(p.jsx)(G.a,{floated:"right",size:"mini",icon:"pencil"})}),Object(p.jsxs)(W.a.Meta,{children:[e.nombre_comercial," - Ruc ",e.ruc]}),Object(p.jsx)(W.a.Extra,{children:Object(p.jsx)(K.a,{children:"Activo"})}),e.locales.map((function(t){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(X.a,{}),Object(p.jsxs)(W.a.Extra,{children:[Object(p.jsxs)(G.a,{size:"mini",primary:!0,floated:"right",onClick:function(){S(e,t.id)},children:["Ingresar",Object(p.jsx)(Q.a,{name:"right chevron"})]}),Object(p.jsx)(r.b,{to:"/welcome/locals/".concat(t.id),state:{backgroundLocation:n,model:t},children:Object(p.jsx)(G.a,{size:"mini",icon:"pencil",color:"teal",floated:"right",onClick:P})}),Object(p.jsx)(W.a.Header,{as:"h4",children:t.nombre})]},t.id)]})}))]})]},t)},t)})):Object(p.jsx)(p.Fragment,{children:" settings no contenido posees empresa "})]})},te=n(230);var ne=function(e){e.setOpen,e.open;var t=e.size,n=(e.dimmer,e.setTitle),o=e.children,i=Object(y.h)();return Object(p.jsxs)(te.a,{closeIcon:!0,centered:!0,dimmer:"blurring",open:!0,onClose:function(){i(-1)},size:t,children:[Object(p.jsx)(te.a.Header,{children:n}),Object(p.jsx)(te.a.Content,{scrolling:!0,children:o})]})},oe=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C.a.Column,{width:6}),Object(p.jsx)(C.a.Column,{width:8})]})},ie=n(956),ce=n(949),ae=n(967),re=n(106),le=n.n(re),se=function(e){var t=e.empresaContext;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(P.a,{as:"a",text:"Crear Nuevo",className:"button ui mini",children:Object(p.jsxs)(P.a.Menu,{children:[Object(p.jsx)(r.b,{className:"item",to:"/space/ventas/create/1",state:{model:{empresa_id:t.empresa.id,local_id:t.id,tipo_operacion_id:1,detalles:[],fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10)}},children:"Documento de Venta"}),Object(p.jsx)(r.b,{className:"item",to:"/space/ventas/create/2",state:{model:{empresa_id:t.empresa.id,local_id:t.id,tipo_operacion_id:2,detalles:[],fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10)}},children:"Cotizaci\xf3n"}),Object(p.jsx)(r.b,{className:"item",to:"/space/ventas/create/3",state:{model:{empresa_id:t.empresa.id,local_id:t.id,tipo_operacion_id:3,detalles:[],fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10)}},children:"Guia de Remisi\xf3n"}),Object(p.jsx)(P.a.Divider,{}),Object(p.jsx)(P.a.Item,{text:"Cliente",description:"ctrl + o"})]})})})},de=n(948),ue=n(430),je=n.n(ue),be=n(123);function me(){return(me=Object(U.a)(H.a.mark((function e(t,n){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(u(),"/venta/download/").concat(t.empresa_id,"/").concat(t.local_id,"/").concat(t.id,"/").concat(n),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.blob()})).then((function(e){var o="cdn"===n?"zip":n;je()(e,"".concat(t.sunat_documento,".").concat(o))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he={show:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{limit:9,order:{id:"DESC"}},i=be.stringify(o);return new Promise((function(o,c){m.get("/venta/".concat(e,"/").concat(t,"?page=").concat(n,"&").concat(i)).then((function(e){o(e.data)}),(function(e){c(!1)}))}))},find:function(e,t,n){return new Promise((function(o,i){m.get("/venta/".concat(e,"/").concat(t,"/").concat(n)).then((function(e){o(e.data)}),(function(e){i(!1)}))}))},create:function(e){return console.log(e),new Promise((function(t,n){m.post("venta",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return e.transportista_id=null===e.transportista_id?void 0:e.transportista_id,e.ubigeo_destino_id=null===e.ubigeo_destino_id?void 0:e.ubigeo_destino_id,e.ubigeo_partida_id=null===e.ubigeo_partida_id?void 0:e.ubigeo_partida_id,new Promise((function(n,o){m.put("venta/"+e.empresa_id+"/"+e.local_id+"/"+t,e).then((function(e){n(e.data)}))}))},showDetalles:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{limit:20,order:{id:"DESC"}},i=be.stringify(o);return new Promise((function(o,c){m.get("/venta-detalle/".concat(e,"/").concat(t,"?page=").concat(n,"&").concat(i)).then((function(e){o(e.data)}),(function(e){c(!1)}))}))},anular:function(e){return console.log(e),new Promise((function(t,n){m.delete("venta/".concat(e.empresa_id,"/").concat(e.local_id,"/").concat(e.id),e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},sendSunat:function(e){return console.log(e),new Promise((function(t,n){m.get("venta/enviar/".concat(e.empresa_id,"/").concat(e.local_id,"/").concat(e.id),e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},download:function(e,t){return me.apply(this,arguments)}},pe=function(e){var t=e.documento,n=e.handleChangeVenta,i=Object(o.useContext)(_).empresa,c=Object(o.useState)(!1),a=Object(l.a)(c,2),s=a[0],d=a[1];return Object(p.jsxs)(p.Fragment,{children:[t&&Object(p.jsx)(P.a,{as:"a",text:"Convertir Documento",className:"button ui mini teal",children:Object(p.jsxs)(P.a.Menu,{children:[Object(p.jsxs)(P.a.Item,{onClick:function(){d(!s)},children:[Object(p.jsx)("i",{className:"delete icon"}),"Anular"]}),1!==t.tipo_operacion_id&&Object(p.jsxs)(r.b,{className:"item",to:"/space/ventas/create/1",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:null===t||void 0===t?void 0:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:1,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(p.jsx)("i",{className:"file alternate outline icon"}),"Venta"]}),2!==t.tipo_operacion_id&&3!==t.tipo_operacion_id&&Object(p.jsxs)(r.b,{className:"item",to:"/space/ventas/create/3",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:3,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(p.jsx)("i",{className:"file alternate outline icon"}),"Guia de Remisi\xf3n"]}),Object(p.jsxs)(r.b,{className:"item",to:"/space/ventas/create/4",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:4,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(p.jsx)("i",{className:"file alternate outline icon"}),"Nota de Cr\xe9dito"]})]})}),Object(p.jsx)(de.a,{open:s,content:"\xbfSeguro que deseas anular este documento? -Esta operacion es irreversible recuerde que puede editar este documento",onCancel:function(){d(!s)},onConfirm:Object(U.a)(H.a.mark((function e(){var o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.anular(t);case 2:o=e.sent,n(o),console.log(o),d(!s);case 6:case"end":return e.stop()}}),e)})))})]})},ve=function(e){e.query,e.setQuery;var t=e.child,n=Object(o.useState)(!1),i=Object(l.a)(n,2),c=i[0],a=i[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(P.a,{onClick:function(){a(!c)},text:"Filtrar",button:!0,labeled:!0,icon:"filter",open:c,className:"icon mini",children:Object(p.jsx)(P.a.Menu,{onClick:function(e){e.stopPropagation()},style:{width:"45vh"},children:Object(p.jsx)("div",{style:{padding:"15px"},children:t})})})})},Oe=n(26),xe=n(431),fe=n.n(xe),ge=n(927),_e=n(944),we=n(955),Ce=n(966),ye=n(958),ke=n(945),Se=n(41);function Pe(e){return e?new Date(e).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]}var Ve=function(e){var t=e.name,n=e.title,o=e.type,i=e.control,c=e.errors,a=e.width,r=e.readOnly;return Object(p.jsx)(Oe.a,{name:t,control:i,render:function(e){var i,l=e.field,s=l.onChange,d=l.onBlur,u=l.value;return Object(p.jsx)(L.a.Field,{width:a||2,required:"required"===(null===(i=c[t])||void 0===i?void 0:i.type),control:_e.a,label:n,value:"date"===o?Pe(u):u,placeholder:n,type:o,error:c[t]&&{content:c[t].message,pointing:"above"},readOnly:r||!1,onBlur:d,onChange:s})}})},Fe=n(17),De=Fe.a({}).required(),Te=function(e){return Object.keys(null===e||void 0===e?void 0:e.errors).map((function(t){var n="";return null===e||void 0===e||e.errors[t].forEach((function(e){n=n+e+" "})),n}))},Ie={transportista:{title:"Transportista",name:"transportista_id",name_model:"transportista",placeholder:"Buscar...",endPoint:"/cliente",link:"/welcome/clientes/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},clientes:{title:"Cliente",name:"cliente_id",name_model:"cliente",placeholder:"Buscar...",endPoint:"/cliente",link:"/welcome/clientes/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},vendedor:{title:"Vendedor",name:"vendedor_id",name_model:"vendedor",placeholder:"Buscar...",endPoint:"/cliente",link:"/welcome/clientes/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},ubigeo:{title:"Ubigeo",name:"ubigeo_id",name_model:"ubigeo",placeholder:"Busca el ubigeo",endPoint:"/resource/ubigeo",link:!1,params:!1,keys:{text:"provincia",id:"id",concat:["provincia","distrito","departamento"]}},tipo_documento_identy:{title:"Documento",name:"tipo_documento_identy_id",name_model:"tipo_documento_identy",placeholder:"Selecciona",endPoint:"/resource/tipo_documento_identy",link:!1,params:!1,keys:{text:"nombre",id:"id"}},almacen:{title:"Almacen",name:"almacen_id",name_model:"almacen",placeholder:"Selecciona",endPoint:"/almacen/local",link:!1,params:{local_id:!0},keys:{text:"nombre",id:"id"}},serie:{title:"Serie",name:"serie_id",name_model:"serie",placeholder:"Selecciona",endPoint:"/serie/tipo_operacion",link:!1,params:{local_id:!0},keys:{text:"descripcion",id:"id",concat:["descripcion","serie"]}},forma_pago:{title:"Condicion de Pago",name:"forma_pago_id",name_model:"forma_pago",placeholder:"Selecciona",endPoint:"/resource/forma_pago",link:!1,params:!1,keys:{text:"nombre",id:"id"}},moneda:{title:"Moneda",name:"moneda_id",name_model:"moneda",placeholder:"Selecciona",endPoint:"/moneda",link:"/welcome/moneda/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},producto:{title:"Producto",name:"producto",name_model:"producto",placeholder:"Selecciona",endPoint:"/producto",link:"/welcome/producto/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},documento_relacion_search:{title:"Documento Relacionado",name:"documento_relacion_search_id",name_model:"documento_relacion_search",placeholder:"Buscar por serie y numero de correlativo",endPoint:"/venta",link:!1,params:{empresa_id:!0,local_id:!0},keys:{text:"uniqueserie",id:"id",concat:["uniqueserie"]}},motivos_sunat_guia_remision:{title:"Motivo Guia de Remisi\xf3n",name:"motivos_sunat_guia_remision_id",name_model:"motivos_sunat_guia_remision",placeholder:"Seleccione Motivo",endPoint:"/resource/motivos_sunat_guia_remision",link:!1,params:!1,keys:{text:"descripcion",id:"id"}},vehiculo:{title:"Veh\xedculo",name:"vehiculo_id",name_model:"vehiculo",placeholder:"Selecciona",endPoint:"/vehiculo",link:"/welcome/vehiculo/",params:{empresa_id:!0},keys:{text:"descripcion",id:"id",concat:["descripcion"]}},ubigeo_partida:{title:"Ubigeo de Partida",name:"ubigeo_partida_id",name_model:"ubigeo_partida",placeholder:"Buscar ubigeo",endPoint:"/resource/ubigeo",link:!1,params:!1,keys:{text:"provincia",id:"id",concat:["provincia","distrito","departamento"]}},ubigeo_destino:{title:"Ubigeo de Destino",name:"ubigeo_destino_id",name_model:"ubigeo_destino",placeholder:"Buscar Destino",endPoint:"/resource/ubigeo",link:!1,params:!1,keys:{text:"provincia",id:"id",concat:["provincia","distrito","departamento"]}},tipo_producto:{title:"Tipo de producto",name:"tipo_producto_id",name_model:"tipo_producto",placeholder:"Seleccione un tipo de Producto",endPoint:"/resource/tipo_producto",link:!1,params:!1,keys:{text:"nombre",id:"id"}},presentacion:{title:"Presentaci\xf3n",name:"presentacion_id",name_model:"presentacion",placeholder:"Seleccione Presentaci\xf3n",endPoint:"/resource/presentacion",link:!1,params:!1,keys:{text:"nombre",id:"id"}},marca:{title:"Marca",name:"marca_id",name_model:"marca",placeholder:"Seleccione Marca",endPoint:"/producto_features/marcas",link:!1,params:!1,keys:{text:"nombre",id:"id"}},linea:{title:"Linea",name:"linea_id",name_model:"linea",placeholder:"Seleccione Marca",endPoint:"/producto_features/lineas",link:!1,params:!1,keys:{text:"nombre",id:"id"}},categoria:{title:"Categoria",name:"categoria_id",name_model:"categoria",placeholder:"Seleccione Categoria",endPoint:"/producto_features/categorias",link:!1,params:!1,keys:{text:"nombre",id:"id"}},subcategoria:{title:"Sub Categorias",name:"subcategoria_id",name_model:"sub_categoria",placeholder:"Seleccione Sub Categoria",endPoint:"/producto_features/subcategorias",link:!1,params:!1,keys:{text:"nombre",id:"id"}}},Ne=n(123),qe=n.n(Ne);var Ee={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{order:{id:"DESC"}},n=qe.a.stringify(t);return new Promise((function(t,o){m.get("".concat(e,"?").concat(n)).then((function(e){t(e.data)}),(function(e){o(new Error("bad request"))}))}))}},Ae=function(e,t){return!(e&&!e[0])&&(null===e||void 0===e?void 0:e.map((function(e,n){return t.concat?{text:t.concat.map((function(t){return e[t]})).join("-"),value:e[null===t||void 0===t?void 0:t.id],key:n,model:e}:{text:e[null===t||void 0===t?void 0:t.text],value:e[null===t||void 0===t?void 0:t.id],key:n,model:e}})))},Le=function(){var e=Object(U.a)(H.a.mark((function e(t,n,o,i){var c,a,r,l,s,d,u,j,b=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=b.length>4&&void 0!==b[4]?b[4]:null,a=b.length>5?b[5]:void 0,r=b.length>6?b[6]:void 0,(null===i||void 0===i?void 0:i.empresa_id)&&(o+="/"+t.empresa.id),(null===i||void 0===i?void 0:i.local_id)&&(console.log(t.id),o+="/"+t.id),o.search("undefined"),a)for(s=Object.keys(a).map((function(e){return r[e]})),d=0;d<s.length;d++)o+="/"+s[d];if(!("string"===typeof c&&c.length<3)){e.next=9;break}return e.abrupt("return",!1);case 9:return"string"===typeof c&&c.length>3&&(l={filter:[[n.text,"like","%"+c+"%"]]}),"object"===typeof c&&(l=c),l=c?l:null,e.next=14,Ee.show(o,l);case 14:return u=e.sent,e.next=17,Ae(u.data,n);case 17:return j=e.sent,o.search("/vehiculo")>0&&console.log(n,o,i,c,a),e.abrupt("return",j);case 20:case"end":return e.stop()}}),e)})));return function(t,n,o,i){return e.apply(this,arguments)}}(),Re=function(e){var t,n,i=e.model,c=e.moreRouteParams,a=e.empresaContexto,s=e.control,d=e.venta,u=(e.handleChangeVenta,e.setValue),j=e.width,b=e.autoFocus,m=e.onListenChange,h=Object(y.h)(),v=Object(y.g)(),O=Object(o.useState)({isFetching:!1,multiple:!0,searchQuery:null,value:"",options:[]}),x=Object(l.a)(O,2),f=x[0],g=x[1],_=function(){var e=Object(U.a)(H.a.mark((function e(t,n){var o,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.searchQuery,g({isFetching:!0}),e.next=4,Le(a,i.keys,i.endPoint,i.params,o,c,d);case 4:r=e.sent,g(Object(k.a)(Object(k.a)({},f),{options:r,isFetching:!1}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(U.a)(H.a.mark((function e(){var t,n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(a,i.keys,i.endPoint,i.params,{limit:20,order:{id:"DESC"}},c,d);case 2:if(t=e.sent,!d||!d[null===i||void 0===i?void 0:i.name_model]){e.next=15;break}return e.next=6,Ae([d[null===i||void 0===i?void 0:i.name_model]],i.keys);case 6:if(n=e.sent,!t.find((function(e){return e.value===n[0].value}))){e.next=12;break}return e.abrupt("return",t);case 12:return n[0].key=t.length,t.push(n[0]),e.abrupt("return",t);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){w().then((function(e){g(Object(k.a)(Object(k.a)({},f),{options:e,isFetching:!1}))}),(function(e){console.log(e),alert("efecto fallo posiblemente la respuesta no esta en formato adecuado [data]=>{}")}))}),[]),Object(o.useEffect)((function(){var e;if((null===v||void 0===v?void 0:v.state)&&(null===v||void 0===v||null===(e=v.state)||void 0===e?void 0:e.reload)){var t,n,o,c;console.log(v.state,"- Has changed"),console.log(v.state,v.state.reload);var a=Ae([null===(t=v.state)||void 0===t?void 0:t.reload[i.name]],i.keys);g({options:a}),u(i.name,null===v||void 0===v||null===(n=v.state)||void 0===n||null===(o=n.reload[i.name])||void 0===o?void 0:o.id),u(i.name_model,null===v||void 0===v||null===(c=v.state)||void 0===c?void 0:c.reload[null===i||void 0===i?void 0:i.name])}}),[null===(t=v.state)||void 0===t||null===(n=t.reload)||void 0===n?void 0:n[[i.name]]]),Object(p.jsx)(Oe.a,{name:i.name,control:s,render:function(e){var t,n,o=e.field,c=(o.onChange,o.onBlur,o.value);return Object(p.jsxs)(L.a.Field,{width:j||5,children:[Object(p.jsxs)("label",{children:[i.title," ",!(null===v||void 0===v||null===(t=v.state)||void 0===t?void 0:t.backgroundLocation)&&i.link&&!!(null===f||void 0===f||null===(n=f.options)||void 0===n?void 0:n.length)&&!!c&&Object(p.jsx)(Q.a,{onClick:function(){!function(e,t){var n=f.options.find((function(e){return e.value===t}));h(i.link+t,{state:{backgroundLocation:v,model:n.model,empresaContexto:e}})}(a,c)},name:"pencil",size:"small"})]}),Object(p.jsx)(P.a,{searchInput:{autoFocus:b},clearable:!0,options:f.options,placeholder:i.placeholder,onChange:function(e,t){u(i.name,t.value);var n=f.options.find((function(e){return e.value===t.value}));u(null===i||void 0===i?void 0:i.name_model,null===n||void 0===n?void 0:n.model),m&&m(t)},onSearchChange:_,loading:f.isFetching,search:!0,value:parseInt(c),selection:!0,noResultsMessage:i.link?Object(p.jsx)(r.b,{to:i.link+"create",state:{backgroundLocation:v,model:{local_id:a.id,empresa_id:a.empresa.id}},children:"Agregar Nuevo"}):"Sin Resultados"})]})}})},Ge=n(123);var ze={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:20,order:{id:"DESC"}},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Ge.stringify(t);return new Promise((function(t,i){m.get("".concat(e,"?page=").concat(n,"&").concat(o)).then((function(e){t(e.data)}),(function(e){i(!1)}))}))},find:function(e){return new Promise((function(t,n){m.get("empresa/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("producto",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("producto/"+e.empresa_id+"/"+t,e).then((function(e){n(e.data)}))}))}},Be=function(e,t){return e.map((function(e,n){return t.concat?{text:t.concat.map((function(t){return e[t]})).join("-"),value:e[t.id],key:n,model:e}:{text:e[t.text],value:e[t.id],key:n,model:e}}))},Me=function(){var e=Object(U.a)(H.a.mark((function e(t,n,o,i){var c,a,r,l,s,d,u,j,b=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=b.length>4&&void 0!==b[4]?b[4]:null,a=b.length>5?b[5]:void 0,r=b.length>6?b[6]:void 0,console.log(o),(null===i||void 0===i?void 0:i.empresa_id)&&(o=o+"/"+t.empresa.id),console.log(o),(null===i||void 0===i?void 0:i.local_id)&&(o=o+"/"+t.id),console.log(o),a)for(s=Object.keys(a).map((function(e){return r[e]})),d=0;d<s;d++)o=o+"/"+s[d];if(console.log(o),!("string"===typeof c&&c.length<3)){e.next=12;break}return e.abrupt("return",!1);case 12:return console.log(o),"string"===typeof c&&c.length>3&&(l={filter:[[n.text,"like","%"+c+"%"]]}),console.log(o),"object"===typeof c&&(l=c),console.log(o),l=c?l:null,console.log(l),e.next=21,ze.show(o,l);case 21:return u=e.sent,e.next=24,Be(u.data,n);case 24:return j=e.sent,e.abrupt("return",j);case 26:case"end":return e.stop()}}),e)})));return function(t,n,o,i){return e.apply(this,arguments)}}(),He=function(e,t){var n=e.model,i=e.moreRouteParams,c=e.empresaContexto,a=e.venta,r=e.setItemSelected,s=(e.width,Object(o.useState)({isFetching:!1,multiple:!1,searchQuery:null,value:"",options:[]})),d=Object(l.a)(s,2),u=d[0],j=d[1],b=function(){var e=Object(U.a)(H.a.mark((function e(t,o){var r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({isFetching:!0}),e.next=3,Me(c,n.keys,n.endPoint,n.params,i,a);case 3:r=e.sent,j(Object(k.a)(Object(k.a)({},u),{options:r,isFetching:!1}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=Object(o.useRef)(null);return Object(o.useImperativeHandle)(t,(function(){return{open:function(){setTimeout((function(){console.log(m),m.current.open()}),200)}}})),Object(p.jsx)(P.a,{ref:m,fluid:!0,selection:!0,clearable:!0,multiple:!1,search:!0,options:u.options,placeholder:"Buscar Producto \xf3 Servicio",onChange:function(e,t){var n=t.options.find((function(e){return e.value===t.value}));r(n)},onSearchChange:b,loading:u.isFetching,noResultsMessage:"crear boton de creacion"})},Ue=Object(o.forwardRef)(He),Je=n(29),Ye=n(30),We=function(){function e(t,n,o,i,c,a,r){Object(Je.a)(this,e),this.modo=t,this.limite_detraccion=n,this.por_detraccion=o,this.por_percepcion=i,this.limite_percepcion=c,this.por_igv=a,this.decimales=r,this.total_afecto=0,this.total_inafecto=0,this.total_igv=0,this.total_isc=0,this.total_exonerado=0,this.total_descuento_lineal=0,this.total_descuento_global=0,this.total_documento=0,this.total_percepcion=0,this.total_detraccion=0,this.total_documento_fin=0,this.total_peso=0}return Object(Ye.a)(e,[{key:"roundOff",value:function(e){var t=Math.pow(10,8);return Math.round(e*t)/t}},{key:"item",value:function(e,t){return e.afecto?(e=this.isc(e,t),e=this.igv(e,t),e=this.detraccion(e,t)):e=this.inafecto(e,t),(t=Object(k.a)(Object(k.a)({},t),e)).id=void 0,t.producto_id=e.id,t.total_impuestos=0,t.val_descuento=t.val_descuento||0,t.tipo_afecto_igv=t.tipo_afecto_igv||10,t.tipo_producto_id=e.tipo_producto_id,t}},{key:"isc",value:function(e,t){return t&&t.por_isc&&"venta"===this.modo?t.isc=(null===t||void 0===t?void 0:t.precio_venta)*(null===e||void 0===e?void 0:e.por_isc)/100:t.isc=0,e}},{key:"igv",value:function(e,t){return"venta"===this.modo?(t.monto_base_igv=t.precio_venta+t.isc,e.costo_venta=this.roundOff(t.precio_venta/(this.por_igv/100+1)),e.igv=e.costo_venta*(this.por_igv/100),e.por_utilidad=this.roundOff(parseFloat(e.costo_venta)/t.costo_compra*100-100)):t.monto_base_igv=t.precio_venta,e.monto_igv=1.18*t.monto_base_igv-t.monto_base_igv-(t.val_descuento-t.val_descuento/1.18),e}},{key:"inafecto",value:function(e,t){return"venta"===this.modo?(t.monto_base_igv=t.precio_venta,e.costo_venta=this.roundOff(t.precio_venta),e.igv=0,e.por_utilidad=this.roundOff(parseFloat(e.costo_venta)/t.costo_compra*100-100)):t.monto_base_igv=t.precio_venta,e.monto_igv=0,e.isc=0,e}},{key:"detraccion",value:function(e,t){return 2===e.tipo_producto_id||e.por_detraccion>0?(e.check_detraccion_amount=(this.roundOff(t.costo_venta)+this.roundOff(t.isc)+this.roundOff(t.igv))*this.roundOff(t.cantidad),1===e.tipo_producto_id?(e.detraccion=e.check_detraccion_amount*this.roundOff(e.por_detraccion/100),e):2===e.tipo_producto_id?(e.detraccion=e.check_detraccion_amount*this.roundOff(this.por_detraccion/100),console.log("detraccion >>>>>>>>>>>>>>>>",e.detraccion),e):void 0):(e.detraccion=0,e.check_detraccion_amount=0,e)}},{key:"descuentoEfectivo",value:function(e){return e.por_descuento=this.roundOff(100*e.val_descuento/(e.costo_venta+e.igv)).toFixed(2),console.log(e.val_descuento,e.costo_venta,e.igv),e}},{key:"descuentoPorcentaje",value:function(e){return e.val_descuento=this.roundOff(e.por_descuento*(e.costo_venta+e.igv)/100).toFixed(2),console.log(e.val_descuento),e}},{key:"afecto",value:function(e,t){}},{key:"totales",value:function(e,t){this.total_afecto=0,this.total_inafecto=0,this.total_igv=0,this.total_isc=0,this.total_exonerado=0,this.total_descuento_global=t,this.total_descuento_lineal=0,this.total_documento=0,this.total_percepcion=0,this.total_detraccion=0,this.total_documento_fin=0,this.total_peso=0,this.check_detraccion_amount=0;for(var n=0;n<e.length;n++){var o,i=e[n];i.producto.afecto?(this.total_afecto+=this.roundOff(i.precio_unitario*parseFloat(i.cantidad)),this.total_igv+=this.roundOff(i.igv*parseFloat(i.cantidad))):(this.total_inafecto+=this.roundOff(i.precio_unitario*parseFloat(i.cantidad)),this.total_igv+=this.roundOff(i.igv*parseFloat(i.cantidad))),this.total_peso+=this.roundOff((null===i||void 0===i||null===(o=i.producto)||void 0===o?void 0:o.peso)*parseFloat(null===i||void 0===i?void 0:i.cantidad)),this.total_isc+=this.roundOff(null===i||void 0===i?void 0:i.isc)*this.roundOff(null===i||void 0===i?void 0:i.cantidad),this.check_detraccion_amount+=this.roundOff(i.check_detraccion_amount),this.total_detraccion+=this.roundOff(i.detraccion),console.log("total detraccion >>>>>>>>>>>>>>>>>>>>>>>",this.total_detraccion),this.total_descuento_lineal+=this.roundOff(null===i||void 0===i?void 0:i.val_descuento)*this.roundOff(null===i||void 0===i?void 0:i.cantidad),console.log(this.total_descuento_lineal)}return this.check_detraccion_amount>this.limite_detraccion||(this.total_detraccion=0),this.total_documento=this.roundOff(this.roundOff(this.total_igv)+this.roundOff(this.total_afecto)+this.roundOff(this.total_inafecto)+this.roundOff(this.total_isc)),this.por_percepcion>0?this.total_percepcion=this.total_documento*(this.roundOff(this.por_percepcion)/100):this.total_percepcion=0,this.total_documento_fin=this.total_documento+this.total_percepcion-this.roundOff(this.total_descuento_global)-this.roundOff(this.total_descuento_lineal),{total_afecto:this.total_afecto,total_inafecto:this.total_inafecto,total_igv:this.total_igv,total_isc:this.total_isc,total_exonerado:this.total_exonerado,total_descuento_lineal:this.total_descuento_lineal,total_descuento_global:this.roundOff(t),total_documento:this.total_documento,total_percepcion:this.total_percepcion,total_detraccion:this.total_detraccion,total_documento_fin:this.total_documento_fin,total_peso:this.total_peso}}}]),e}(),Qe=n(14),Ke=n(442),Xe=n.n(Ke);n(177);Qe.StyleSheet.create({title:{fontSize:"9px",textAlign:"center"}});var Ze=function(e){var t,n,o,i,c,a,r,l,s,d,j,b,m,h,v,O,x,f,g,_,w,C,y,S,P,V,F,D,T,I,N,q,E,A,L=e.empresa,R=e.status,G=e.qrCodeBase64,z={fontSize:"8px"},B={padding:"5"},M={padding:"2"};return Object(p.jsx)(Qe.Document,{children:Object(p.jsxs)(Qe.Page,{wrap:!0,size:"A4",style:{paddingTop:"35",paddingBottom:"65",paddingHorizontal:"35",fontSize:"9px"},children:[Object(p.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},fixed:!0,children:[Object(p.jsx)(Qe.View,{children:Object(p.jsx)(Qe.Image,{source:{uri:u()+"/logo/"+L.empresa.id},style:{width:"100px",maxWidth:"100px",maxHeigh:"100px"}})}),Object(p.jsxs)(Qe.View,{style:{padding:"10px",fontSize:"7px"},children:[Object(p.jsx)(Qe.Text,{style:M,children:null===L||void 0===L||null===(t=L.empresa)||void 0===t?void 0:t.nombre_comercial}),Object(p.jsx)(Qe.Text,{style:M,children:null===L||void 0===L||null===(n=L.empresa)||void 0===n?void 0:n.direccion}),Object(p.jsxs)(Qe.Text,{style:M,children:["Email: ",null===L||void 0===L||null===(o=L.empresa)||void 0===o?void 0:o.email," Tlf: ",null===L||void 0===L||null===(i=L.empresa)||void 0===i?void 0:i.telefono," ","Cel.",null===L||void 0===L||null===(c=L.empresa)||void 0===c?void 0:c.celular," "]})]}),Object(p.jsxs)(Qe.View,{style:{border:"1px",padding:"10px",alignItems:"center"},children:[Object(p.jsxs)(Qe.Text,{children:["RUC ",null===L||void 0===L||null===(a=L.empresa)||void 0===a?void 0:a.ruc]}),Object(p.jsx)(Qe.Text,{children:null===R||void 0===R||null===(r=R.serie)||void 0===r?void 0:r.descripcion}),Object(p.jsxs)(Qe.Text,{children:[null===R||void 0===R||null===(l=R.serie)||void 0===l?void 0:l.serie," ",null===R||void 0===R?void 0:R.correlativo]})]})]}),Object(p.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"row",alignItems:"space-between",border:"1px",padding:"5",marginTop:"5"},fixed:!0,children:[Object(p.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"column",justifyContent:"",minWidth:"50%",maxWidth:"50%",fontSize:"7px",alignItems:"flex-start"},children:[Object(p.jsxs)(Qe.Text,{style:M,children:["Cliente: ",null===R||void 0===R||null===(s=R.cliente)||void 0===s?void 0:s.nombre_comercial]}),Object(p.jsxs)(Qe.Text,{style:M,children:[1===(null===R||void 0===R||null===(d=R.cliente)||void 0===d?void 0:d.tipo_documento_identy_id)?"DNI":2===(null===R||void 0===R||null===(j=R.cliente)||void 0===j?void 0:j.tipo_documento_identy_id)?"RUC":"DOCUMENTO",": ",null===R||void 0===R||null===(b=R.cliente)||void 0===b?void 0:b.numero_documento]}),Object(p.jsxs)(Qe.Text,{style:M,children:["Direcci\xf3n: ",null===R||void 0===R||null===(m=R.cliente)||void 0===m?void 0:m.direccion]}),Object(p.jsxs)(Qe.Text,{style:M,children:["Ubigeo: ",null===R||void 0===R||null===(h=R.cliente)||void 0===h?void 0:h.ubigeo.provincia," ",null===R||void 0===R||null===(v=R.cliente)||void 0===v?void 0:v.ubigeo.distrito," ",null===R||void 0===R||null===(O=R.cliente)||void 0===O?void 0:O.ubigeo.departamento]})]}),Object(p.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:"50%",maxWidth:"50%",fontSize:"7px"},children:[Object(p.jsx)(Qe.Text,{style:M,children:"Fecha Emi: 08/09/2021"}),Object(p.jsx)(Qe.Text,{style:M,children:"Fecha Reg: 08/09/2021"}),Object(p.jsx)(Qe.Text,{style:M,children:"Condici\xf3n: Cr\xe9dito"}),Object(p.jsx)(Qe.Text,{style:M,children:"\xa0"})]})]}),Object(p.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"row",alignItems:"space-evenly",marginTop:"5px"},fixed:!0,children:[Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:50,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"center"}),children:"C\xf3digo"})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:310,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)({},z),children:"Descripcion"})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:50,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:"Cant."})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:"Present."})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:"Precio"})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,borderBottom:"1px",borderLeft:"1px",borderTop:"1px",borderRight:"1px"}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:"Importe"})})]}),null===R||void 0===R?void 0:R.detalles.map((function(e,t,n){var o,i,c,a=n.length;return Object(p.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"row",marginBottom:"1",fontSize:"9px"},children:[Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:50,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"center"}),children:null===e||void 0===e||null===(o=e.producto)||void 0===o?void 0:o.codigo})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:310,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)({},z),children:null===e||void 0===e||null===(i=e.producto)||void 0===i?void 0:i.nombre})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:50,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:null===e||void 0===e?void 0:e.cantidad})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:null===e||void 0===e||null===(c=e.presentacion)||void 0===c?void 0:c.nombre})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:null===e||void 0===e?void 0:e.precio_unitario.toFixed(3)})}),Object(p.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},B),{width:70,marginTop:"-2px",borderLeft:"1px",borderRight:"1px",borderBottom:a===t+1?"1px":0}),children:Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},z),{textAlign:"right"}),children:((null===e||void 0===e?void 0:e.cantidad)*(null===e||void 0===e?void 0:e.precio_unitario)).toFixed(3)})})]},t)})),Object(p.jsxs)(Qe.View,{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",marginBottom:"1",fontSize:"9px",padding:"10"},children:[Object(p.jsxs)(Qe.View,{children:[Object(p.jsxs)(Qe.Text,{style:M,children:["Son:"," ",(A=Xe()(null===R||void 0===R?void 0:R.total_documento_fin,{lang:"es"}),A.charAt(0).toUpperCase()+A.slice(1))," ","con 00/100 ",null===R||void 0===R||null===(x=R.moneda)||void 0===x?void 0:x.nombre.toLowerCase()]}),Object(p.jsx)(Qe.Image,{source:{uri:G},style:{width:"80px",marginBottom:"10px"}}),(null===R||void 0===R?void 0:R.detalle)&&Object(p.jsxs)(Qe.Text,{style:M,children:["Observaci\xf3n: ",null===R||void 0===R?void 0:R.detalle," "]}),(null===L||void 0===L||null===(f=L.empresa)||void 0===f?void 0:f.detalle)&&Object(p.jsxs)(Qe.Text,{style:M,children:[null===L||void 0===L||null===(g=L.empresa)||void 0===g?void 0:g.detalle," "]})]}),Object(p.jsxs)(Qe.View,{style:{fontSize:"8px",flexDirection:"row",justifyContent:"space-between"},children:[Object(p.jsxs)(Qe.View,{style:{flexDirection:"column",width:"50px"},children:[Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Afecto"}),Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Inafecto"}),Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"ISC"}),Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"IGV"}),Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Total"}),Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Percepci\xf3n"}),Object(p.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:"Total"})]}),Object(p.jsxs)(Qe.View,{style:{flexDirection:"column",width:"80px",textAlign:"right"},children:[Object(p.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===R||void 0===R||null===(_=R.moneda)||void 0===_?void 0:_.simbolo," ",null===R||void 0===R||null===(w=R.total_afecto)||void 0===w?void 0:w.toFixed(3)]}),Object(p.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===R||void 0===R||null===(C=R.moneda)||void 0===C?void 0:C.simbolo," ",null===R||void 0===R||null===(y=R.total_inafecto)||void 0===y?void 0:y.toFixed(3)]}),Object(p.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===R||void 0===R||null===(S=R.moneda)||void 0===S?void 0:S.simbolo," ",null===R||void 0===R||null===(P=R.total_isc)||void 0===P?void 0:P.toFixed(3)]}),Object(p.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===R||void 0===R||null===(V=R.moneda)||void 0===V?void 0:V.simbolo," ",null===R||void 0===R||null===(F=R.total_igv)||void 0===F?void 0:F.toFixed(3)]}),Object(p.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===R||void 0===R||null===(D=R.moneda)||void 0===D?void 0:D.simbolo," ",null===R||void 0===R||null===(T=R.total_documento)||void 0===T?void 0:T.toFixed(3)]}),Object(p.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===R||void 0===R||null===(I=R.moneda)||void 0===I?void 0:I.simbolo," ",null===R||void 0===R||null===(N=R.total_percepcion)||void 0===N?void 0:N.toFixed(3)]}),Object(p.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},M),{borderBottom:"1px"}),children:[null===R||void 0===R||null===(q=R.moneda)||void 0===q?void 0:q.simbolo," ",null===R||void 0===R||null===(E=R.total_documento_fin)||void 0===E?void 0:E.toFixed(3)]})]})]})]}),Object(p.jsxs)(Qe.View,{style:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},fixed:!0,children:[Object(p.jsx)(Qe.Text,{style:{color:"black",fontSize:"10px",top:50},render:function(e){var t=e.pageNumber,n=e.totalPages;return"".concat(t," / ").concat(n,"\n              ")}}),Object(p.jsx)(Qe.Text,{style:{fontSize:"7px"},children:"Consulta este Comprobante en FivipSystem.com/comprobante"}),Object(p.jsx)(Qe.Image,{source:{uri:u()+"/logo/footer_fivip"},style:{width:"100px",maxWidth:"100px",maxHeigh:"100px",left:465}})]})]})})},$e=function(e){var t,n,i,c,a,r,s,d,u,b,m,h,v,O,x,f,g,w,V,F,D,I,N,q,E,B,M,J,Y,W,K,X,Z,$,ee,te,ne,oe,ie,ae,re,le,se,ue,je,be,me,pe,ve,xe,Pe,Fe,Ne=e.loading,qe=e.selected,Ee=e.handleChangeVenta,Ae=e.editionMode,Le=e.state,Ge=e.formatPrint,ze=e.setFormatPrint,Be=Object(o.createRef)(),Me=Object(y.h)(),He=Object(y.g)(),Je=Object(o.useContext)(_),Ye=Je.empresa,Ke=Je.setEmpresa,Xe=Je.impresion,$e=Object(o.useContext)(T),et=$e.setDocumento,tt=$e.ventaDefaultContent,nt=Object(o.useState)(!1),ot=Object(l.a)(nt,2),it=ot[0],ct=ot[1],at=Object(o.useState)(!1),rt=Object(l.a)(at,2),lt=rt[0],st=rt[1],dt=Object(o.useState)(!1),ut=Object(l.a)(dt,2),jt=ut[0],bt=ut[1],mt=Object(o.useState)(!1),ht=Object(l.a)(mt,2),pt=ht[0],vt=ht[1],Ot=Object(o.useState)(!1),xt=Object(l.a)(Ot,2),ft=xt[0],gt=xt[1],_t=Object(o.useState)(2),wt=Object(l.a)(_t,2),Ct=wt[0],yt=wt[1],kt=Object(o.useState)(!1),St=Object(l.a)(kt,2),Pt=St[0],Vt=St[1],Ft=Object(o.useState)(!1),Dt=Object(l.a)(Ft,2),Tt=Dt[0],It=Dt[1],Nt=Object(o.useState)(null),qt=Object(l.a)(Nt,2),Et=(qt[0],qt[1]),At=Object(o.useState)(!1),Lt=Object(l.a)(At,2),Rt=Lt[0],Gt=Lt[1],zt=Object(o.useState)([{key:0}]),Bt=Object(l.a)(zt,2),Mt=Bt[0],Ht=Bt[1],Ut=Object(o.useState)({model:{precio_venta:0,cantidad:0,descuento:0}}),Jt=Object(l.a)(Ut,2),Yt=Jt[0],Wt=Jt[1],Qt=Object(o.useState)([]),Kt=Object(l.a)(Qt,2),Xt=(Kt[0],Kt[1]),Zt=(Object(o.useRef)(null),function(e,t){var n=t.index,o=Ct.activeIndex;yt(o===n?-1:n)});qe||(qe=Le?Object(k.a)(Object(k.a)({},Le),tt):{serie:{tipo_operacion_id:1},tipo_operacion_id:1,detalles:[],documento_relacion_search:void 0,documento_relacion_search_id:void 0});var $t=Object(Oe.e)({resolver:Object(Se.a)(De),defaultValues:Object(k.a)({},qe)||Le.model}),en=$t.control,tn=$t.handleSubmit,nn=$t.formState.errors,on=$t.setValue,cn=$t.reset,an=$t.watch,rn=an();Object(o.useEffect)((function(){var e=an((function(e){et(e)}));return function(){return e.unsubscribe()}}),[an,et]);var ln=new We("venta",Ye.empresa.limite_detraccion,Ye.empresa.por_detraccion,Ye.empresa.por_percepcion,null,18,8);Object(o.useEffect)((function(){var e,t=null===Rt||void 0===Rt||null===(e=Rt.model)||void 0===e?void 0:e.precios.map((function(e,t){var n;return{key:t,text:null===e||void 0===e||null===(n=e.presentacion)||void 0===n?void 0:n.abbr,value:null===e||void 0===e?void 0:e.id,model:e}}));return Ht(t),function(){Ht(!1)}}),[Rt]),Object(o.useEffect)((function(){if(qe){var e;ze({status:!1});var t=null===(e=document)||void 0===e?void 0:e.querySelector("canvas");gt(null===t||void 0===t?void 0:t.toDataURL("image/jpg",.3)),Et(qe),et(qe)}return function(){Et(!1)}}),[]);var sn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ln.totales(e,t);Object.keys(n).map((function(e){return on(e,n[e]),e}))},dn=function(e){var t=e.productoChoose,n=e.itemSelected;return new Promise((function(e,o){t&&n&&n.model&&t.model.costo_venta&&t.model.cantidad?e({productoChoose:t,itemSelected:n}):o(!1)}))},un=function(e){"Tab"!==e.key&&"Enter"!==e.key||(jn(),Be.current.querySelector('[aria-selected="true"]')&&Be.current.querySelector(".clear").click(),vn.current.open())},jn=function(){var e=Object(U.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vt(!0),e.next=3,dn({productoChoose:Yt,itemSelected:Rt}).then((function(e){var t=Yt.model;t.codigo=Yt.model.codigo,t.monto_igv=Yt.model.igv,t.precio_unitario=Yt.model.costo_venta,t.monto_precio_unitario=Yt.model.costo_venta,t.producto={nombre:Rt.model.nombre,peso:Rt.model.peso,afecto:Rt.model.afecto};var n=rn.detalles||[];n.push(t),on("detalles",n),sn(rn.detalles),vt(!1),Wt({model:{precio_venta:0,cantidad:0,descuento:0}})}),(function(e){j.b.error("complete el formulario de ingreso de producto"),vt(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bn=function(){var e;if(!(null===(e=He.state)||void 0===e?void 0:e.backgroundLocation))return ct(!1),!1;Me(He.state.backgroundLocation.pathname,{state:{reload:{ventas:!0}}})},mn=function(e,t){if(!t)return!1;"precio_venta"===t.name&&(Yt||Yt.model||(Yt.model.cantidad=0));var n={};n[t.name]=t.value;var o=Object(k.a)(Object(k.a)({},Yt.model),n),i=ln.item(Rt.model,o),c=Yt;c.model=i,Wt(Object(k.a)({},c))},hn=function(){on("correlativo",parseFloat(null===rn||void 0===rn?void 0:rn.correlativo)+1),on("detalles",[]),on("total_afecto",0),on("total_descuento_global",0),on("total_descuento_lineal",0),on("total_detraccion",0),on("total_documento",0),on("total_documento_fin",0),on("total_exonerado",0),on("total_igv",0),on("total_inafecto",0),on("total_isc",0),on("total_percepcion",0),on("total_peso",0)},pn=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id){e.next=24;break}return ct(!0),e.next=4,he.update(t,t.id);case 4:if(n=e.sent,Le){e.next=20;break}if(Ee(t),Ye.empresa.id!==n.id){e.next=16;break}return Ye.empresa=n,e.next=11,Ke(Ye);case 11:return e.next=13,ct(!1);case 13:bn(),e.next=18;break;case 16:bn(),ct(!1);case 18:e.next=21;break;case 20:ct(!1);case 21:(null===Xe||void 0===Xe?void 0:Xe.after_save)&&ze({status:!(null===Ge||void 0===Ge?void 0:Ge.status),from:"update"}),e.next=30;break;case 24:return e.next=26,he.create(t);case 26:return o=e.sent,ct(!1),(null===o||void 0===o?void 0:o.errors)?(Le.id&&Ee(t),st(Te(o))):((null===Xe||void 0===Xe?void 0:Xe.after_save)&&ze({status:!(null===Ge||void 0===Ge?void 0:Ge.status),from:"create"}),st(null),bn()),e.abrupt("return",o);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vn=Object(o.useRef)();return Object(p.jsx)("div",{style:He.pathname.search("/space/ventas/")?{overflowY:"scroll",height:"85vh",marginTop:"1vh"}:{overflowY:"scroll",height:"95vh",marginTop:"0vh"},children:Ge&&!(null===Ge||void 0===Ge?void 0:Ge.status)?Object(p.jsxs)(L.a,{onSubmit:tn(pn),noValidate:!0,children:[Object(p.jsxs)(R.a,{loading:Ne,children:[Object(p.jsxs)(L.a.Group,{children:[Ae?Object(p.jsx)(Re,{model:Ie.serie,moreRouteParams:{tipo_operacion_id:null===(i=qe)||void 0===i||null===(c=i.serie)||void 0===c?void 0:c.tipo_operacion_id},empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:4,onListenChange:function(e){var t,n=e.options,o=e.value,i=n.find((function(e,t){return e.value===o}));on("correlativo",(null===i||void 0===i||null===(t=i.model)||void 0===t?void 0:t.correlativo)||1)}}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Serie",placeholder:"Seleccione Serie",value:(null===rn||void 0===rn||null===(t=rn.serie)||void 0===t?void 0:t.descripcion)+"-"+(null===rn||void 0===rn||null===(n=rn.serie)||void 0===n?void 0:n.serie),readOnly:!0,width:4}),Ae?Object(p.jsx)(Ve,{name:"correlativo",title:"Correlativo",control:en,errors:nn,type:"number",width:2}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Correlativo",placeholder:"Selecione",value:null===rn||void 0===rn?void 0:rn.correlativo,readOnly:!0,width:2}),Ae?Object(p.jsx)(Re,{model:Ie.clientes,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:10}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Cliente",placeholder:"Selecione",value:null===rn||void 0===rn||null===(a=rn.cliente)||void 0===a?void 0:a.nombre,readOnly:!0,width:10})]}),Object(p.jsxs)(L.a.Group,{children:[Ae?Object(p.jsx)(Re,{model:Ie.almacen,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:4}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Almacen",placeholder:"Selecione",value:null===rn||void 0===rn||null===(r=rn.almacen)||void 0===r?void 0:r.nombre,readOnly:!0,width:4}),Ae?Object(p.jsx)(Re,{model:Ie.forma_pago,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:3}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Condici\xf3n de Pago",placeholder:"Selecione",value:null===rn||void 0===rn||null===(s=rn.forma_pago)||void 0===s?void 0:s.nombre,readOnly:!0,width:3}),Ae?Object(p.jsx)(Ve,{name:"fecha_emision",title:"Fecha Emisi\xf3n",control:en,errors:nn,type:"date",width:3}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Fecha de Emisi\xf3n",placeholder:"Selecione",value:null===rn||void 0===rn?void 0:rn.fecha_emision,readOnly:!0,width:3}),Ae?Object(p.jsx)(Ve,{name:"fecha_registro",title:"Fecha Registro",control:en,errors:nn,type:"date",width:3}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Fecha de Registro",placeholder:"Selecione",value:null===rn||void 0===rn?void 0:rn.fecha_emision,readOnly:!0,width:3}),Ae?Object(p.jsx)(Re,{model:Ie.moneda,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:3}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Moneda",placeholder:"Selecione",value:null===rn||void 0===rn?void 0:rn.moneda.nombre,readOnly:!0,width:3})]}),Ae&&Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(L.a.Field,{width:6,children:Object(p.jsx)(Ue,{empresaContexto:Ye,model:Ie.producto,setItemSelected:Gt,ref:vn})}),Object(p.jsx)(L.a.Field,{width:2,children:Object(p.jsx)(ge.a,{innerRef:Be,children:Object(p.jsx)(P.a,{fluid:!0,clearable:!0,options:Mt,onChange:function(e,t){var n,o=null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.find((function(e){return(null===t||void 0===t?void 0:t.value)===e.value}));Wt(o)},selection:!0})})}),Object(p.jsx)(L.a.Field,{width:3,children:Object(p.jsx)(ce.a,{content:"Precio de Venta (Con IGV Incluido)",trigger:Object(p.jsx)(_e.a,{label:(null===Yt||void 0===Yt||null===(d=Yt.model)||void 0===d?void 0:d.val_descuento)?{tag:!0,content:((null===Yt||void 0===Yt||null===(u=Yt.model)||void 0===u?void 0:u.precio_venta)-(null===Yt||void 0===Yt||null===(b=Yt.model)||void 0===b?void 0:b.val_descuento)).toFixed(2),color:"teal"}:{icon:"money"},labelPosition:(null===Yt||void 0===Yt||null===(m=Yt.model)||void 0===m?void 0:m.val_descuento)?"right":"right corner",type:"number",name:"precio_venta",value:null===Yt||void 0===Yt||null===(h=Yt.model)||void 0===h?void 0:h.precio_venta,onChange:mn,placeholder:"Precio"})})}),Object(p.jsx)(L.a.Field,{width:2,children:Object(p.jsx)(ce.a,{content:"Cantidad de Items",trigger:Object(p.jsx)(_e.a,{label:{icon:"boxes"},labelPosition:"right corner",type:"number",name:"cantidad",value:null===Yt||void 0===Yt||null===(v=Yt.model)||void 0===v?void 0:v.cantidad,placeholder:"Cantidad",onChange:mn})})}),Object(p.jsx)(L.a.Field,{width:2,children:Object(p.jsx)(ce.a,{content:"Descuento en ".concat(Tt?"Porcentaje":"Efectivo"),trigger:Object(p.jsx)("div",{children:Tt?Object(p.jsxs)(_e.a,{type:"number",name:"por_descuento",value:null===Yt||void 0===Yt||null===(O=Yt.model)||void 0===O?void 0:O.por_descuento,placeholder:"Descuento Porcentaje",onChange:function(e,t){var n=t.name,o=t.value,i={};i[n]=Number(o);var c=Object(k.a)(Object(k.a)({},Yt.model),i),a=Object(k.a)(Object(k.a)({},Rt.model),c),r=ln.descuentoPorcentaje(a),l=Yt;l.model=r,l.model=Object(k.a)(Object(k.a)({},l.model),i),Wt(Object(k.a)({},l))},onKeyDown:un,children:[Object(p.jsx)("input",{}),Object(p.jsx)(G.a,{icon:"percent",style:{marginLeft:"10px"},onClick:function(e){e.preventDefault(),It(!Tt)}})]}):Object(p.jsxs)(_e.a,{type:"number",name:"val_descuento",value:null===Yt||void 0===Yt||null===(x=Yt.model)||void 0===x?void 0:x.val_descuento,placeholder:"Descuento Valor",onChange:function(e,t){var n=t.name,o=t.value,i={};i[n]=Number(o);var c=Object(k.a)(Object(k.a)({},Yt.model),i),a=Object(k.a)(Object(k.a)({},Rt.model),c),r=ln.descuentoEfectivo(a),l=Yt;l.model=r,l.model=Object(k.a)(Object(k.a)({},l.model),i),Wt(Object(k.a)({},l))},onKeyDown:un,children:[Object(p.jsx)("input",{}),Object(p.jsx)(G.a,{icon:"money",style:{marginLeft:"10px"},onClick:function(e){e.preventDefault(),It(!Tt)}})]})})})}),Object(p.jsx)(L.a.Field,{width:1,children:Object(p.jsxs)(G.a,{as:"a",fluid:!0,color:"teal",animated:"vertical",onClick:jn,disabled:pt,children:[Object(p.jsx)(G.a.Content,{hidden:!0,children:"Agregar"}),Object(p.jsx)(G.a.Content,{visible:!0,children:Object(p.jsx)(Q.a,{name:"arrow down"})})]})})]}),Object(p.jsxs)(C.a,{children:[Object(p.jsxs)(C.a.Column,{width:12,style:{overflowY:"scroll",height:"55vh"},children:[Object(p.jsxs)(we.a,{compact:!0,definition:!0,striped:!0,children:[Object(p.jsx)(we.a.Header,{fullWidth:!0,children:Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.HeaderCell,{width:1}),Object(p.jsx)(we.a.HeaderCell,{width:8,children:"Producto \xf3 Servicio"}),Object(p.jsx)(we.a.HeaderCell,{textAlign:"right",width:2,children:Object(p.jsx)("abbr",{title:"Precio de venta con IGV",children:null===rn||void 0===rn||null===(f=rn.moneda)||void 0===f?void 0:f.simbolo})}),Object(p.jsx)(we.a.HeaderCell,{textAlign:"right",width:2,children:Object(p.jsx)("abbr",{title:"Cantidad",children:"Cant"})}),Object(p.jsx)(we.a.HeaderCell,{textAlign:"right",width:2,children:Object(p.jsx)("abbr",{title:"Descuento",children:"Desc"})}),Object(p.jsx)(we.a.HeaderCell,{textAlign:"right",width:1})]})}),Object(p.jsx)(we.a.Body,{children:null===rn||void 0===rn||null===(g=rn.detalles)||void 0===g?void 0:g.map((function(e,t){return Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{collapsing:!0,children:Object(p.jsx)(Ce.a,{slider:!0})}),Object(p.jsx)(we.a.Cell,{children:e.producto.nombre}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:e.val_descuento?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("s",{children:e.precio_venta?Number(null===e||void 0===e?void 0:e.precio_venta).toFixed(3):(0).toFixed(3)}),Object(p.jsx)("span",{style:{marginLeft:"10px"},children:e.precio_venta?Number((null===e||void 0===e?void 0:e.precio_venta)-e.val_descuento).toFixed(3):(0).toFixed(3)})]}):e.precio_venta?Number(null===e||void 0===e?void 0:e.precio_venta).toFixed(3):(0).toFixed(3)}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:e.cantidad?Number(null===e||void 0===e?void 0:e.cantidad).toFixed(3):(0).toFixed(3)}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:e.val_descuento?Number(null===e||void 0===e?void 0:e.val_descuento).toFixed(3):(0).toFixed(3)}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:Object(p.jsx)(G.a,{circular:!0,as:"a",size:"mini",onClick:function(){!function(e){var t=rn.detalles;t.splice(e,1),Xt(t),on("detalles",t),sn(rn.detalles,rn.total_descuento_global)}(t)},disabled:!Ae,icon:"trash"})})]},t)}))})]}),rn.is_nulled?Object(p.jsx)(R.a,{placeholder:!0,children:Object(p.jsxs)(A.a,{icon:!0,children:[Object(p.jsx)(Q.a,{name:"ban"}),"Documento sin detalles."]})}):Object(p.jsx)(p.Fragment,{})]}),Object(p.jsxs)(C.a.Column,{floated:"right",width:4,children:[Object(p.jsx)(we.a,{compact:"very",color:"black",children:Object(p.jsxs)(we.a.Body,{children:[Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:"Peso "}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:["Kg ",null===rn||void 0===rn||null===(w=rn.total_peso)||void 0===w?void 0:w.toFixed(3)]})})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:" Afecto "}),Object(p.jsxs)(we.a.Cell,{textAlign:"right",children:[Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(V=rn.moneda)||void 0===V?void 0:V.simbolo," ",null===rn||void 0===rn||null===(F=rn.total_afecto)||void 0===F?void 0:F.toFixed(3)]})," "]})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:" Inafecto "}),Object(p.jsxs)(we.a.Cell,{textAlign:"right",children:[Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(D=rn.moneda)||void 0===D?void 0:D.simbolo," ",null===rn||void 0===rn||null===(I=rn.total_inafecto)||void 0===I?void 0:I.toFixed(3)]})," "]})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:" ISC "}),Object(p.jsxs)(we.a.Cell,{textAlign:"right",children:[Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(N=rn.moneda)||void 0===N?void 0:N.simbolo," ",null===(q=rn.total_isc)||void 0===q?void 0:q.toFixed(3)]})," "]})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:" IGV "}),Object(p.jsxs)(we.a.Cell,{textAlign:"right",children:[Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(E=rn.moneda)||void 0===E?void 0:E.simbolo," ",null===rn||void 0===rn||null===(B=rn.total_igv)||void 0===B?void 0:B.toFixed(3)]})," "]})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:"Descuento Items"}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(M=rn.moneda)||void 0===M?void 0:M.simbolo,null===rn||void 0===rn||null===(J=rn.total_descuento_lineal)||void 0===J?void 0:J.toFixed(3)]})})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:"Descuento Global"}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(Y=rn.moneda)||void 0===Y?void 0:Y.simbolo," ",null===rn||void 0===rn||null===(W=rn.total_descuento_global)||void 0===W?void 0:W.toFixed(3)]})})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:"Documento"}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(K=rn.moneda)||void 0===K?void 0:K.simbolo," ",null===rn||void 0===rn||null===(X=rn.total_documento)||void 0===X?void 0:X.toFixed(3)]})})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:" Percepci\xf3n "}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(Z=rn.moneda)||void 0===Z?void 0:Z.simbolo," ",null===rn||void 0===rn||null===($=rn.total_percepcion)||void 0===$?void 0:$.toFixed(3)]})})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{textAlign:"right",children:"Detracci\xf3n"}),Object(p.jsx)(we.a.Cell,{textAlign:"right",children:Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(ee=rn.moneda)||void 0===ee?void 0:ee.simbolo," ",null===rn||void 0===rn||null===(te=rn.total_detraccion)||void 0===te?void 0:te.toFixed(3)]})})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{active:!0,textAlign:"right",children:"Total"}),Object(p.jsx)(we.a.Cell,{active:!0,textAlign:"right",children:rn.is_free?Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(ie=rn.moneda)||void 0===ie?void 0:ie.simbolo," ",(0).toFixed(3)]}):Object(p.jsxs)("strong",{children:[null===rn||void 0===rn||null===(ne=rn.moneda)||void 0===ne?void 0:ne.simbolo," ",null===rn||void 0===rn||null===(oe=rn.total_documento_fin)||void 0===oe?void 0:oe.toFixed(3)]})})]})]})}),Ae&&Object(p.jsxs)("div",{children:[Object(p.jsx)(G.a,{loading:it,disabled:it,content:"Guardar",primary:!0,fluid:!0}),Object(p.jsx)(G.a,{style:{marginTop:"1vh"},fluid:!0,as:"a",content:"Deshacer Cambios",onClick:function(){cn(qe)}}),Object(p.jsx)(ye.a,{as:S.a,vertical:!0,fluid:!0,children:Object(p.jsxs)(S.a.Item,{children:[Object(p.jsx)(ye.a.Title,{active:!0===Pt,content:"Mas Opciones",index:0,onClick:function(){Vt(!Pt)}}),Object(p.jsx)(ye.a.Content,{active:!0===Pt,content:Object(p.jsxs)(L.a.Group,{grouped:!0,children:[Object(p.jsx)(L.a.Checkbox,{label:"Es gratuita",name:"is_free",checked:rn.is_free,onChange:function(){on("is_free",!rn.is_free)}}),Object(p.jsx)(L.a.Field,{children:Object(p.jsx)(_e.a,{label:{content:"Desc"},labelPosition:"right",placeholder:"Descuento Global",type:"number",value:rn.total_descuento_global,onChange:function(e,t){on("total_descuento_global",e.target.value),sn(rn.detalles,e.target.value)}})})]})})]})})]})]})]}),(null===(ae=Object.keys(nn))||void 0===ae?void 0:ae.length)?Object(p.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===lt||void 0===lt?void 0:lt.length)&&Object(p.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:lt})]}),Object(p.jsx)(de.a,{open:jt,content:"Seguro de Deshacer los cambios, perderas los datos modificados",onCancel:function(){return bt(!1)},onConfirm:function(e){cn(qe)}}),3===rn.tipo_operacion_id&&Object(p.jsxs)(R.a,{color:"teal",inverted:!0,style:{marginTop:"1vh"},loading:Ne,children:[Object(p.jsxs)(L.a.Group,{children:[Ae?Object(p.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.motivos_sunat_guia_remision,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:4}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Motivo de la Guia de Remision",placeholder:"Selecione",value:null===rn||void 0===rn||null===(re=rn.motivos_sunat_guia_remision)||void 0===re?void 0:re.descripcion,readOnly:!0,width:4}),Ae?Object(p.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.transportista,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:6}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Transportista",placeholder:"Selecione",value:null===rn||void 0===rn||null===(le=rn.transportista)||void 0===le?void 0:le.nombre,readOnly:!0,width:6}),Ae?Object(p.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.vehiculo,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:6}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Veh\xedculo",placeholder:"Selecione",value:null===rn||void 0===rn||null===(se=rn.vehiculo)||void 0===se?void 0:se.descripcion,readOnly:!0,width:6})]}),Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Ve,{name:"direccion_partida",title:"Direccion de Partida",control:en,errors:nn,type:"text",width:8,readOnly:!Ae}),Ae?Object(p.jsx)(Re,{model:Ie.ubigeo_partida,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:8}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Ubigeo de Partida",placeholder:"Selecione",value:(null===rn||void 0===rn?void 0:rn.ubigeo_partida)?(null===rn||void 0===rn||null===(ue=rn.ubigeo_partida)||void 0===ue?void 0:ue.provincia)+"-"+(null===rn||void 0===rn||null===(je=rn.ubigeo_partida)||void 0===je?void 0:je.distrito)+"-"+(null===rn||void 0===rn||null===(be=rn.ubigeo_partida)||void 0===be?void 0:be.departamento):"",readOnly:!0,width:8})]}),Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Ve,{name:"direccion_destino",title:"Direccion de Destino",control:en,errors:nn,type:"text",width:8,readOnly:!Ae}),Ae?Object(p.jsx)(Re,{model:Ie.ubigeo_destino,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:8}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Ubigeo de Destino",placeholder:"Selecione",value:(null===rn||void 0===rn?void 0:rn.ubigeo_destino)?(null===rn||void 0===rn||null===(me=rn.ubigeo_destino)||void 0===me?void 0:me.provincia)+"-"+(null===rn||void 0===rn||null===(pe=rn.ubigeo_destino)||void 0===pe?void 0:pe.distrito)+"-"+(null===rn||void 0===rn||null===(ve=rn.ubigeo_destino)||void 0===ve?void 0:ve.departamento):"",readOnly:!0,width:8})]})]}),Object(p.jsxs)(R.a,{secondary:!0,loading:Ne,children:[Object(p.jsxs)(ye.a,{exclusive:!1,fluid:!0,color:"teal",children:[Object(p.jsxs)(ye.a.Title,{active:2===Ct,index:2,onClick:Zt,children:[Object(p.jsx)(Q.a,{name:"dropdown"}),"Detalles de la venta"]}),Object(p.jsx)(ye.a.Content,{active:2===Ct,children:Object(p.jsx)(Oe.a,{name:"detalle",control:en,render:function(e){var t=e.field,n=t.onChange,o=t.onBlur,i=t.value;return Object(p.jsx)(ke.a,{value:i,onBlur:o,onChange:n,placeholder:"Escribe un Comentario (sera agreagado en la impresi\xf3n del documento)",readOnly:!Ae})}})}),Object(p.jsxs)(ye.a.Title,{active:0===Ct,index:0,onClick:Zt,children:[Object(p.jsx)(Q.a,{name:"dropdown"}),"Documentos asociados"]}),Object(p.jsxs)(ye.a.Content,{active:0===Ct,children:[Ae&&Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.documento_relacion_search,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:10}),Object(p.jsx)(L.a.Field,{style:{marginTop:"24px"},children:Object(p.jsx)(G.a,{primary:!0,as:"a",onClick:function(){if(!rn.documento_relacion_search&&!rn.documento_relacion_search_id)return j.b.error("Seleccione un documento v\xe1lido"),!1;var e=rn.documento_relacion||[],t={documento_relacion_id:rn.documento_relacion_search.id,documento_relacion:rn.documento_relacion_search};e.push(t),on("documento_relacion",e),on("documento_relacion_search",0),on("documento_relacion_search_id",0)},children:"Agregar Documento"})})]}),!Ae&&Object(p.jsx)(G.a,{secondary:!0,as:"a",children:"Ver Historial"}),Object(p.jsxs)(we.a,{compact:!0,collapsing:!0,children:[Object(p.jsx)(we.a.Header,{children:Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.HeaderCell,{children:"Documento"}),Object(p.jsx)(we.a.HeaderCell,{children:"Eliminar"})]})}),Object(p.jsx)(we.a.Body,{children:!!rn.documento_relacion&&(null===rn||void 0===rn?void 0:rn.documento_relacion.map((function(e,t){return Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{children:null===e||void 0===e?void 0:e.documento_relacion.uniqueserie.split("-").splice(2).join("-")}),Object(p.jsx)(we.a.Cell,{children:Object(p.jsx)(G.a,{circular:!0,as:"a",size:"mini",onClick:function(){!function(e){var t=rn.documento_relacion;t.splice(e,1),on("documento_relacion",t)}(t)},disabled:!Ae,icon:"trash"})})]})})))})]})]}),Object(p.jsxs)(ye.a.Title,{active:1===Ct,index:1,onClick:Zt,children:[Object(p.jsx)(Q.a,{name:"dropdown"}),"Vendedor"]}),Object(p.jsx)(ye.a.Content,{active:1===Ct,children:Object(p.jsx)(L.a.Group,{children:Ae?Object(p.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.vendedor,empresaContexto:Ye,control:en,venta:qe,handleChangeVenta:Ee,setValue:on,width:10}):Object(p.jsx)(L.a.Input,{fluid:!0,label:"Vendedor",placeholder:"Selecione",value:null===rn||void 0===rn||null===(xe=rn.vendedor)||void 0===xe?void 0:xe.nombre,readOnly:!0,width:10})})}),Object(p.jsxs)(ye.a.Title,{active:3===Ct,index:3,onClick:Zt,children:[Object(p.jsx)(Q.a,{name:"dropdown"}),"Informacion Relacionada"]}),Object(p.jsxs)(ye.a.Content,{active:3===Ct,children:[Object(p.jsx)(L.a.Group,{children:Object(p.jsx)(Ve,{name:"numero_expediente",title:"Numero de Expediente",control:en,errors:nn,type:"text",width:10,readOnly:!Ae})}),Object(p.jsx)(L.a.Group,{children:Object(p.jsx)(Ve,{name:"orden_compra",title:"Orden de Compra",control:en,errors:nn,type:"text",width:10,readOnly:!Ae})}),Object(p.jsx)(L.a.Group,{children:Object(p.jsx)(Ve,{name:"codigo_unidad_ejecutora",title:"C\xf3digo Unidad Ejecutora",control:en,errors:nn,type:"text",width:10,readOnly:!Ae})}),Object(p.jsx)(L.a.Group,{children:Object(p.jsx)(Ve,{name:"numero_proceso_seleccion",title:"N\xfamero de proceso de selecci\xf3n",control:en,errors:nn,type:"text",width:10,readOnly:!Ae})}),Object(p.jsx)(L.a.Group,{children:Object(p.jsx)(Ve,{name:"numero_contrato",title:"N\xfamero de Contrato",control:en,errors:nn,type:"text",width:10,readOnly:!Ae})})]})]}),Ae&&Object(p.jsxs)("div",{style:{marginTop:"5vh"},children:[Object(p.jsx)(G.a,{loading:it,disabled:it,content:"Guardar",primary:!0}),Object(p.jsx)(G.a,{style:{marginTop:"1vh"},as:"a",content:"Deshacer Cambios",onClick:function(){cn(qe)}})]})]}),Object(p.jsx)(R.a,{style:{marginBottom:"20vh"},loading:Ne,children:Object(p.jsx)(fe.a,{value:"http://fivip.net/comprobante/".concat(Ye.empresa.ruc,"/").concat(null===rn||void 0===rn||null===(Pe=rn.serie)||void 0===Pe?void 0:Pe.id,"/").concat(null===rn||void 0===rn||null===(Fe=rn.serie)||void 0===Fe?void 0:Fe.serie,"/").concat(null===rn||void 0===rn?void 0:rn.correlativo)})})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Qe.PDFViewer,{style:{width:"100%",height:"80vh"},children:Object(p.jsx)(Ze,{empresa:Ye,status:rn,qrCodeBase64:ft})}),Object(p.jsxs)(G.a,{color:"teal",fluid:!0,onClick:function(){"create"===Ge.from?(ze({status:!1}),hn()):ze({status:!1})},children:[" ","Cerrar"]})]})})},et=n(216),tt=n.n(et),nt=function(e){var t=tt()(e),n=tt()(new Date);return!(t.diff(n)<-36e4)},ot=function(e){return Object(p.jsx)(ce.a,{content:"Actualizado recientemente",pinned:!0,trigger:Object(p.jsx)(K.a,{circular:!0,color:"blue",empty:!0},e)})},it=function(){var e=Object(y.g)(),t=Object(o.useContext)(_),n=t.empresa,i=(t.setEmpresa,Object(o.useState)({current_page:1})),c=Object(l.a)(i,2),a=c[0],s=c[1],d=Object(o.useState)([]),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(o.useState)(null),h=Object(l.a)(m,2),v=h[0],O=h[1],x=Object(o.useState)(!1),f=Object(l.a)(x,2),g=f[0],w=f[1],S=Object(o.useState)(!1),V=Object(l.a)(S,2),F=(V[0],V[1]),D=Object(o.useState)({status:!1,format:"A4"}),T=Object(l.a)(D,2),I=T[0],N=T[1],q=function(){var e=Object(U.a)(H.a.mark((function e(t){var o,i,c,a=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]&&a[1],o=n.empresa.id,i=n.id,e.next=5,he.show(o,i,t);case 5:c=e.sent,s(c),b(c.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){console.log(e);var t=j.map((function(t){return parseInt(t.id)===parseInt(e.id)?e:t}));b(t)},L=function(){var e=Object(U.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(null);case 2:return e.next=4,O(t);case 4:console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){he.download(v,e)},B=function(){var e=Object(U.a)(H.a.mark((function e(t,n){var o,i,c,a,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=j.find((function(e,n){return e.id===t}))).send_status=!0,i=j.map((function(e,t){return e.id===o.id?o:e})),b(i),e.next=6,he.sendSunat(o);case 6:c=e.sent,(a=Object(k.a)(Object(k.a)({},o),c)).send_status=!1,r=j.map((function(e,t){return e.id===a.id?a:e})),b(r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return q(1),function(){b([])}}),[]),Object(o.useEffect)((function(){return N({status:!1,format:"A4"}),e.state=v,v||w(!1),setTimeout((function(){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector("canvas");F(null===t||void 0===t?void 0:t.toDataURL("image/jpg",.3))}),500),function(){}}),[v]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(C.a.Column,{width:5,children:[Object(p.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(ie.a.Item,{children:[Object(p.jsxs)(ie.a.Content,{floated:"right",children:[Object(p.jsx)(ve,{}),Object(p.jsx)(se,{empresaContext:n})]}),Object(p.jsxs)(ie.a.Content,{children:[Object(p.jsx)(ie.a.Header,{as:"a",children:Object(p.jsx)(r.b,{to:"/welcome/empresas/".concat(n.empresa.id),state:{backgroundLocation:e,model:n.empresa},children:n.empresa.nombre})}),n.nombre]})]})}),Object(p.jsx)(ie.a,{celled:!0,relaxed:"very",children:null===j||void 0===j?void 0:j.map((function(e,t){var n,o,i,c;return Object(p.jsxs)(ie.a.Item,{onClick:function(){L(e)},style:{backgroundColor:(null===e||void 0===e?void 0:e.id)===(null===v||void 0===v?void 0:v.id)?"rgb(0 181 173 / 12%)":"#fff"},children:[Object(p.jsxs)(ie.a.Content,{style:{width:"135px"},floated:"right",children:[Object(p.jsx)(K.a.Group,{tag:!0,children:Object(p.jsxs)(K.a,{as:"a",children:[null===e||void 0===e||null===(n=e.moneda)||void 0===n?void 0:n.simbolo," ",e.total_documento_fin.toFixed(3)]})}),Object(p.jsx)(ce.a,{content:"Click para enviar comprobante a Sunat",header:"Pendiente por enviar",trigger:2!==e.tipo_operacion_id&&"CT"!==e.serie.abbr&&"NV"!==e.serie.abbr&&Object(p.jsx)(G.a,{icon:"0"===e.sunat_code?"check":e.sunat_code>="2000"?"times":"cloud upload",size:"mini",onClick:function(n){n.stopPropagation(),B(e.id,t)},color:"0"===e.sunat_code?"green":e.sunat_code>="2000"?"red":"primary",loading:e.send_status,disabled:e.send_status||"0"===e.sunat_code})},t),(null===e||void 0===e?void 0:e.is_nulled)?Object(p.jsx)(K.a,{as:"span",content:"Anulado",color:"red"}):Object(p.jsx)(p.Fragment,{children:" \xa0"})]}),Object(p.jsxs)(ie.a.Content,{children:[Object(p.jsxs)(ie.a.Header,{as:"a",children:[null===e||void 0===e||null===(o=e.serie)||void 0===o?void 0:o.abbr," ",null===e||void 0===e||null===(i=e.serie)||void 0===i?void 0:i.serie," ",null===e||void 0===e?void 0:e.correlativo," ",nt(e.updated_at)&&Object(p.jsx)(ot,{index:t})]}),Object(p.jsx)(ie.a.Item,{children:Object(p.jsx)("strong",{children:null===e||void 0===e||null===(c=e.cliente)||void 0===c?void 0:c.nombre})}),Object(p.jsxs)(ie.a.Item,{children:["Fecha Emision:"," ",Object(p.jsx)(le.a,{format:"DD/MM/YYYY hh:mm",children:e.fecha_emision})]})]})]},t)}))}),!!j.length&&Object(p.jsx)(ae.a,{onPageChange:function(e,t){q(t.activePage)},defaultActivePage:a.current_page,pointing:!0,secondary:!0,totalPages:a.last_page})]}),Object(p.jsx)(C.a.Column,{width:10,children:v?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsx)(ie.a.Item,{children:Object(p.jsxs)(ie.a.Content,{floated:"right",children:[v&&Object(p.jsx)(P.a,{text:"Descargar",icon:"download",floating:!0,labeled:!0,button:!0,className:"button ui mini icon",children:Object(p.jsxs)(P.a.Menu,{children:[v.sunat_documento&&Object(p.jsx)(P.a.Item,{onClick:function(){z("xml")},children:"Descargar XML"}),v.sunat_notes&&Object(p.jsx)(P.a.Item,{onClick:function(){z("cdn")},children:"Descargar CDN"})]})}),Object(p.jsx)(G.a,{size:"mini",content:"Imprimir",icon:"print",labelPosition:"left",style:{marginRight:"2px",marginLeft:"2px"},onClick:function(){var e;e=!I.status,N({status:e,format:"A4"})},active:I.status}),v.is_nulled&&v?Object(p.jsx)(p.Fragment,{}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(G.a,{size:"mini",content:"Editar",icon:"pencil",labelPosition:"left",style:{marginRight:"2px",marginLeft:"2px"},active:g,onClick:function(){w(!g)}}),Object(p.jsx)(G.a,{size:"mini",content:"Enviar",icon:"envelope",labelPosition:"left",style:{marginRight:"2px",marginLeft:"2px"}}),Object(p.jsx)(pe,{handleChangeVenta:E,documento:v,style:{marginRight:"2px",marginLeft:"2px"}})]})]})})}),Object(p.jsx)(G.a,{circular:!0,size:"mini",icon:!0,onClick:function(){O(null)},children:Object(p.jsx)(Q.a,{name:"times"})}),Object(p.jsx)(r.b,{to:"/space/ventas/1",state:{model:v},children:Object(p.jsx)(G.a,{circular:!0,size:"mini",icon:!0,children:Object(p.jsx)(Q.a,{name:"expand"})})}),v.is_nulled?Object(p.jsx)(K.a,{as:"span",content:"Anulado",icon:"ban",color:"red"}):Object(p.jsx)(p.Fragment,{children:"Mensaje "}),Object(p.jsx)($e,{selected:v,handleChangeVenta:E,editionMode:g,formatPrint:I,setFormatPrint:N})]}):Object(p.jsx)(R.a,{placeholder:!0,style:{marginTop:"6vh"},children:Object(p.jsxs)(A.a,{icon:!0,children:[Object(p.jsx)(Q.a,{name:"file outline"}),"No tienes un documento seleccionado"]})})})]})};n(177);var ct=function(e){var t=e.type,n=e.name,c=e.icon,a=e.title,r=e.value,l=e.color,s=e.service,d=e.setValue,j=e.isContextEmpresa,b=Object(o.useContext)(_),m=b.empresa,h=b.setEmpresa,v=i.a.createRef(),O=u("public"),x=function(){var e=Object(U.a)(H.a.mark((function e(t){var o,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.target.files[0],e.next=3,s(m.empresa.id,o);case 3:i=e.sent,d(n,i.success),m.empresa.certificado=i.success,"certificado"===n&&d("certificado_validate",0),"logo"===n&&d("logo",i.success),j&&h(m),console.log(m);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:["imagen"===t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("label",{children:a}),Object(p.jsxs)(K.a,{as:"a",onClick:function(e){e.preventDefault(),v.current.click()},children:[Object(p.jsx)("img",{src:"".concat(O,"/storage/").concat(m.empresa.id,"/").concat(r),alt:"logo_empresa"})," ",r]})]}),"file"===t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("label",{children:a}),Object(p.jsx)(G.a,{as:"a",color:l,fluid:!0,content:r||"Certificado",labelPosition:"left",icon:c||"file",onClick:function(e){e.preventDefault(),v.current.click()}})]}),Object(p.jsx)("input",{ref:v,hidden:!0,type:"file",onChange:x})]})},at=Fe.a({ruc:Fe.b().required("Complete"),nombre:Fe.b().required("Complete"),nombre_comercial:Fe.b().required("Complete").min(2,"Minimo 2 letras").max(50,"Max 50 Letras"),direccion:Fe.b().required("Complete"),ubigeo_id:Fe.b().required("Complete"),telefono:Fe.b().required("Complete"),celular:Fe.b().required("Complete"),email:Fe.b().email().required("Complete"),decimales:Fe.b().required("Complete"),por_detraccion:Fe.b().required("Complete"),por_retencion:Fe.b().required("Complete"),igv:Fe.b().required("Complete"),agente:Fe.b().required("Complete"),por_percepcion:Fe.b().required("Complete"),limite_detraccion:Fe.b().required("Complete"),country_id:Fe.b().required("Complete")}).required(),rt=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=a.empresa,s=a.setEmpresa,d=Object(o.useState)(!1),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(o.useState)(!1),h=Object(l.a)(m,2),v=h[0],O=h[1],x=Object(o.useState)(!1),f=Object(l.a)(x,2),g=f[0],w=f[1],C=Object(Oe.e)({resolver:Object(Se.a)(at),defaultValues:n}),k=C.control,S=C.handleSubmit,P=C.setValue,V=C.formState.errors,F=(0,C.watch)(),D=Object(o.useState)(),T=Object(l.a)(D,2),I=T[0],N=T[1];Object(o.useEffect)(Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,Z.find(n.id);case 3:return t=e.sent,e.abrupt("return",N(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:I});var q=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),n=F.certificado_clave,e.next=5,Z.unlockCertificado(r.empresa.id,n);case 5:o=e.sent,P("certificado_validate",o.status),w(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){i(c.state.backgroundLocation.pathname,{state:{reload:{empresa:!0}}})},A=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!t||!t.id){e.next=8;break}return e.next=4,Z.update(t,t.id);case 4:n=e.sent,r.empresa.id===n.id?(r.empresa=n,window.localStorage.removeItem("empresa"),window.localStorage.setItem("empresa",JSON.stringify(r)),s(r),b(!1),E()):E(),e.next=14;break;case 8:return e.next=10,Z.create(t);case 10:return o=e.sent,b(!1),(null===o||void 0===o?void 0:o.errors)?O(Te(o)):(O(null),E()),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(L.a,{onSubmit:S(A),noValidate:!0,children:[Object(p.jsxs)(L.a.Group,{widths:1,children:[Object(p.jsx)(Ve,{name:"ruc",title:"Ruc",control:k,errors:V,width:8}),Object(p.jsx)(L.a.Field,{children:Object(p.jsx)(ct,{type:"imagen",name:"logo",title:"Logo de la Empresa",value:F.logo,service:Z.updateLogo,setValue:P,isContextEmpresa:!0})})]}),Object(p.jsxs)(L.a.Group,{widths:2,children:[Object(p.jsx)(Ve,{name:"nombre",title:"Nombre",control:k,errors:V,width:8}),Object(p.jsx)(Ve,{name:"nombre_comercial",title:"Nombre Comercial",control:k,errors:V,width:8})]}),Object(p.jsxs)(L.a.Group,{widths:4,children:[Object(p.jsx)(Ve,{name:"direccion",title:"Direccion",control:k,errors:V,width:8}),Object(p.jsx)(Re,{model:Ie.ubigeo,empresaContexto:r,control:k,venta:F,setValue:P,width:8})]}),Object(p.jsxs)(L.a.Group,{widths:4,children:[Object(p.jsx)(Ve,{name:"telefono",title:"Telefono Fijo",control:k,errors:V,width:4}),Object(p.jsx)(Ve,{name:"celular",title:"Telefono Celular",control:k,errors:V,width:4}),Object(p.jsx)(Ve,{name:"email",title:"Email",control:k,errors:V,width:4}),Object(p.jsx)(Ve,{name:"decimales",title:"Decimales",control:k,errors:V,width:4})]}),Object(p.jsx)(X.a,{}),Object(p.jsxs)(L.a.Group,{widths:5,children:[Object(p.jsx)(L.a.Field,{width:6,children:Object(p.jsx)(ct,{type:"file",icon:"expeditedssl",name:"certificado",title:"Certificado Digital",value:F.certificado,color:0===F.certificado_validate?"secundary":1===F.certificado_validate?"red":2===F.certificado_validate?"green":"secundary",service:Z.updateCertificado,empresaContexto:r,setValue:P,isContextEmpresa:!0})}),Object(p.jsx)(Ve,{name:"certificado_clave",title:"Contrase\xf1a del Certificado Digital",control:k,errors:V,width:6,type:"password"}),Object(p.jsxs)(L.a.Field,{children:[Object(p.jsx)("label",{children:"\xa0"}),Object(p.jsx)(G.a,{fluid:!0,content:"Validar Certificado",onClick:q,loading:g})]})]}),Object(p.jsxs)(L.a.Group,{widths:5,children:[Object(p.jsx)(Ve,{name:"usuario_sunat",title:"Usuario Sunat",control:k,errors:V,width:6}),Object(p.jsx)(Ve,{name:"usuario_sunat_clave",title:"Clave de Usuario Sunat",control:k,errors:V,width:6}),Object(p.jsx)(Ve,{name:"country_id",title:"Pais",control:k,errors:V,width:4})]}),Object(p.jsx)(X.a,{}),Object(p.jsxs)(L.a.Group,{widths:5,children:[Object(p.jsx)(Ve,{name:"igv",title:"IGV",control:k,errors:V,width:3}),Object(p.jsx)(Ve,{name:"agente",title:"Agente",control:k,errors:V,width:3}),Object(p.jsx)(Ve,{name:"por_percepcion",title:"% Percepci\xf3n",control:k,errors:V,width:3}),Object(p.jsx)(Ve,{name:"por_retencion",title:"% Retencion",control:k,errors:V,width:3})]}),Object(p.jsx)(X.a,{}),Object(p.jsxs)(L.a.Group,{widths:16,children:[Object(p.jsx)(Ve,{name:"por_detraccion",title:"% Detracci\xf3n",control:k,errors:V,width:3}),Object(p.jsx)(Ve,{name:"limite_detraccion",title:"Limite Detracci\xf3n",control:k,errors:V,width:3}),Object(p.jsx)(Ve,{name:"cuenta_detraccion",title:"Cuenta Detracci\xf3n",control:k,errors:V,width:5})]}),Object(p.jsx)(L.a.Group,{widths:16,children:Object(p.jsx)(L.a.Field,{width:16,children:Object(p.jsx)(Oe.a,{name:"detalle",control:k,render:function(e){var t=e.field,n=t.onChange,o=t.onBlur,i=t.value;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("label",{children:"Comentario de Pie de P\xe1gina"}),Object(p.jsx)(ke.a,{rows:12,value:i,onBlur:o,onChange:n,placeholder:"Comentarios de pie de pagina de las impresiones del modulo de ventas"})]})}})})}),(null===(t=Object.keys(V))||void 0===t?void 0:t.length)?Object(p.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===v||void 0===v?void 0:v.length)&&Object(p.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:v}),Object(p.jsx)(G.a,{loading:j,secondary:!0,children:"Guardar"})]})},lt=Fe.a({nombre:Fe.b().required("Complete"),direccion:Fe.b().required("Complete"),ubigeo_id:Fe.b().required("Complete"),empresa_id:Fe.b().required("Complete")}).required(),st=function(e){var t,n=e.state;console.log(n);var i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=(a.empresa,a.setEmpresa),s=Object(o.useState)(!1),d=Object(l.a)(s,2),u=d[0],j=d[1],b=Object(o.useState)(!1),m=Object(l.a)(b,2),h=m[0],v=m[1],O=Object(Oe.e)({resolver:Object(Se.a)(lt),defaultValues:n}),x=O.control,f=O.handleSubmit,g=O.formState.errors,w=Object(o.useState)(),C=Object(l.a)(w,2),k=C[0],S=C[1];Object(o.useEffect)(Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,$.find(n.id);case 3:return t=e.sent,e.abrupt("return",S(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:k});var P=function(){i(c.state.backgroundLocation.pathname,{state:{reload:{empresa:!0}}})},V=function(){var e=Object(U.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),!t||!t.id){e.next=10;break}return e.next=4,$.update(t,t.id);case 4:e.sent,localStorage.removeItem("empresa"),r(null),P(),e.next=16;break;case 10:return e.next=12,$.create(t);case 12:return n=e.sent,j(!1),(null===n||void 0===n?void 0:n.errors)?v(Te(n)):(v(null),P()),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(L.a,{onSubmit:f(V),noValidate:!0,children:[Object(p.jsx)(Ve,{name:"nombre",title:"Nombre",control:x,errors:g}),Object(p.jsxs)(L.a.Group,{widths:2,children:[Object(p.jsx)(Ve,{name:"direccion",title:"Direccion",control:x,errors:g}),Object(p.jsx)(Ve,{name:"ubigeo_id",title:"Ubigeo",control:x,errors:g})]}),(null===(t=Object.keys(g))||void 0===t?void 0:t.length)?Object(p.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===h||void 0===h?void 0:h.length)&&Object(p.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:h}),Object(p.jsx)(G.a,{loading:u,secondary:!0,children:"Guardar"}),Object(p.jsx)("a",{onClick:P,children:"asd"})]})};var dt={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{order:{id:"DESC"}},n=qe.a.stringify(t);return console.log(n),new Promise((function(t,o){m.get("/cliente/".concat(e,"?").concat(n)).then((function(e){t(e.data)}),(function(e){o(!1)}))}))},find:function(e,t){return new Promise((function(n,o){m.get("cliente/"+e+"/"+t).then((function(e){n(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("cliente",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("cliente/"+t,e).then((function(e){n(e.data)}))}))},getDni:function(e){return new Promise((function(t,n){d.a.post("https://api.nubefa.com/api/dni",e).then((function(e){t(e)}),(function(e){n(!1)}))}))},getRuc:function(e){return new Promise((function(t,n){d.a.post("https://api.nubefa.com/api/ruc",e).then((function(e){t(e)}),(function(e){n(!1)}))}))}},ut=Fe.a({tipo_documento_identy_id:Fe.b().required("Complete"),numero_documento:Fe.b().required("Complete"),nombre:Fe.b().required("Complete"),nombre_comercial:Fe.b().required("Complete").min(2,"Minimo 2 letras").max(50,"Max 50 Letras"),direccion:Fe.b().required("Complete"),ubigeo_id:Fe.b().required("Complete"),empresa_id:Fe.b().required("Complete")}).required(),jt=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_).empresa,r=Object(o.useState)(!1),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],v=Object(o.useState)(!1),O=Object(l.a)(v,2),x=O[0],f=O[1],g=Object(o.useState)(!1),w=Object(l.a)(g,2),C=w[0],k=w[1],S=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{cliente_id:e}}})},P=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),!t||!t.id){e.next=8;break}return e.next=4,dt.update(t,t.id);case 4:(null===(n=e.sent)||void 0===n?void 0:n.errors)?k(Te(n)):(console.log("debugger"),k(null),S(n)),e.next=14;break;case 8:return e.next=10,dt.create(t);case 10:return o=e.sent,u(!1),(null===o||void 0===o?void 0:o.errors)?k(Te(o)):(k(null),S(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(Oe.e)({resolver:Object(Se.a)(ut),defaultValues:n}),F=V.control,D=V.handleSubmit,T=V.formState.errors,I=V.setValue,N=V.watch,q=V.reset,E=N(),A=function(){var e=Object(U.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),3===(null===E||void 0===E?void 0:E.tipo_documento_identy_id)&&dt.getDni({data:E.numero_documento}).then((function(e){return I("nombre",e.data.ane_alias),I("nombre_comercial",e.data.ane_alias),f(!0),h(!1),!0}),(function(e){return h(!1),!0})),4===(null===E||void 0===E?void 0:E.tipo_documento_identy_id)&&dt.getRuc({data:E.numero_documento}).then((function(e){return I("nombre",e.data.razonSocial),I("nombre_comercial",e.data.razonSocial),I("direccion",e.data.direccion),I("ubigeo_id",parseInt(e.data.ubi_id)),I("ubigeo",{id:e.data.ubi_id,provincia:e.data.provincia,distrito:e.data.distrito,departamento:e.data.departamento}),f(!0),h(!1),!0}),(function(e){return h(!1),!0}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(L.a,{onSubmit:D(P),noValidate:!0,children:[Object(p.jsx)(L.a.Group,{children:Object(p.jsx)(Re,{model:Ie.tipo_documento_identy,empresaContexto:a,control:F,setValue:I,width:7})}),Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Ve,{name:"numero_documento",title:"Numero de Documento",control:F,errors:T,width:7}),4===E.tipo_documento_identy_id||3===E.tipo_documento_identy_id?Object(p.jsx)(L.a.Field,{children:Object(p.jsx)(G.a,{primary:!0,style:{marginTop:"22px"},onClick:function(e){e.preventDefault(),A()},loading:m,children:"Buscar en Sunat"})}):Object(p.jsx)(p.Fragment,{})]}),Object(p.jsxs)(L.a.Group,{widths:2,children:[Object(p.jsx)(Ve,{name:"nombre",title:"Nombre",control:F,errors:T,width:7}),Object(p.jsx)(Ve,{name:"nombre_comercial",title:"Nombre Comercial",control:F,errors:T,width:8})]}),Object(p.jsx)(L.a.Group,{widths:2,children:Object(p.jsx)(Ve,{name:"direccion",title:"Direccion",control:F,errors:T,width:15})}),Object(p.jsx)(L.a.Group,{children:x?Object(p.jsx)(L.a.Field,{width:5,control:_e.a,label:"Ubigeo",value:"".concat(E.ubigeo.provincia," ").concat(E.ubigeo.distrito," ").concat(E.ubigeo.departamento),placeholder:"Ubigeo",type:"text",readOnly:!0}):Object(p.jsx)(Re,{model:Ie.ubigeo,empresaContexto:a,control:F,setValue:I,venta:E})}),Object(p.jsxs)(L.a.Group,{widths:3,children:[Object(p.jsx)(Ve,{name:"telefono",title:"Telefono Fijo",control:F,errors:T,width:5}),Object(p.jsx)(Ve,{name:"celular",title:"Telefono Celular",control:F,errors:T,width:5}),Object(p.jsx)(Ve,{name:"email",title:"Email",control:F,errors:T,width:5})]}),(null===(t=Object.keys(T))||void 0===t?void 0:t.length)?Object(p.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===C||void 0===C?void 0:C.length)&&Object(p.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:C}),Object(p.jsx)(G.a,{disabled:d,loading:d,primary:!0,children:"Guardar"}),Object(p.jsx)(G.a,{style:{marginTop:"1vh"},as:"a",content:"Deshacer Cambios",onClick:function(){q(n)}})]})};var bt={show:function(){return new Promise((function(e,t){m.get("/moneda").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("moneda/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("moneda",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){var n=e.empresa_id;return new Promise((function(o,i){m.put("moneda/"+n+"/"+t,e).then((function(e){o(e.data)}))}))}},mt=Fe.a({nombre:Fe.b().required("Complete"),iso:Fe.b().required("Complete"),simbolo:Fe.b().required("Complete"),sunat_codigo:Fe.b().required("Complete"),dolar:Fe.b().required("Complete"),empresa_id:Fe.b().required("Complete")}).required(),ht=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=(a.empresa,a.setEmpresa,Object(o.useState)(!1)),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],v=Object(Oe.e)({resolver:Object(Se.a)(mt),defaultValues:n}),O=v.control,x=v.handleSubmit,f=v.formState.errors,g=v.reset,w=Object(o.useState)(),C=Object(l.a)(w,2),k=C[0],S=C[1];Object(o.useEffect)(Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,bt.find(n.id);case 3:return t=e.sent,e.abrupt("return",S(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:k});var P=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{moneda_id:e}}})},V=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),u(!0),!t||!t.id){e.next=9;break}return e.next=5,bt.update(t,t.id);case 5:n=e.sent,P(n),e.next=15;break;case 9:return e.next=11,bt.create(t);case 11:return o=e.sent,u(!1),(null===o||void 0===o?void 0:o.errors)?h(Te(o)):(h(null),P(o)),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(L.a,{onSubmit:x(V),noValidate:!0,children:[Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Ve,{name:"nombre",title:"Nombre",control:O,errors:f,width:4}),Object(p.jsx)(Ve,{name:"iso",title:"ISO",control:O,errors:f,width:3}),Object(p.jsx)(Ve,{name:"simbolo",title:"Simbolo",control:O,errors:f,width:3}),Object(p.jsx)(Ve,{name:"sunat_codigo",title:"Codigo Sunat",control:O,errors:f,width:3}),Object(p.jsx)(Ve,{name:"dolar",title:"Dolar",control:O,errors:f,width:3})]}),(null===(t=Object.keys(f))||void 0===t?void 0:t.length)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}),Object(p.jsx)(R.a,{children:JSON.stringify(f,null,2)})]}):Object(p.jsx)(p.Fragment,{}),(null===m||void 0===m?void 0:m.length)&&Object(p.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:m}),Object(p.jsx)(G.a,{loading:d,disabled:d,content:"Guardar",primary:!0}),Object(p.jsx)(G.a,{as:"a",content:"Deshacer Cambios",secondary:!0,onClick:function(){g(n)}})]})};var pt={show:function(){return new Promise((function(e,t){m.get("/vehiculo").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("vehiculo/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("vehiculo",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){var n=e.empresa_id;return new Promise((function(o,i){m.put("vehiculo/"+n+"/"+t,e).then((function(e){o(e.data)}))}))}},vt=Fe.a({descripcion:Fe.b().required("Complete"),placa:Fe.b().required("Complete"),marca:Fe.b().required("Complete"),empresa_id:Fe.b().required("Complete")}).required(),Ot=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=(a.empresa,a.setEmpresa,Object(o.useState)(!1)),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],v=Object(Oe.e)({resolver:Object(Se.a)(vt),defaultValues:n}),O=v.control,x=v.handleSubmit,f=v.formState.errors,g=v.reset,w=Object(o.useState)(),C=Object(l.a)(w,2),k=C[0],S=C[1];Object(o.useEffect)(Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,pt.find(n.id);case 3:return t=e.sent,e.abrupt("return",S(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:k});var P=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{moneda_id:e}}})},V=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),u(!0),!t||!t.id){e.next=9;break}return e.next=5,pt.update(t,t.id);case 5:n=e.sent,P(n),e.next=15;break;case 9:return e.next=11,pt.create(t);case 11:return o=e.sent,u(!1),(null===o||void 0===o?void 0:o.errors)?h(Te(o)):(h(null),P(o)),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(L.a,{onSubmit:x(V),noValidate:!0,children:[Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Ve,{name:"descripcion",title:"Descripci\xf3n",control:O,errors:f,width:4}),Object(p.jsx)(Ve,{name:"placa",title:"Placa",control:O,errors:f,width:3}),Object(p.jsx)(Ve,{name:"marca",title:"Marca",control:O,errors:f,width:3})]}),(null===(t=Object.keys(f))||void 0===t?void 0:t.length)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}),Object(p.jsx)(R.a,{children:JSON.stringify(f,null,2)})]}):Object(p.jsx)(p.Fragment,{}),(null===m||void 0===m?void 0:m.length)&&Object(p.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:m}),Object(p.jsx)(G.a,{loading:d,disabled:d,content:"Guardar",primary:!0}),Object(p.jsx)(G.a,{as:"a",content:"Deshacer Cambios",secondary:!0,onClick:function(){g(n)}})]})},xt=Fe.a({nombre:Fe.b().required("Complete")}).required(),ft=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=a.empresa,s=(a.setEmpresa,Object(o.useState)(!1)),d=Object(l.a)(s,2),u=d[0],j=d[1],b=Object(o.useState)(!1),m=Object(l.a)(b,2),h=m[0],v=m[1],O=Object(Oe.e)({resolver:Object(Se.a)(xt),defaultValues:n}),x=O.control,f=O.handleSubmit,g=O.watch,w=O.setValue,C=O.formState.errors,k=Object(o.useState)(),S=Object(l.a)(k,2),P=S[0],V=S[1],F=g();Object(o.useEffect)((function(){Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,ze.find(n.id);case 3:return t=e.sent,e.abrupt("return",V(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))()}),{data:P});var D=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{producto_id:e}}})},T=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),!t||!t.id){e.next=8;break}return e.next=4,ze.update(t,t.id);case 4:n=e.sent,D(n),e.next=14;break;case 8:return e.next=10,ze.create(t);case 10:return o=e.sent,j(!1),(null===o||void 0===o?void 0:o.errors)?v(Te(o)):(v(null),D(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(L.a,{onSubmit:f(T),noValidate:!0,children:[Object(p.jsx)(Re,{autoFocus:!0,model:Ie.tipo_producto,empresaContexto:r,control:x,venta:F,setValue:w,width:8}),Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Ve,{name:"nombre",title:"Descripci\xf3n",control:x,errors:C,width:8}),Object(p.jsx)(Ve,{name:"codigo",title:"C\xf3digo",control:x,errors:C,width:4}),Object(p.jsx)(Ve,{name:"codigo_barras",title:"C\xf3digo de Barras",control:x,errors:C,width:4})]}),Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Re,{model:Ie.presentacion,empresaContexto:r,control:x,venta:F,setValue:w,width:8}),Object(p.jsx)(Ve,{name:"peso",title:"Peso KG",control:x,errors:C,width:4,type:"number"})]}),Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Ve,{name:"precio_compra",title:"Costo de Compra (SIN IGV)",control:x,errors:C,width:4,type:"number"}),Object(p.jsx)(Ve,{name:"por_detraccion",title:"% Detracci\xf3n",control:x,errors:C,width:4,type:"number"}),Object(p.jsx)(Ve,{name:"por_isc",title:"% ISC",control:x,errors:C,width:4,type:"number"}),Object(p.jsxs)(L.a.Field,{children:[Object(p.jsx)("label",{children:" \xa0"}),Object(p.jsx)(Ce.a,{label:"Afecto",checked:F.afecto,onChange:function(){w("afecto",!F.afecto)}})]})]}),Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Re,{model:Ie.categoria,empresaContexto:r,control:x,venta:F,setValue:w,width:8}),Object(p.jsx)(Re,{model:Ie.subcategoria,empresaContexto:r,control:x,venta:F,setValue:w,width:8})]}),Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Re,{model:Ie.marca,empresaContexto:r,control:x,venta:F,setValue:w,width:8}),Object(p.jsx)(Re,{model:Ie.linea,empresaContexto:r,control:x,venta:F,setValue:w,width:8})]}),(null===(t=Object.keys(C))||void 0===t?void 0:t.length)?Object(p.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===h||void 0===h?void 0:h.length)&&Object(p.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:h}),Object(p.jsx)(G.a,{loading:u,secondary:!0,children:"Guardar"})]})},gt=function(){var e=Object(o.useContext)(_).empresa;return Object(p.jsx)(p.Fragment,{children:e?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I,{}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(C.a.Row,{children:[Object(p.jsx)(C.a.Column,{width:1,children:Object(p.jsx)(N,{fluid:!0})}),Object(p.jsx)(C.a.Column,{width:15,style:{marginTop:"1rem",overflowY:"scroll",height:"93vh"},children:Object(p.jsx)(y.b,{})})]})})]}):Object(p.jsx)(y.a,{to:"/welcome/empresas"})})},_t=n(957),wt=n(444),Ct=n(952),yt=function(e){return{filter:e.filter,limit:e.limit,order:e.order,page:e.page}},kt=function(e){for(var t=[],n=Object.keys(e),o=0;o<n.length;o++){var i=n[o];e[i]&&"object"!=typeof e[i]&&t.push([i,"like","%".concat(e[i],"%")])}return t},St=function(e,t,n){var i=Object(o.useContext)(_).empresa,c=Object(Oe.e)({resolver:Object(Se.a)(ut),defaultValues:n}),a=c.control,r=c.formState.errors,l=c.setValue,s=(0,c.watch)();return Object(p.jsxs)(L.a,{onSubmit:function(t){var n=kt(s);e.setQuery(Object(k.a)(Object(k.a)({},e.query),{filter:n}))},children:[Object(p.jsx)(Re,{model:Ie.tipo_documento_identy,empresaContexto:i,control:a,setValue:l,width:16}),Object(p.jsx)(Ve,{name:"numero_documento",title:"Numero de Documento",control:a,errors:r,width:16}),Object(p.jsx)(Ve,{name:"nombre",title:"Nombre",control:a,errors:r,width:16}),Object(p.jsx)(Ve,{name:"nombre_comercial",title:"Nombre Comercial",control:a,errors:r,width:16}),Object(p.jsx)(Ve,{name:"direccion",title:"Direccion",control:a,errors:r,width:16}),Object(p.jsx)(Re,{model:Ie.ubigeo,empresaContexto:i,control:a,setValue:l,width:16}),Object(p.jsx)(Ve,{name:"telefono",title:"Telefono Fijo",control:a,errors:r,width:16}),Object(p.jsx)(Ve,{name:"celular",title:"Telefono Celular",control:a,errors:r,width:16}),Object(p.jsx)(Ve,{name:"email",title:"Email",control:a,errors:r,width:16}),Object(p.jsx)(L.a.Button,{content:"Submit"})]})},Pt=function(e){var t=e.state,n=e.resolve,i=Object(o.useState)({}),c=Object(l.a)(i,2),a=c[0],r=c[1];return Object(o.useEffect)((function(){r(n(t))}),[]),Object(p.jsx)(_t.a,{children:Object(p.jsxs)(_t.a.Content,{children:[Object(p.jsx)(_t.a.Header,{content:null===a||void 0===a?void 0:a.title}),Object(p.jsx)(_t.a.Meta,{content:null===a||void 0===a?void 0:a.mensaje}),a.detalles&&Object.keys(a.detalles).map((function(e,t){return Object(p.jsx)(_t.a.Description,{content:"Total: ".concat(a.detalles[e].simbolo," ").concat(a.detalles[e].total)})}))]})})},Vt=function(){var e,t,n,i,c=Object(y.h)(),a=Object(y.g)(),s=Object(o.useContext)(_).empresa,d=Object(o.useState)(!1),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(o.useState)(null),h=Object(l.a)(m,2),v=h[0],O=h[1],x=Object(o.useState)([]),f=Object(l.a)(x,2),g=f[0],w=f[1],P=Object(o.useState)({page:0,limit:14,order:{id:"DESC"}}),V=Object(l.a)(P,2),F=V[0],D=V[1],T=function(){var e=Object(U.a)(H.a.mark((function e(){var t,n,o,i=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]&&i[0],t=i.length>1&&void 0!==i[1]&&i[1],n=s.empresa.id,e.next=5,dt.show(n,t);case 5:o=e.sent,b(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("contacto",t.id),(n={}).filter=[["cliente_id","=",t.id]],n.limit=25,n.order={id:"DESC"},e.next=7,he.show(s.empresa.id,s.id,1,n);case 7:o=e.sent,w(o.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=yt(F);console.log(e),T(!1,e)}),[F]),Object(o.useEffect)((function(){var e;if(null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.reload){var t=yt(F);T(!1,t),O(Object(k.a)({},a.state.reload.cliente_id)),a.state=null}}),[null===a||void 0===a?void 0:a.state]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(C.a.Column,{width:10,children:[Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(ie.a.Item,{children:[Object(p.jsx)(ie.a.Content,{floated:"left"}),Object(p.jsxs)(ie.a.Content,{floated:"right",children:[Object(p.jsx)(ve,{child:Object(p.jsx)(St,{query:F,setQuery:D})}),Object(p.jsx)(G.a,{size:"mini",color:"teal",onClick:function(){c("/welcome/clientes/create",{state:{backgroundLocation:a,model:{empresa_id:s.empresa.id},empresa:s}})},children:"Nuevo Contacto"})]})]})})}),Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(ie.a.Item,{children:[Object(p.jsx)(ie.a.Content,{floated:"left",children:null===F||void 0===F||null===(e=F.filter)||void 0===e?void 0:e.map((function(e,t){return Object(p.jsxs)(K.a,{as:"a",onClick:function(){!function(e){var t=F;t.filter.splice(e,1),D(Object(k.a)({},t))}(t)},children:[e[0],Object(p.jsx)(Q.a,{name:"delete"},t)]},t)}))}),Object(p.jsx)(ie.a.Content,{children:j?Object(p.jsx)(S.a,{pagination:!0,size:"mini",children:null===j||void 0===j||null===(t=j.links)||void 0===t?void 0:t.map((function(e,t){var n=parseFloat(null===e||void 0===e?void 0:e.label);return"number"===typeof n&&n?Object(p.jsx)(S.a.Item,{as:"a",active:null===e||void 0===e?void 0:e.active,onClick:function(){!function(e){var t=Object(k.a)(Object(k.a)({},F),{},{page:e});T(!1,t)}(n)},children:Object(p.jsx)("span",{children:null===e||void 0===e?void 0:e.label})},t):Object(p.jsx)(p.Fragment,{})}))}):Object(p.jsx)("div",{className:"ui placeholder",style:{padding:"8px"},children:Object(p.jsx)("div",{className:"line"})})})]})})}),Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(C.a.Column,{style:{overflowY:"scroll",height:"83vh",marginTop:"1rem"},children:Object(p.jsxs)(we.a,{celled:!0,selectable:!0,children:[Object(p.jsx)(we.a.Header,{children:Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.HeaderCell,{children:"Nombre"}),Object(p.jsx)(we.a.HeaderCell,{children:"Documento"}),Object(p.jsx)(we.a.HeaderCell,{children:"Direccion"})]})}),Object(p.jsx)(we.a.Body,{children:j?null===j||void 0===j||null===(n=j.data)||void 0===n?void 0:n.map((function(e,t){var n;return Object(p.jsxs)(we.a.Row,{onClick:function(){var t;O(t=e),I(t)},children:[Object(p.jsxs)(we.a.Cell,{width:3,children:[e.nombre,"\xa0",nt(e.updated_at)&&Object(p.jsx)(ot,{index:t})]}),Object(p.jsxs)(we.a.Cell,{width:3,children:[null===e||void 0===e||null===(n=e.tipo_documento)||void 0===n?void 0:n.nombre," ",e.numero_documento]}),Object(p.jsx)(we.a.Cell,{width:10,children:null===e||void 0===e?void 0:e.direccion})]})})):Array(14).fill(null).map((function(e,t){return Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{width:3,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(we.a.Cell,{width:3,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(we.a.Cell,{width:10,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})})]})}))})]})})})]}),Object(p.jsx)(C.a.Column,{width:5,children:v&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_t.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,style:{marginTop:"5vh"},children:Object(p.jsxs)(_t.a,{children:[Object(p.jsx)(_t.a.Content,{children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(_t.a.Header,{children:[Object(p.jsx)(wt.a,{srcSet:null===v||void 0===v?void 0:v.photo,alt:v.nombre_comercial,as:"div",size:"tiny",circular:!0}),"\xa0 ",null===v||void 0===v?void 0:v.nombre," ",nt(null===v||void 0===v?void 0:v.updated_at)&&Object(p.jsx)(ot,{index:null===v||void 0===v?void 0:v.id})]}),Object(p.jsxs)(_t.a.Description,{children:[Object(p.jsx)("b",{children:"Nombre Comercial"})," : ",null===v||void 0===v?void 0:v.nombre_comercial," "]}),Object(p.jsxs)(_t.a.Description,{children:[Object(p.jsx)("b",{children:"Documento "}),": ",null===v||void 0===v||null===(i=v.tipo_documento)||void 0===i?void 0:i.nombre," ",null===v||void 0===v?void 0:v.numero_documento," "]}),Object(p.jsxs)(_t.a.Description,{children:[Object(p.jsx)("b",{children:"Direcci\xf3n "}),": ",null===v||void 0===v?void 0:v.direccion]}),Object(p.jsxs)(_t.a.Description,{children:[Object(p.jsx)("b",{children:"Email "}),": ",null===v||void 0===v?void 0:v.email]}),Object(p.jsxs)(_t.a.Description,{children:[Object(p.jsx)("b",{children:"Tel\xe9fono "}),": ",null===v||void 0===v?void 0:v.telefono]}),Object(p.jsxs)(_t.a.Description,{children:[Object(p.jsx)("b",{children:"Celular "}),": ",null===v||void 0===v?void 0:v.celular]})]})}),Object(p.jsxs)(_t.a.Content,{extra:!0,children:[Object(p.jsx)(G.a,{primary:!0,onClick:function(){c("/welcome/clientes/"+v.id,{state:{backgroundLocation:a,model:v,empresa:s}})},children:"Editar"}),Object(p.jsx)(G.a,{children:"Redactar Mensaje"})]})]})}),!!v&&!!g.length&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_t.a.Group,{itemsPerRow:1,stackable:!0,children:Object(p.jsx)(Pt,{state:g,resolve:function(e){for(var t={title:"Ventas",mensaje:"Ultimos 25 Documento",detalles:{}},n=0;n<e.length;n++){var o=e[n];t.detalles.hasOwnProperty(o.moneda.nombre)?t.detalles[o.moneda.nombre].total+=o.total_documento_fin:t.detalles[o.moneda.nombre]={simbolo:o.moneda.simbolo,total:o.total_documento_fin}}return t}})}),Object(p.jsx)(_t.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,children:Object(p.jsx)(_t.a,{children:Object(p.jsx)(_t.a.Content,{style:{overflowY:"scroll",height:"30vh"},children:Object(p.jsx)(Ct.a,{children:g.map((function(e,t){var n,o,i;return Object(p.jsxs)(Ct.a.Event,{children:[Object(p.jsx)(Ct.a.Label,{icon:"shopping bag"}),Object(p.jsxs)(Ct.a.Content,{children:[Object(p.jsx)(Ct.a.Date,{children:Object(p.jsx)(le.a,{fromNow:!0,children:e.updated_at})}),Object(p.jsxs)(Ct.a.Summary,{children:[Object(p.jsxs)(r.b,{to:"/space/ventas/".concat(e.id),state:{model:e},children:[null===e||void 0===e||null===(n=e.serie)||void 0===n?void 0:n.descripcion," ",null===e||void 0===e||null===(o=e.serie)||void 0===o?void 0:o.serie,"-",null===e||void 0===e?void 0:e.correlativo," \xa0\xa0\xa0"]}),null===e||void 0===e||null===(i=e.moneda)||void 0===i?void 0:i.simbolo," ",e.total_documento_fin]}),Object(p.jsx)(Ct.a.Meta,{children:Object(p.jsxs)(Ct.a.Like,{children:[Object(p.jsx)(Q.a,{name:"comments outline"}),"1 Comentarios"]})})]})]})}))})})})})]})]})})]})};var Ft={show:function(){return new Promise((function(e,t){m.get("/local").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("local/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("precio",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t,n){return new Promise((function(o,i){m.put("precio/"+t+"/"+n,e).then((function(e){o(e.data)}))}))},destroy:function(e,t,n){m.delete("precio/"+t+"/"+n,e).then((function(e){return e.data}))}},Dt=function(){var e,t,n,i,c,a,r,s=Object(y.h)(),d=Object(y.g)(),u=Object(o.useContext)(_).empresa,j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],v=Object(o.useState)(null),O=Object(l.a)(v,2),x=O[0],f=O[1],g=Object(o.useState)([]),w=Object(l.a)(g,2),P=w[0],V=w[1],F=Object(o.useState)({show:!1,message:"Eliminar Precio"}),D=Object(l.a)(F,2),T=D[0],I=D[1],N=Object(o.useState)({page:0,limit:14,order:{id:"DESC"}}),q=Object(l.a)(N,2),E=q[0],A=q[1],L=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={}).filter=[["producto_id","=",t.id]],n.limit=25,n.order={id:"DESC"},e.next=6,he.showDetalles(u.empresa.id,u.id,1,n);case 6:o=e.sent,V(o.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(U.a)(H.a.mark((function e(){var t,n,o,i=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]&&i[0],t=i.length>1&&void 0!==i[1]&&i[1],n=u.empresa.id,e.next=5,ze.show("producto/"+n,t);case 5:o=e.sent,h(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft.destroy(T.precio.id);case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=yt(E);console.log(e),R(!1,e)}),[E]),Object(o.useEffect)((function(){var e,t,n,o,i,c;if((null===d||void 0===d||null===(e=d.state)||void 0===e?void 0:e.reload)&&(null===d||void 0===d||null===(t=d.state)||void 0===t||null===(n=t.reload)||void 0===n?void 0:n.producto_id)){var a=yt(E);R(!1,a),f(Object(k.a)({},d.state.reload.producto_id)),d.state=null}if((null===d||void 0===d||null===(o=d.state)||void 0===o?void 0:o.reload)&&(null===d||void 0===d||null===(i=d.state)||void 0===i||null===(c=i.reload)||void 0===c?void 0:c.precio_id)){var r,l;if(null===d||void 0===d||null===(r=d.state)||void 0===r||null===(l=r.reload)||void 0===l?void 0:l.push){var s=x,u=x.precios||[];u.push(d.state.reload.precio_id),s.precios=u,f(Object(k.a)({},s))}else{var j=null===x||void 0===x?void 0:x.precios.map((function(e,t){return e.id===d.state.reload.precio_id.id?d.state.reload.precio_id:e}));if(j){var b=x;b.precios=j,f(Object(k.a)({},b))}}d.state=null}}),[null===d||void 0===d?void 0:d.state]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(C.a.Column,{width:8,children:[Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(ie.a.Item,{children:[Object(p.jsx)(ie.a.Content,{floated:"left"}),Object(p.jsxs)(ie.a.Content,{floated:"right",children:[Object(p.jsx)(ve,{child:Object(p.jsx)(St,{query:E,setQuery:A})}),Object(p.jsx)(G.a,{size:"mini",color:"teal",onClick:function(){s("/welcome/productos/create",{state:{backgroundLocation:d,model:{empresa_id:u.empresa.id,local_id:u.id,afecto:1},empresa:u}})},children:"Nuevo Producto"})]})]})})}),Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(p.jsxs)(ie.a.Item,{children:[Object(p.jsx)(ie.a.Content,{floated:"left",children:null===E||void 0===E||null===(e=E.filter)||void 0===e?void 0:e.map((function(e,t){return Object(p.jsxs)(K.a,{as:"a",onClick:function(){!function(e){var t=E;t.filter.splice(e,1),A(Object(k.a)({},t))}(t)},children:[e[0],Object(p.jsx)(Q.a,{name:"delete"},t)]},t)}))}),Object(p.jsx)(ie.a.Content,{children:m?Object(p.jsx)(S.a,{pagination:!0,size:"mini",children:null===m||void 0===m||null===(t=m.links)||void 0===t?void 0:t.map((function(e,t){var n=parseFloat(null===e||void 0===e?void 0:e.label);return"number"===typeof n&&n?Object(p.jsx)(S.a.Item,{as:"a",active:null===e||void 0===e?void 0:e.active,onClick:function(){!function(e){var t=Object(k.a)(Object(k.a)({},E),{},{page:e});R(!1,t)}(n)},children:Object(p.jsx)("span",{children:null===e||void 0===e?void 0:e.label})},t):Object(p.jsx)(p.Fragment,{})}))}):Object(p.jsx)("div",{className:"ui placeholder",style:{padding:"8px"},children:Object(p.jsx)("div",{className:"line"})})})]})})}),Object(p.jsx)(C.a.Row,{children:Object(p.jsx)(C.a.Column,{style:{overflowY:"scroll",height:"83vh",marginTop:"1rem"},children:Object(p.jsxs)(we.a,{celled:!0,selectable:!0,children:[Object(p.jsx)(we.a.Header,{children:Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.HeaderCell,{children:"Codigo"}),Object(p.jsx)(we.a.HeaderCell,{children:"Descripci\xf3n"}),Object(p.jsx)(we.a.HeaderCell,{children:"Codigo de Barras"}),Object(p.jsx)(we.a.HeaderCell,{children:"Marca"}),Object(p.jsx)(we.a.HeaderCell,{children:"Presentaci\xf3n"}),Object(p.jsx)(we.a.HeaderCell,{children:"Categor\xeda"}),Object(p.jsx)(we.a.HeaderCell,{children:"Sub Categoria"})]})}),Object(p.jsx)(we.a.Body,{children:m?null===m||void 0===m||null===(n=m.data)||void 0===n?void 0:n.map((function(e,t){var n,o,i,c;return Object(p.jsxs)(we.a.Row,{onClick:function(){var t;f(t=e),L(t)},children:[Object(p.jsx)(we.a.Cell,{width:1,children:e.codigo}),Object(p.jsxs)(we.a.Cell,{width:6,children:[e.nombre,"\xa0",nt(e.updated_at)&&Object(p.jsx)(ot,{index:t})]}),Object(p.jsx)(we.a.Cell,{width:2,children:null===e||void 0===e?void 0:e.codigo_barras}),Object(p.jsx)(we.a.Cell,{width:2,children:null===e||void 0===e||null===(n=e.marca)||void 0===n?void 0:n.nombre}),Object(p.jsx)(we.a.Cell,{width:1,children:null===e||void 0===e||null===(o=e.presentacion)||void 0===o?void 0:o.nombre}),Object(p.jsx)(we.a.Cell,{width:2,children:null===e||void 0===e||null===(i=e.categoria)||void 0===i?void 0:i.nombre}),Object(p.jsx)(we.a.Cell,{width:2,children:null===e||void 0===e||null===(c=e.subcategoria)||void 0===c?void 0:c.nombre})]})})):Array(14).fill(null).map((function(e,t){return Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.Cell,{width:1,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(we.a.Cell,{width:6,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(we.a.Cell,{width:2,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(we.a.Cell,{width:2,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(we.a.Cell,{width:1,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(we.a.Cell,{width:2,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})}),Object(p.jsx)(we.a.Cell,{width:2,children:Object(p.jsx)("div",{className:"ui placeholder",children:Object(p.jsx)("div",{className:"line"})})})]})}))})]})})})]}),Object(p.jsxs)(C.a.Column,{width:5,children:[x&&x.id&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(_t.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,style:{marginTop:"5vh"},children:[Object(p.jsxs)(_t.a,{children:[Object(p.jsx)(_t.a.Content,{children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(_t.a.Header,{children:[null===x||void 0===x?void 0:x.nombre," ",nt(null===x||void 0===x?void 0:x.updated_at)&&Object(p.jsx)(ot,{index:null===x||void 0===x?void 0:x.id})]}),Object(p.jsx)(_t.a.Description,{children:Object(p.jsx)(we.a,{basic:"very",children:Object(p.jsxs)(we.a.Body,{children:[Object(p.jsxs)(we.a.Row,{children:[Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"C\xf3digo:"}),Object(p.jsx)("br",{}),null===x||void 0===x?void 0:x.codigo]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"C\xf3digo de Barras:"}),Object(p.jsx)("br",{}),null===x||void 0===x?void 0:x.codigo_barras]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"Marca:"}),Object(p.jsx)("br",{}),null===x||void 0===x||null===(i=x.marca)||void 0===i?void 0:i.nombre]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"Linea:"}),Object(p.jsx)("br",{}),null===x||void 0===x||null===(c=x.linea)||void 0===c?void 0:c.nombre]})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"Afecto:"}),Object(p.jsx)("br",{}),(null===x||void 0===x?void 0:x.afecto)?"Si":"No"]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"Precio de Compra:"}),Object(p.jsx)("br",{}),null===x||void 0===x||null===(a=x.moneda)||void 0===a?void 0:a.simbolo," ",null===x||void 0===x?void 0:x.precio_compra]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"Peso:"}),Object(p.jsx)("br",{}),null===x||void 0===x?void 0:x.peso," KG"]}),Object(p.jsx)(we.a.Cell,{children:"\xa0"})]}),Object(p.jsxs)(we.a.Row,{children:[Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"% IGV:"}),Object(p.jsx)("br",{}),null===x||void 0===x?void 0:x.igv]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"% Detracci\xf3n:"}),Object(p.jsx)("br",{}),null===x||void 0===x?void 0:x.por_detraccion]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"% ISC:"}),Object(p.jsx)("br",{}),null===x||void 0===x?void 0:x.por_isc]}),Object(p.jsx)(we.a.Cell,{children:" \xa0"})]})]})})})]})}),Object(p.jsx)(_t.a.Content,{extra:!0,children:Object(p.jsx)(G.a,{primary:!0,onClick:function(){s("/welcome/productos/"+x.id,{state:{backgroundLocation:d,model:x,empresa:u}})},children:"Editar"})})]}),Object(p.jsx)(_t.a,{children:Object(p.jsxs)(_t.a.Content,{style:{overflowY:"scroll",height:"24vh"},children:[Object(p.jsxs)(_t.a.Header,{children:["Precios de Venta",Object(p.jsxs)(G.a,{floated:"right",icon:!0,labelPosition:"left",primary:!0,size:"small",onClick:function(){s("/welcome/precios/create",{state:{backgroundLocation:d,model:{local_id:u.id,empresa_id:u.empresa.id,producto_id:x.id,costo_compra:x.precio_compra,presentacion_id:49},empresa:u}})},style:{marginBottom:"1vh"},children:[Object(p.jsx)(Q.a,{name:"currency"}),"Nuevo Precio"]})]}),Object(p.jsx)(_t.a.Description,{children:Object(p.jsxs)(we.a,{basic:"very",children:[Object(p.jsx)(we.a.Header,{children:Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Presentacion Unitaria",children:"PST."})}),Object(p.jsx)(we.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Utlidad",children:"UTL."})}),Object(p.jsx)(we.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Precio de Compra sin IGV",children:"COSTO"})}),Object(p.jsx)(we.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Precio de Venta sin IGV",children:"GRAV."})}),Object(p.jsx)(we.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Valor del IGV",children:"IGV"})}),Object(p.jsx)(we.a.HeaderCell,{children:Object(p.jsx)("abbr",{title:"Precio de Venta",children:"PV."})}),Object(p.jsx)(we.a.HeaderCell,{})]})}),Object(p.jsx)(we.a.Body,{children:null===x||void 0===x||null===(r=x.precios)||void 0===r?void 0:r.map((function(e,t){var n,o,i,c;return Object(p.jsxs)(we.a.Row,{children:[Object(p.jsxs)(we.a.Cell,{children:[e.presentacion.nombre," \xa0",nt(e.updated_at)&&Object(p.jsx)(ot,{index:t})," "]}),Object(p.jsxs)(we.a.Cell,{children:["% ",null===e||void 0===e?void 0:e.por_utilidad]}),Object(p.jsxs)(we.a.Cell,{children:[null===(n=x.moneda)||void 0===n?void 0:n.simbolo," ",null===e||void 0===e?void 0:e.costo_compra]}),Object(p.jsxs)(we.a.Cell,{children:[null===e||void 0===e||null===(o=e.moneda)||void 0===o?void 0:o.simbolo," ",e.costo_venta]}),Object(p.jsxs)(we.a.Cell,{children:[null===e||void 0===e||null===(i=e.moneda)||void 0===i?void 0:i.simbolo," ",e.igv]}),Object(p.jsx)(we.a.Cell,{children:Object(p.jsxs)("b",{children:[null===e||void 0===e||null===(c=e.moneda)||void 0===c?void 0:c.simbolo," ",e.precio_venta]})}),Object(p.jsx)(we.a.Cell,{children:Object(p.jsx)(G.a.Group,{size:"mini",children:Object(p.jsx)(G.a,{icon:"pencil",onClick:function(){var t;s("/welcome/precios/"+(t=e).id,{state:{backgroundLocation:d,model:t,empresa:u}})}})})})]})}))}),Object(p.jsx)(we.a.Footer,{fullWidth:!0,children:Object(p.jsxs)(we.a.Row,{children:[Object(p.jsx)(we.a.HeaderCell,{}),Object(p.jsx)(we.a.HeaderCell,{colSpan:"6"})]})})]})})]})})]}),Object(p.jsx)(_t.a.Group,{}),!!x&&!!P.length&&Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(_t.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,children:Object(p.jsx)(_t.a,{children:Object(p.jsx)(_t.a.Content,{style:{overflowY:"scroll",height:"30vh"},children:Object(p.jsx)(Ct.a,{children:P.map((function(e,t){var n,o;return Object(p.jsxs)(Ct.a.Event,{children:[Object(p.jsx)(Ct.a.Label,{icon:"box"}),Object(p.jsxs)(Ct.a.Content,{children:[Object(p.jsx)(Ct.a.Date,{children:Object(p.jsx)(le.a,{fromNow:!0,children:e.updated_at})}),Object(p.jsxs)(Ct.a.Summary,{children:[null===e||void 0===e||null===(n=e.venta)||void 0===n?void 0:n.uniqueserie,"\xa0\xa0\xa0",null===e||void 0===e||null===(o=e.moneda)||void 0===o?void 0:o.simbolo," ",e.total_documento_fin]}),Object(p.jsx)(Ct.a.Summary,{children:Object(p.jsx)(we.a,{basic:"very",children:Object(p.jsx)(we.a.Body,{children:Object(p.jsxs)(we.a.Row,{children:[Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"Cant:"}),Object(p.jsx)("br",{}),null===e||void 0===e?void 0:e.cantidad.toFixed(2)]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"Gravado:"}),Object(p.jsx)("br",{}),null===e||void 0===e?void 0:e.monto_base_igv.toFixed(2)]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"IGV:"}),Object(p.jsx)("br",{}),null===e||void 0===e?void 0:e.monto_igv.toFixed(2)]}),Object(p.jsxs)(we.a.Cell,{children:[Object(p.jsx)("b",{children:"PV:"}),Object(p.jsx)("br",{}),null===e||void 0===e?void 0:e.precio_venta.toFixed(2)]})]})})})})]})]})}))})})})})})]}),Object(p.jsx)(de.a,{open:T.show,content:T.message,onCancel:function(){I({show:!T.show})},onConfirm:function(){z()}})]})]})},Tt=Fe.a({presentacion_id:Fe.b().required("Complete"),moneda_id:Fe.b().required("Complete"),producto_id:Fe.b().required("Complete")}).required(),It=n(46),Nt=n(47),qt=function(e){Object(It.a)(n,e);var t=Object(Nt.a)(n);function n(){return Object(Je.a)(this,n),t.apply(this,arguments)}return Object(Ye.a)(n,[{key:"costoVenta",value:function(e){return e.precio_venta=this.roundOff(1.18*e.costo_venta).toFixed(4),e.por_utilidad=this.roundOff(e.costo_venta/e.costo_compra*100-100).toFixed(4),e.utilidad=this.roundOff(e.por_utilidad*e.costo_venta/100).toFixed(4),e.igv=18,e}},{key:"precioVenta",value:function(e){return e.costo_venta=this.roundOff(e.precio_venta/1.18).toFixed(4),e.por_utilidad=this.roundOff(e.costo_venta/e.costo_compra*100-100).toFixed(4),e.utilidad=this.roundOff(e.por_utilidad*e.costo_venta/100).toFixed(4),e.igv=18,e}}]),n}(We),Et=qt,At=function(e){var t,n,c,a=e.state,r=Object(y.h)(),s=Object(y.g)(),d=Object(o.useContext)(_),u=d.empresa,j=(d.setEmpresa,Object(o.useState)(!1)),b=Object(l.a)(j,2),m=b[0],h=b[1],v=Object(o.useState)(!1),O=Object(l.a)(v,2),x=O[0],f=O[1],g=Object(Oe.e)({resolver:Object(Se.a)(Tt),defaultValues:a}),w=g.control,C=g.handleSubmit,k=g.setValue,S=g.watch,P=g.formState.errors,V=S(),F=new Et;i.a.useEffect((function(){var e=S((function(e,t){var n=t.name,o=t.type,i=[];"precio_venta"===n&&"change"===o&&(i=F.precioVenta(e)),"costo_venta"===n&&"change"===o&&(i=F.costoVenta(e));for(var c=Object.keys(i),a=0;a<c.length;a++){var r=c[a];k(r,i[r])}}));return function(){return e.unsubscribe()}}),[S]);var D=Object(o.useState)(),T=Object(l.a)(D,2),I=T[0],N=T[1];Object(o.useEffect)((function(){Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.id){e.next=7;break}return e.next=3,Ft.find(a.id);case 3:return t=e.sent,e.abrupt("return",N(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))()}),{data:I});var q=function(e,t){r(s.state.backgroundLocation.pathname,{state:{reload:{precio_id:e,push:t}}})},E=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),!t||!t.id){e.next=8;break}return e.next=4,Ft.update(t,u.empresa.id,t.id);case 4:n=e.sent,q(n,!1),e.next=14;break;case 8:return e.next=10,Ft.create(t);case 10:return o=e.sent,h(!1),(null===o||void 0===o?void 0:o.errors)?f(Te(o)):(f(null),q(o,!0)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(L.a,{onSubmit:C(E),noValidate:!0,children:[Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Re,{model:Ie.presentacion,empresaContexto:u,control:w,venta:a,setValue:k,width:6}),Object(p.jsx)(Re,{model:Ie.moneda,empresaContexto:u,control:w,venta:a,setValue:k,width:3})]}),Object(p.jsxs)(L.a.Group,{children:[Object(p.jsx)(Ve,{name:"costo_compra",title:"Costo de Compra",control:w,errors:P,width:3,readOnly:!0}),Object(p.jsx)(Ve,{name:"igv",title:"% de IGV",control:w,errors:P,width:3,readOnly:!0}),Object(p.jsx)(Ve,{name:"por_utilidad",title:"% de Utilidad",type:"number",control:w,errors:P,width:3,readOnly:!0}),Object(p.jsx)(Ve,{name:"utilidad",title:(null===V||void 0===V||null===(t=V.moneda)||void 0===t?void 0:t.simbolo)?"Utilidad "+(null===V||void 0===V||null===(n=V.moneda)||void 0===n?void 0:n.simbolo):"Utilidad",control:w,errors:P,width:3,readOnly:!0,type:"number"}),Object(p.jsx)(Ve,{name:"costo_venta",title:"Costo de Venta",control:w,errors:P,width:3,type:"number"}),Object(p.jsx)(Ve,{name:"precio_venta",title:"Precio Venta",control:w,errors:P,width:3,type:"number"})]}),(null===(c=Object.keys(P))||void 0===c?void 0:c.length)?Object(p.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(p.jsx)(p.Fragment,{}),(null===x||void 0===x?void 0:x.length)&&Object(p.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:x}),Object(p.jsx)(G.a,{loading:m,secondary:!0,children:"Guardar"})]})};function Lt(){return Object(p.jsx)("div",{children:Object(p.jsx)("h2",{children:"Reports"})})}function Rt(){return Object(p.jsx)("div",{children:Object(p.jsx)("h2",{children:"Profile"})})}function Gt(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Nothing to see here!"}),Object(p.jsx)("p",{children:Object(p.jsx)(r.b,{to:"/",children:"Go to the home page"})})]})}var zt=function(){var e=Object(o.useState)({status:!1}),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(y.g)(),a=c.state||{backgroundLocation:c};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(y.e,{location:(null===a||void 0===a?void 0:a.backgroundLocation)?null===a||void 0===a?void 0:a.backgroundLocation:c,children:[Object(p.jsx)(y.c,{path:"/",element:Object(p.jsx)(w,{})}),Object(p.jsx)(y.c,{path:"/signup",element:Object(p.jsx)(B,{})}),Object(p.jsx)(y.c,{path:"welcome",element:Object(p.jsx)(E,{}),children:Object(p.jsx)(y.c,{path:"empresas",element:Object(p.jsx)(ee,{})})}),Object(p.jsxs)(y.c,{path:"/workspace",element:Object(p.jsx)(q,{}),children:[Object(p.jsx)(y.c,{path:"app",element:Object(p.jsx)(oe,{})}),Object(p.jsx)(y.c,{path:"ventas",element:Object(p.jsx)(it,{})}),Object(p.jsx)(y.c,{path:"ventas/:id",fullwidth:!0,element:Object(p.jsx)($e,{state:null===a||void 0===a?void 0:a.model,editionMode:!0})}),Object(p.jsx)(y.c,{path:"contactos",element:Object(p.jsx)(Vt,{})}),Object(p.jsx)(y.c,{path:"productos",element:Object(p.jsx)(Dt,{})}),Object(p.jsx)(y.c,{path:"reports",element:Object(p.jsx)(Lt,{})}),Object(p.jsx)(y.c,{path:"profile",element:Object(p.jsx)(Rt,{})})]}),Object(p.jsxs)(y.c,{path:"/space",element:Object(p.jsx)(gt,{}),children:[Object(p.jsx)(y.c,{path:"productos/create/:id",element:Object(p.jsx)(D,{children:Object(p.jsx)($e,{state:null===a||void 0===a?void 0:a.model,editionMode:!0})})}),Object(p.jsx)(y.c,{path:"productos/:id",element:Object(p.jsx)(D,{children:Object(p.jsx)($e,{state:null===a||void 0===a?void 0:a.model,editionMode:!0})})}),Object(p.jsx)(y.c,{path:"ventas/create/:id",element:Object(p.jsx)($e,{formatPrint:n,setFormatPrint:i,state:null===a||void 0===a?void 0:a.model,editionMode:!0})}),Object(p.jsx)(y.c,{path:"ventas/:id",element:Object(p.jsx)($e,{formatPrint:n,setFormatPrint:i,state:null===a||void 0===a?void 0:a.model,editionMode:!0})})]}),Object(p.jsx)(y.c,{path:"*",element:Object(p.jsx)(Gt,{})})]}),(null===a||void 0===a?void 0:a.backgroundLocation)&&Object(p.jsxs)(y.e,{children:[Object(p.jsx)(y.c,{path:"welcome/empresas/create",element:Object(p.jsx)(ne,{size:"large",setTitle:"Crea Nueva Empresa",children:Object(p.jsx)(rt,{})})}),Object(p.jsx)(y.c,{path:"welcome/empresas/:id",element:Object(p.jsx)(ne,{size:"large",setTitle:"Editar Empresa",children:Object(p.jsx)(rt,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/locals/create",element:Object(p.jsx)(ne,{size:"large",setTitle:"Crea Nuevo Local",children:Object(p.jsx)(st,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/locals/:id",element:Object(p.jsx)(ne,{size:"large",setTitle:"Editar Local",children:Object(p.jsx)(st,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/clientes/create",element:Object(p.jsx)(ne,{size:"large",setTitle:"Crea Nuevo Cliente",children:Object(p.jsx)(jt,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/clientes/:id",element:Object(p.jsx)(ne,{size:"large",setTitle:"Editar Cliente",children:Object(p.jsx)(jt,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/moneda/create",element:Object(p.jsx)(ne,{size:"small",setTitle:"Crea Nueva Moneda",children:Object(p.jsx)(ht,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/moneda/:id",element:Object(p.jsx)(ne,{size:"small",setTitle:"Editar Moneda",children:Object(p.jsx)(ht,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/vehiculo/create",element:Object(p.jsx)(ne,{size:"small",setTitle:"Crea Nuevo Vehiculo",children:Object(p.jsx)(Ot,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/vehiculo/:id",element:Object(p.jsx)(ne,{size:"small",setTitle:"Editar Vehiculo",children:Object(p.jsx)(Ot,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/ventas/create",element:Object(p.jsx)(ne,{size:"fullscreen",setTitle:"Title",children:Object(p.jsx)(ht,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/ventas/:id",element:Object(p.jsx)(ne,{size:"fullscreen",setTitle:"Title"})}),Object(p.jsx)(y.c,{path:"welcome/productos/create",element:Object(p.jsx)(ne,{size:"large",setTitle:"Crea Nuevo Producto \xf3 Servicio",children:Object(p.jsx)(ft,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/productos/:id",element:Object(p.jsx)(ne,{size:"large",setTitle:"Editar Producto \xf3 Servicio",children:Object(p.jsx)(ft,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/precios/create",element:Object(p.jsx)(ne,{size:"small",setTitle:"Crea Nuevo Precio",children:Object(p.jsx)(At,{state:null===a||void 0===a?void 0:a.model})})}),Object(p.jsx)(y.c,{path:"welcome/precios/:id",element:Object(p.jsx)(ne,{size:"small",setTitle:"Editar Precio",children:Object(p.jsx)(At,{state:null===a||void 0===a?void 0:a.model})})})]})]})};console.log=function(){};var Bt=function(){return Object(p.jsx)(O,{children:Object(p.jsxs)(g,{children:[Object(p.jsx)(D,{children:Object(p.jsx)(r.a,{children:Object(p.jsx)(zt,{})})}),Object(p.jsx)(j.a,{})]})})};a.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(Bt,{})}),document.getElementById("root"))}},[[926,1,2]]]);
//# sourceMappingURL=main.8e0e8b72.chunk.js.map