(this["webpackJsonpinvoicer-front"]=this["webpackJsonpinvoicer-front"]||[]).push([[0],{488:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=488},596:function(e,t){},598:function(e,t){},628:function(e,t){},629:function(e,t){},740:function(e,t){},926:function(e,t,n){"use strict";n.r(t);var o=n(2),i=n.n(o),c=n(77),a=n.n(c),r=n(19),l=(n(459),n(460),n(13)),s=n(170),d=n.n(s);n(177);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return"any"===e?"https://api.fivip.net/index.php/api/v1":"public"===e?"https://api.fivip.net":void 0},j=n(69),b=d.a.create({baseURL:u()});b.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),b.interceptors.response.use((function(e){return e}),(function(e){var t,n;return 401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&j.b.error("Error de Credenciales!"),422===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&j.b.error("Error al enviar datos!"),Promise.reject(e)}));var m=b;m.defaults.headers.common.Authorization=localStorage.getItem("jwt")?"Bearer "+localStorage.getItem("jwt"):null;var h={Login:function(e){return new Promise((function(t,n){m.post("/login",e).then((function(e){m.defaults.headers.common.Authorization="Bearer "+e.data[0].token,t(e.data[0].token)}),(function(e){n(new Error(e))}))}))},Me:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.defaults.headers.common.Authorization="Bearer "+e,new Promise((function(e,t){m.get("/me").then((function(t){e(t.data)}))}))},Out:function(){return new Promise((function(e,t){m.get("/logout").then((function(t){e(t.data)}))}))}},v=n(1),x=i.a.createContext({});function p(e){var t=e.children,n=Object(o.useState)({}),i=Object(l.a)(n,2),c=i[0],a=i[1],r=Object(o.useState)((function(){return window.localStorage.getItem("jwt")})),s=Object(l.a)(r,2),d=s[0],u=s[1];return Object(o.useEffect)((function(){if(!d)return a({});h.Me(d).then((function(e){a(e)}))}),[d]),Object(v.jsx)(x.Provider,{value:{me:c,jwt:d,setMe:a,setJwt:u},children:t})}var O=x,f=i.a.createContext({});function g(e){var t=e.children,n=Object(o.useState)(JSON.parse(localStorage.getItem("print_setting"))),i=Object(l.a)(n,2),c=i[0],a=i[1],r=Object(o.useState)(JSON.parse(window.localStorage.getItem("logo"))),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(JSON.parse(window.localStorage.getItem("empresa"))),b=Object(l.a)(j,2),m=b[0],h=b[1];return Object(v.jsx)(f.Provider,{value:{empresa:m,setEmpresa:h,logo:d,setLogo:u,impresion:c,setImpresion:a},children:t})}var _=f,w=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Home"}),Object(v.jsx)(r.b,{to:"/workspace",children:"App"})]})},C=n(962),y=n(22),k=n(8),S=n(960),T=n(950);function P(){var e=Object(o.useContext)(O),t=e.jwt,n=e.setMe,i=e.setJwt,c=Object(o.useState)({loading:!1,error:!1}),a=Object(l.a)(c,2),r=a[0],s=a[1],d=Object(o.useCallback)((function(e){s({loading:!0,error:!1}),h.Login(e).then((function(e){window.localStorage.setItem("jwt",e),h.Me(e).then((function(e){n(e)})),s({loading:!1,error:!1}),i(e)})).catch((function(e){window.localStorage.removeItem("jwt"),s({loading:!1,error:!0})}))}),[i]),u=Object(o.useCallback)((function(){window.localStorage.removeItem("jwt"),i(null)}),[i]);return{isLogged:Boolean(t),isLoginLoading:r.loading,hasLoginError:r.error,login:d,logout:u}}var V=i.a.createContext({});function F(e){var t=e.children,n=Object(o.useState)({}),i=Object(l.a)(n,2),c=i[0],a=i[1],r=Object(o.useState)(JSON.parse(localStorage.getItem("venta_default_content"))),s=Object(l.a)(r,2),d=s[0],u=s[1];return Object(v.jsx)(V.Provider,{value:{documento:c,setDocumento:a,ventaDefaultContent:d,handleDefaultVenta:function(){var e={};e.cliente=c.cliente,e.cliente_id=c.cliente_id,e.almacen=c.almacen,e.almacen_id=c.almacen_id,e.forma_pago=c.forma_pago,e.forma_pago_id=c.forma_pago_id,e.moneda=c.moneda,e.moneda_id=c.moneda_id,localStorage.setItem("venta_default_content",JSON.stringify(e)),u(e),console.log(e)}},children:t})}var D=V,I=function(){var e=Object(y.g)(),t=Object(o.useContext)(O).me,n=Object(o.useContext)(_),i=n.empresa,c=n.impresion,a=n.setImpresion,s=Object(o.useContext)(D).handleDefaultVenta,d=P(),u=d.isLogged,b=d.logout,m=Object(o.useState)(!1),h=Object(l.a)(m,2),x=h[0],p=h[1];Object(o.useEffect)((function(){e.pathname.search("/space/ventas/")&&e.pathname.search("/workspace/ventas")?p(!1):p(!0)}),[e]);var f=Object(y.h)(),g=function(e){localStorage.setItem("print_setting",JSON.stringify(Object(k.a)(Object(k.a)({},c),{size:e}))),a(Object(k.a)(Object(k.a)({},c),{size:e}))};return Object(v.jsxs)(v.Fragment,{children:[!u&&Object(v.jsx)(y.a,{to:"/signup"}),Object(v.jsxs)(S.a,{fixed:"top",inverted:!0,children:[Object(v.jsx)(r.b,{to:"/",children:Object(v.jsx)(S.a.Item,{as:"a",children:"Dashboard"})}),Object(v.jsx)(r.b,{to:"/welcome/empresas",children:Object(v.jsx)(S.a.Item,{as:"a",children:"Empresas"})}),Object(v.jsx)(r.b,{to:"/workspace/app",children:Object(v.jsx)(S.a.Item,{as:"a",onClick:function(){i?f({pathname:"/workspace/app"}):j.b.error("Selecione un Local \xf3 sucursal para continuar")},children:"Workspace"})}),Object(v.jsxs)(S.a.Menu,{position:"right",children:[x&&Object(v.jsx)(S.a.Item,{children:Object(v.jsx)(T.a,{as:"a",text:"Ajustes de Documento",style:{color:"white",fontSize:"13px"},children:Object(v.jsxs)(T.a.Menu,{children:[Object(v.jsx)(T.a.Header,{icon:"print",content:"Configuraci\xf3n de Impresi\xf3n"}),Object(v.jsx)(T.a.Item,{active:null===c||void 0===c?void 0:c.after_save,onClick:function(){var e;e=!(null===c||void 0===c?void 0:c.after_save),localStorage.setItem("print_setting",JSON.stringify(Object(k.a)(Object(k.a)({},c),{after_save:e}))),a(Object(k.a)(Object(k.a)({},c),{after_save:e}))},children:"Mostrar impresion despues de generar el documento"}),Object(v.jsx)(T.a.Item,{active:"A4"===(null===c||void 0===c?void 0:c.size),onClick:function(){g("A4")},children:"Impresi\xf3n A4"}),Object(v.jsx)(T.a.Item,{active:"88mm"===(null===c||void 0===c?void 0:c.size),onClick:function(){g("88mm")},children:"Impresi\xf3n Ticket 88 mm"}),Object(v.jsx)(T.a.Item,{disabled:!0,active:"70mm"===(null===c||void 0===c?void 0:c.size),onClick:function(){g("70mm")},children:"Impresi\xf3n Ticket 80 mm"}),Object(v.jsx)(T.a.Item,{disabled:!0,active:"80mm"===(null===c||void 0===c?void 0:c.size),onClick:function(){g("80mm")},children:"Impresi\xf3n Ticket 70 mm"}),Object(v.jsx)(T.a.Divider,{}),Object(v.jsx)(T.a.Item,{onClick:function(){s()},children:"Ajustes Predeterminados"})]})})}),u?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S.a.Item,{as:"a",name:"profile",children:t.name}),Object(v.jsx)(S.a.Item,{as:"a",name:"Logout",onClick:function(){b(),f({pathname:"/signup"})},children:"Logout"})]}):Object(v.jsx)(r.b,{to:"/signup",children:Object(v.jsx)(S.a.Item,{as:"a",name:"Signup",children:"Sign Up"})})]})]})]})},N=function(){return Object(v.jsxs)("div",{className:"ui vertical labeled icon menu",children:[Object(v.jsxs)(r.c,{to:"/workspace/app",end:"active",className:"item",children:[Object(v.jsx)("i",{"aria-hidden":"true",className:"dashboard icon"}),"Inicio"]}),Object(v.jsxs)(r.c,{to:"/workspace/ventas",end:"active",className:"item",children:[Object(v.jsx)("i",{"aria-hidden":"true",className:"file alternate outline icon"}),"Ventas"]}),Object(v.jsxs)(r.c,{to:"/workspace/contactos",end:"active",className:"item",children:[Object(v.jsx)("i",{"aria-hidden":"true",className:"users icon"}),"Contactos"]}),Object(v.jsxs)(r.c,{to:"/workspace/productos",end:"active",className:"item",children:[Object(v.jsx)("i",{"aria-hidden":"true",className:"box icon"}),"Productos"]})]})},q=function(){var e=Object(o.useContext)(_).empresa;return Object(v.jsx)(v.Fragment,{children:e?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I,{}),Object(v.jsx)(C.a,{children:Object(v.jsxs)(C.a.Row,{columns:3,children:[Object(v.jsx)(C.a.Column,{width:1,children:Object(v.jsx)(N,{fluid:!0})}),Object(v.jsx)(y.b,{})]})})]}):Object(v.jsx)(y.a,{to:"/welcome/empresas"})})},E=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I,{}),Object(v.jsx)(C.a,{children:Object(v.jsxs)(C.a.Row,{columns:3,style:{height:"80rem"},children:[Object(v.jsx)(C.a.Column,{width:10,style:{border:"solid 1px #d5d8da"},children:Object(v.jsx)(y.b,{})}),Object(v.jsx)(C.a.Column,{width:6})]})})]})},A=n(963),L=n(951),R=n(964),G=n(286),z=n(959),B=function(){var e=Object(o.useState)({email:"",password:""}),t=Object(l.a)(e,2),n=t[0],i=t[1],c=P(),a=c.login,r=c.isLogged,s=c.isLoginLoading,d=c.hasLoginError,u=function(e){var t={};t[e.target.name]=e.target.value,i(Object(k.a)(Object(k.a)({},n),t))};return Object(v.jsx)(C.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(v.jsxs)(C.a.Column,{style:{maxWidth:450},children:[Object(v.jsx)(A.a,{as:"h2",color:"teal",textAlign:"center",children:"Log-in to your account"}),Object(v.jsx)(L.a,{size:"large",loading:s,children:Object(v.jsxs)(R.a,{stacked:!0,children:[Object(v.jsx)(L.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"email",onChange:u,value:null===n||void 0===n?void 0:n.email}),Object(v.jsx)(L.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",onChange:u,value:null===n||void 0===n?void 0:n.password}),r&&Object(v.jsx)(y.a,{to:"/welcome/empresas"}),Object(v.jsx)(G.a,{color:"teal",fluid:!0,size:"large",onClick:function(){a(n)},children:"Login"})]})}),d&&Object(v.jsx)(z.a,{error:!0,header:"Error!",content:"Verifique que haya escrito bien sus credenciales."}),Object(v.jsxs)(z.a,{children:["New to us? ",Object(v.jsx)("a",{href:"#",children:"Registrate"})]})]})})},M=n(14),H=n.n(M),U=n(16),J=(n(487),n(961)),W=n(946),Y=n(953),Q=n(79),K=n(173),X=n(947);var Z={show:function(){return new Promise((function(e,t){m.get("/empresa").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("empresa/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("empresa/create",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("empresa/"+t,e).then((function(e){n(e.data)}))}))},updateLogo:function(e,t){var n=new FormData;return n.append("file",t),new Promise((function(o,i){m.post("empresa/logo/".concat(e),n,{"content-type":t.type}).then((function(e){o(e.data)})).catch((function(e){e.response&&o(e.response.data)}))}))},updateCertificado:function(e,t){var n=new FormData;return n.append("file",t),new Promise((function(o,i){m.post("empresa/certificado/".concat(e),n,{"content-type":t.type}).then((function(e){o(e.data)})).catch((function(e){e.response&&o(e.response.data)}))}))},unlockCertificado:function(e,t){return new Promise((function(n,o){m.post("empresa/unlock/".concat(e),{pass:t}).then((function(e){n(e.data)})).catch((function(e){e.response&&n(e.response.data)}))}))}};var $={show:function(){return new Promise((function(e,t){m.get("/local").then((function(t){e(t.data)}),(function(e){t(!1)}))}))},find:function(e){return new Promise((function(t,n){m.get("local/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("local",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("local/"+t,e).then((function(e){n(e.data)}))}))}};n(177);var ee=function(){var e,t,n=Object(y.g)(),i=Object(y.h)(),c=u("public"),a=Object(o.useContext)(_),s=(a.empresa,a.setEmpresa),d=Object(o.useState)(!1),j=Object(l.a)(d,2),b=j[0],m=j[1],h=Object(o.useState)(!1),x=Object(l.a)(h,2),p=x[0],O=x[1],f=Object(o.useState)([]),g=Object(l.a)(f,2),w=g[0],C=g[1];Object(o.useEffect)((function(){k()}),{instancias:w});var k=function(){var e=Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,$.show();case 3:return t=e.sent,O(!1),e.abrupt("return",C(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(U.a)(H.a.mark((function e(t,n){var o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.find(n);case 2:o=e.sent,s(o),window.window.localStorage.setItem("empresa",JSON.stringify(o)),i({pathname:"/workspace/app"});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){m(!b)};return(null===n||void 0===n?void 0:n.state)&&(null===n||void 0===n||null===(e=n.state)||void 0===e||null===(t=e.reload)||void 0===t?void 0:t.empresa)&&(k(),n.state=null),Object(v.jsxs)("div",{style:{marginTop:"1rem",marginBottom:"1rem"},children:[Object(v.jsx)(r.b,{to:"/welcome/empresas/create",state:{backgroundLocation:n},children:Object(v.jsx)(G.a,{primary:!0,floated:"right",style:{marginBottom:"1rem"},children:"Nueva Empresa"})}),p?Object(v.jsx)(J.a,{active:!0,inverted:!0,children:Object(v.jsx)(W.a,{size:"large",children:"Cargando..."})}):(null===w||void 0===w?void 0:w.length)?w.map((function(e,t){return Object(v.jsx)(Y.a.Group,{divided:!0,children:Object(v.jsxs)(Y.a,{children:[Object(v.jsx)(Y.a.Image,{id:"logo-".concat(e.id),src:"".concat(c,"/storage/").concat(e.id,"/").concat(e.logo)}),Object(v.jsxs)(Y.a.Content,{children:[Object(v.jsx)(Y.a.Header,{as:"a",children:e.nombre}),Object(v.jsx)(r.b,{to:"/welcome/locals/create",state:{backgroundLocation:n,model:{empresa_id:e.id}},children:Object(v.jsx)(G.a,{floated:"right",size:"mini",children:Object(v.jsx)(Q.a,{name:"plus"})})}),Object(v.jsx)(r.b,{to:"/welcome/empresas/".concat(e.id),state:{backgroundLocation:n,model:e},children:Object(v.jsx)(G.a,{floated:"right",size:"mini",icon:"pencil"})}),Object(v.jsxs)(Y.a.Meta,{children:[e.nombre_comercial," - Ruc ",e.ruc]}),Object(v.jsx)(Y.a.Extra,{children:Object(v.jsx)(K.a,{children:"Activo"})}),e.locales.map((function(t){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(X.a,{}),Object(v.jsxs)(Y.a.Extra,{children:[Object(v.jsxs)(G.a,{size:"mini",primary:!0,floated:"right",onClick:function(){S(e,t.id)},children:["Ingresar",Object(v.jsx)(Q.a,{name:"right chevron"})]}),Object(v.jsx)(r.b,{to:"/welcome/locals/".concat(t.id),state:{backgroundLocation:n,model:t},children:Object(v.jsx)(G.a,{size:"mini",icon:"pencil",color:"teal",floated:"right",onClick:T})}),Object(v.jsx)(Y.a.Header,{as:"h4",children:t.nombre})]},t.id)]})}))]})]},t)},t)})):Object(v.jsx)(v.Fragment,{children:" settings no contenido posees empresa "})]})},te=n(230);var ne=function(e){e.setOpen,e.open;var t=e.size,n=(e.dimmer,e.setTitle),o=e.children,i=Object(y.h)();return Object(v.jsxs)(te.a,{closeIcon:!0,centered:!0,dimmer:"blurring",open:!0,onClose:function(){i(-1)},size:t,children:[Object(v.jsx)(te.a.Header,{children:n}),Object(v.jsx)(te.a.Content,{scrolling:!0,children:o})]})},oe=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(C.a.Column,{width:6}),Object(v.jsx)(C.a.Column,{width:8})]})},ie=n(956),ce=n(949),ae=n(967),re=n(106),le=n.n(re),se=function(e){var t=e.empresaContext;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(T.a,{as:"a",text:"Crear Nuevo",className:"button ui mini",children:Object(v.jsxs)(T.a.Menu,{children:[Object(v.jsx)(r.b,{className:"item",to:"/space/ventas/create/1",state:{model:{empresa_id:t.empresa.id,local_id:t.id,tipo_operacion_id:1,detalles:[],fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10)}},children:"Documento de Venta"}),Object(v.jsx)(r.b,{className:"item",to:"/space/ventas/create/2",state:{model:{empresa_id:t.empresa.id,local_id:t.id,tipo_operacion_id:2,detalles:[],fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10)}},children:"Cotizaci\xf3n"}),Object(v.jsx)(r.b,{className:"item",to:"/space/ventas/create/3",state:{model:{empresa_id:t.empresa.id,local_id:t.id,tipo_operacion_id:3,detalles:[],fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10)}},children:"Guia de Remisi\xf3n"})]})})})},de=n(948),ue=n(431),je=n.n(ue),be=n(123);function me(){return(me=Object(U.a)(H.a.mark((function e(t,n){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(u(),"/venta/download/").concat(t.empresa_id,"/").concat(t.local_id,"/").concat(t.id,"/").concat(n),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.blob()})).then((function(e){var o="cdn"===n?"zip":n;je()(e,"".concat(t.sunat_documento,".").concat(o))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he={show:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{limit:9,order:{id:"DESC"}},i=be.stringify(o);return new Promise((function(o,c){m.get("/venta/".concat(e,"/").concat(t,"?page=").concat(n,"&").concat(i)).then((function(e){o(e.data)}),(function(e){c(!1)}))}))},find:function(e,t,n){return new Promise((function(o,i){m.get("/venta/".concat(e,"/").concat(t,"/").concat(n)).then((function(e){o(e.data)}),(function(e){i(!1)}))}))},create:function(e){return console.log(e),new Promise((function(t,n){m.post("venta",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return e.transportista_id=null===e.transportista_id?void 0:e.transportista_id,e.ubigeo_destino_id=null===e.ubigeo_destino_id?void 0:e.ubigeo_destino_id,e.ubigeo_partida_id=null===e.ubigeo_partida_id?void 0:e.ubigeo_partida_id,new Promise((function(n,o){m.put("venta/"+e.empresa_id+"/"+e.local_id+"/"+t,e).then((function(e){n(e.data)}))}))},showDetalles:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{limit:20,order:{id:"DESC"}},i=be.stringify(o);return new Promise((function(o,c){m.get("/venta-detalle/".concat(e,"/").concat(t,"?page=").concat(n,"&").concat(i)).then((function(e){o(e.data)}),(function(e){c(!1)}))}))},anular:function(e){return console.log(e),new Promise((function(t,n){m.delete("venta/".concat(e.empresa_id,"/").concat(e.local_id,"/").concat(e.id),e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},sendSunat:function(e){return console.log(e),new Promise((function(t,n){m.get("venta/enviar/".concat(e.empresa_id,"/").concat(e.local_id,"/").concat(e.id),e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},download:function(e,t){return me.apply(this,arguments)}},ve=function(e){var t=e.documento,n=e.handleChangeVenta,i=Object(o.useContext)(_).empresa,c=Object(o.useState)(!1),a=Object(l.a)(c,2),s=a[0],d=a[1];return Object(v.jsxs)(v.Fragment,{children:[t&&Object(v.jsx)(T.a,{as:"a",text:"Convertir Documento",className:"button ui mini teal",children:Object(v.jsxs)(T.a.Menu,{children:[Object(v.jsxs)(T.a.Item,{onClick:function(){d(!s)},children:[Object(v.jsx)("i",{className:"delete icon"}),"Anular"]}),1!==t.tipo_operacion_id&&Object(v.jsxs)(r.b,{className:"item",to:"/space/ventas/create/1",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:null===t||void 0===t?void 0:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:1,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(v.jsx)("i",{className:"file alternate outline icon"}),"Venta"]}),2!==t.tipo_operacion_id&&3!==t.tipo_operacion_id&&Object(v.jsxs)(r.b,{className:"item",to:"/space/ventas/create/3",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:3,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(v.jsx)("i",{className:"file alternate outline icon"}),"Guia de Remisi\xf3n"]}),Object(v.jsxs)(r.b,{className:"item",to:"/space/ventas/create/4",state:{model:Object(k.a)(Object(k.a)({},t),{},{documento_relacion:t.documento_relacion.concat({documento_relacion_id:t.id,documento_relacion:t}),serie:void 0,correlativo:void 0,id:void 0,empresa_id:i.empresa.id,local_id:i.id,tipo_operacion_id:4,fecha_emision:(new Date).toISOString().substr(0,10),fecha_registro:(new Date).toISOString().substr(0,10),transportista_id:null,ubigeo_partida:null,ubigeo_destino:null})},children:[Object(v.jsx)("i",{className:"file alternate outline icon"}),"Nota de Cr\xe9dito"]})]})}),Object(v.jsx)(de.a,{open:s,content:"\xbfSeguro que deseas anular este documento? -Esta operacion es irreversible recuerde que puede editar este documento",onCancel:function(){d(!s)},onConfirm:Object(U.a)(H.a.mark((function e(){var o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.anular(t);case 2:o=e.sent,n(o),console.log(o),d(!s);case 6:case"end":return e.stop()}}),e)})))})]})},xe=function(e){e.query,e.setQuery;var t=e.child,n=Object(o.useState)(!1),i=Object(l.a)(n,2),c=i[0],a=i[1];return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(T.a,{onClick:function(){a(!c)},text:"Filtrar",button:!0,labeled:!0,icon:"filter",open:c,className:"icon mini",children:Object(v.jsx)(T.a.Menu,{onClick:function(e){e.stopPropagation()},style:{width:"45vh"},children:Object(v.jsx)("div",{style:{padding:"15px"},children:t})})})})},pe=n(26),Oe=n(432),fe=n.n(Oe),ge=n(927),_e=n(944),we=n(955),Ce=n(966),ye=n(958),ke=n(945),Se=n(41);function Te(e){return e?new Date(e).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]}var Pe=function(e){var t=e.name,n=e.title,o=e.type,i=e.control,c=e.errors,a=e.width,r=e.readOnly;return Object(v.jsx)(pe.a,{name:t,control:i,render:function(e){var i,l=e.field,s=l.onChange,d=l.onBlur,u=l.value;return Object(v.jsx)(L.a.Field,{width:a||2,required:"required"===(null===(i=c[t])||void 0===i?void 0:i.type),control:_e.a,label:n,value:"date"===o?Te(u):u,placeholder:n,type:o,error:c[t]&&{content:c[t].message,pointing:"above"},readOnly:r||!1,onBlur:d,onChange:s})}})},Ve=n(17),Fe=Ve.a({}).required(),De=function(e){return Object.keys(null===e||void 0===e?void 0:e.errors).map((function(t){var n="";return null===e||void 0===e||e.errors[t].forEach((function(e){n=n+e+" "})),n}))},Ie={transportista:{title:"Transportista",name:"transportista_id",name_model:"transportista",placeholder:"Buscar...",endPoint:"/cliente",link:"/welcome/clientes/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},clientes:{title:"Cliente",name:"cliente_id",name_model:"cliente",placeholder:"Buscar...",endPoint:"/cliente",link:"/welcome/clientes/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},vendedor:{title:"Vendedor",name:"vendedor_id",name_model:"vendedor",placeholder:"Buscar...",endPoint:"/cliente",link:"/welcome/clientes/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},ubigeo:{title:"Ubigeo",name:"ubigeo_id",name_model:"ubigeo",placeholder:"Busca el ubigeo",endPoint:"/resource/ubigeo",link:!1,params:!1,keys:{text:"provincia",id:"id",concat:["provincia","distrito","departamento"]}},tipo_documento_identy:{title:"Documento",name:"tipo_documento_identy_id",name_model:"tipo_documento_identy",placeholder:"Selecciona",endPoint:"/resource/tipo_documento_identy",link:!1,params:!1,keys:{text:"nombre",id:"id"}},almacen:{title:"Almacen",name:"almacen_id",name_model:"almacen",placeholder:"Selecciona",endPoint:"/almacen/local",link:!1,params:{local_id:!0},keys:{text:"nombre",id:"id"}},serie:{title:"Serie",name:"serie_id",name_model:"serie",placeholder:"Selecciona",endPoint:"/serie/tipo_operacion",link:!1,params:{local_id:!0},keys:{text:"descripcion",id:"id",concat:["descripcion","serie"]}},forma_pago:{title:"Condicion de Pago",name:"forma_pago_id",name_model:"forma_pago",placeholder:"Selecciona",endPoint:"/resource/forma_pago",link:!1,params:!1,keys:{text:"nombre",id:"id"}},moneda:{title:"Moneda",name:"moneda_id",name_model:"moneda",placeholder:"Selecciona",endPoint:"/moneda",link:"/welcome/moneda/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},producto:{title:"Producto",name:"producto",name_model:"producto",placeholder:"Selecciona",endPoint:"/producto",link:"/welcome/producto/",params:{empresa_id:!0},keys:{text:"nombre",id:"id"}},documento_relacion_search:{title:"Documento Relacionado",name:"documento_relacion_search_id",name_model:"documento_relacion_search",placeholder:"Buscar por serie y numero de correlativo",endPoint:"/venta",link:!1,params:{empresa_id:!0,local_id:!0},keys:{text:"uniqueserie",id:"id",concat:["uniqueserie"]}},motivos_sunat_guia_remision:{title:"Motivo Guia de Remisi\xf3n",name:"motivos_sunat_guia_remision_id",name_model:"motivos_sunat_guia_remision",placeholder:"Seleccione Motivo",endPoint:"/resource/motivos_sunat_guia_remision",link:!1,params:!1,keys:{text:"descripcion",id:"id"}},vehiculo:{title:"Veh\xedculo",name:"vehiculo_id",name_model:"vehiculo",placeholder:"Selecciona",endPoint:"/vehiculo",link:"/welcome/vehiculo/",params:{empresa_id:!0},keys:{text:"descripcion",id:"id",concat:["descripcion"]}},ubigeo_partida:{title:"Ubigeo de Partida",name:"ubigeo_partida_id",name_model:"ubigeo_partida",placeholder:"Buscar ubigeo",endPoint:"/resource/ubigeo",link:!1,params:!1,keys:{text:"provincia",id:"id",concat:["provincia","distrito","departamento"]}},ubigeo_destino:{title:"Ubigeo de Destino",name:"ubigeo_destino_id",name_model:"ubigeo_destino",placeholder:"Buscar Destino",endPoint:"/resource/ubigeo",link:!1,params:!1,keys:{text:"provincia",id:"id",concat:["provincia","distrito","departamento"]}},tipo_producto:{title:"Tipo de producto",name:"tipo_producto_id",name_model:"tipo_producto",placeholder:"Seleccione un tipo de Producto",endPoint:"/resource/tipo_producto",link:!1,params:!1,keys:{text:"nombre",id:"id"}},presentacion:{title:"Presentaci\xf3n",name:"presentacion_id",name_model:"presentacion",placeholder:"Seleccione Presentaci\xf3n",endPoint:"/resource/presentacion",link:!1,params:!1,keys:{text:"nombre",id:"id"}},marca:{title:"Marca",name:"marca_id",name_model:"marca",placeholder:"Seleccione Marca",endPoint:"/producto_features/marcas",link:!1,params:!1,keys:{text:"nombre",id:"id"}},linea:{title:"Linea",name:"linea_id",name_model:"linea",placeholder:"Seleccione Marca",endPoint:"/producto_features/lineas",link:!1,params:!1,keys:{text:"nombre",id:"id"}},categoria:{title:"Categoria",name:"categoria_id",name_model:"categoria",placeholder:"Seleccione Categoria",endPoint:"/producto_features/categorias",link:!1,params:!1,keys:{text:"nombre",id:"id"}},subcategoria:{title:"Sub Categorias",name:"subcategoria_id",name_model:"sub_categoria",placeholder:"Seleccione Sub Categoria",endPoint:"/producto_features/subcategorias",link:!1,params:!1,keys:{text:"nombre",id:"id"}}},Ne=n(123),qe=n.n(Ne);var Ee={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{order:{id:"DESC"}},n=qe.a.stringify(t);return new Promise((function(t,o){m.get("".concat(e,"?").concat(n)).then((function(e){t(e.data)}),(function(e){o(new Error("bad request"))}))}))}},Ae=function(e,t){return!(e&&!e[0])&&(null===e||void 0===e?void 0:e.map((function(e,n){return t.concat?{text:t.concat.map((function(t){return e[t]})).join("-"),value:e[null===t||void 0===t?void 0:t.id],key:n,model:e}:{text:e[null===t||void 0===t?void 0:t.text],value:e[null===t||void 0===t?void 0:t.id],key:n,model:e}})))},Le=function(){var e=Object(U.a)(H.a.mark((function e(t,n,o,i){var c,a,r,l,s,d,u,j,b=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=b.length>4&&void 0!==b[4]?b[4]:null,a=b.length>5?b[5]:void 0,r=b.length>6?b[6]:void 0,(null===i||void 0===i?void 0:i.empresa_id)&&(o+="/"+t.empresa.id),(null===i||void 0===i?void 0:i.local_id)&&(console.log(t.id),o+="/"+t.id),o.search("undefined"),a)for(s=Object.keys(a).map((function(e){return r[e]})),d=0;d<s.length;d++)o+="/"+s[d];if(!("string"===typeof c&&c.length<3)){e.next=9;break}return e.abrupt("return",!1);case 9:return"string"===typeof c&&c.length>3&&(l={filter:[[n.text,"like","%"+c+"%"]]}),"object"===typeof c&&(l=c),l=c?l:null,e.next=14,Ee.show(o,l);case 14:return u=e.sent,e.next=17,Ae(u.data,n);case 17:return j=e.sent,o.search("/vehiculo")>0&&console.log(n,o,i,c,a),e.abrupt("return",j);case 20:case"end":return e.stop()}}),e)})));return function(t,n,o,i){return e.apply(this,arguments)}}(),Re=function(e){var t,n,i=e.model,c=e.moreRouteParams,a=e.empresaContexto,s=e.control,d=e.venta,u=(e.handleChangeVenta,e.setValue),j=e.width,b=e.autoFocus,m=e.onListenChange,h=Object(y.h)(),x=Object(y.g)(),p=Object(o.useState)({isFetching:!1,multiple:!0,searchQuery:null,value:"",options:[]}),O=Object(l.a)(p,2),f=O[0],g=O[1],_=function(){var e=Object(U.a)(H.a.mark((function e(t,n){var o,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.searchQuery,g({isFetching:!0}),e.next=4,Le(a,i.keys,i.endPoint,i.params,o,c,d);case 4:r=e.sent,g(Object(k.a)(Object(k.a)({},f),{options:r,isFetching:!1}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(U.a)(H.a.mark((function e(){var t,n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(a,i.keys,i.endPoint,i.params,{limit:20,order:{id:"DESC"}},c,d);case 2:if(t=e.sent,!d||!d[null===i||void 0===i?void 0:i.name_model]){e.next=15;break}return e.next=6,Ae([d[null===i||void 0===i?void 0:i.name_model]],i.keys);case 6:if(n=e.sent,!t.find((function(e){return e.value===n[0].value}))){e.next=12;break}return e.abrupt("return",t);case 12:return n[0].key=t.length,t.push(n[0]),e.abrupt("return",t);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){w().then((function(e){g(Object(k.a)(Object(k.a)({},f),{options:e,isFetching:!1}))}),(function(e){console.log(e),alert("efecto fallo posiblemente la respuesta no esta en formato adecuado [data]=>{}")}))}),[]),Object(o.useEffect)((function(){var e;if((null===x||void 0===x?void 0:x.state)&&(null===x||void 0===x||null===(e=x.state)||void 0===e?void 0:e.reload)){var t,n,o,c;console.log(x.state,"- Has changed"),console.log(x.state,x.state.reload);var a=Ae([null===(t=x.state)||void 0===t?void 0:t.reload[i.name]],i.keys);g({options:a}),u(i.name,null===x||void 0===x||null===(n=x.state)||void 0===n||null===(o=n.reload[i.name])||void 0===o?void 0:o.id),u(i.name_model,null===x||void 0===x||null===(c=x.state)||void 0===c?void 0:c.reload[null===i||void 0===i?void 0:i.name])}}),[null===(t=x.state)||void 0===t||null===(n=t.reload)||void 0===n?void 0:n[[i.name]]]),Object(v.jsx)(pe.a,{name:i.name,control:s,render:function(e){var t,n,o=e.field,c=(o.onChange,o.onBlur,o.value);return Object(v.jsxs)(L.a.Field,{width:j||5,children:[Object(v.jsxs)("label",{children:[i.title," ",!(null===x||void 0===x||null===(t=x.state)||void 0===t?void 0:t.backgroundLocation)&&i.link&&!!(null===f||void 0===f||null===(n=f.options)||void 0===n?void 0:n.length)&&!!c&&Object(v.jsx)(Q.a,{onClick:function(){!function(e,t){var n=f.options.find((function(e){return e.value===t}));h(i.link+t,{state:{backgroundLocation:x,model:n.model,empresaContexto:e}})}(a,c)},name:"pencil",size:"small"})]}),Object(v.jsx)(T.a,{searchInput:{autoFocus:b},clearable:!0,options:f.options,placeholder:i.placeholder,onChange:function(e,t){u(i.name,t.value);var n=f.options.find((function(e){return e.value===t.value}));u(null===i||void 0===i?void 0:i.name_model,null===n||void 0===n?void 0:n.model),m&&m(t)},onSearchChange:_,loading:f.isFetching,search:!0,value:parseInt(c),selection:!0,noResultsMessage:i.link?Object(v.jsx)(r.b,{to:i.link+"create",state:{backgroundLocation:x,model:{local_id:a.id,empresa_id:a.empresa.id}},children:"Agregar Nuevo"}):"Sin Resultados"})]})}})},Ge=n(123);var ze={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:20,order:{id:"DESC"}},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Ge.stringify(t);return new Promise((function(t,i){m.get("".concat(e,"?page=").concat(n,"&").concat(o)).then((function(e){t(e.data)}),(function(e){i(!1)}))}))},find:function(e){return new Promise((function(t,n){m.get("empresa/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("producto",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("producto/"+e.empresa_id+"/"+t,e).then((function(e){n(e.data)}))}))}},Be=function(e,t){return e.map((function(e,n){return t.concat?{text:t.concat.map((function(t){return e[t]})).join("-"),value:e[t.id],key:n,model:e}:{text:e[t.text],value:e[t.id],key:n,model:e}}))},Me=function(){var e=Object(U.a)(H.a.mark((function e(t,n,o,i){var c,a,r,l,s,d,u,j,b=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=b.length>4&&void 0!==b[4]?b[4]:null,a=b.length>5?b[5]:void 0,r=b.length>6?b[6]:void 0,console.log(o),(null===i||void 0===i?void 0:i.empresa_id)&&(o=o+"/"+t.empresa.id),console.log(o),(null===i||void 0===i?void 0:i.local_id)&&(o=o+"/"+t.id),console.log(o),a)for(s=Object.keys(a).map((function(e){return r[e]})),d=0;d<s;d++)o=o+"/"+s[d];if(console.log(o),!("string"===typeof c&&c.length<3)){e.next=12;break}return e.abrupt("return",!1);case 12:return console.log(o),"string"===typeof c&&c.length>3&&(l={filter:[[n.text,"like","%"+c+"%"]]}),console.log(o),"object"===typeof c&&(l=c),console.log(o),l=c?l:null,console.log(l),e.next=21,ze.show(o,l);case 21:return u=e.sent,e.next=24,Be(u.data,n);case 24:return j=e.sent,e.abrupt("return",j);case 26:case"end":return e.stop()}}),e)})));return function(t,n,o,i){return e.apply(this,arguments)}}(),He=function(e,t){var n=e.model,i=e.moreRouteParams,c=e.empresaContexto,a=e.venta,r=e.setItemSelected,s=(e.width,Object(o.useState)({isFetching:!1,multiple:!1,searchQuery:null,value:"",options:[]})),d=Object(l.a)(s,2),u=d[0],j=d[1],b=function(){var e=Object(U.a)(H.a.mark((function e(t,o){var r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({isFetching:!0}),e.next=3,Me(c,n.keys,n.endPoint,n.params,i,a);case 3:r=e.sent,j(Object(k.a)(Object(k.a)({},u),{options:r,isFetching:!1}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=Object(o.useRef)(null);return Object(o.useImperativeHandle)(t,(function(){return{open:function(){setTimeout((function(){console.log(m),m.current.open()}),200)}}})),Object(v.jsx)(T.a,{ref:m,fluid:!0,selection:!0,clearable:!0,multiple:!1,search:!0,options:u.options,placeholder:"Buscar Producto \xf3 Servicio",onChange:function(e,t){var n=t.options.find((function(e){return e.value===t.value}));r(n)},onSearchChange:b,loading:u.isFetching,noResultsMessage:"crear boton de creacion"})},Ue=Object(o.forwardRef)(He),Je=n(29),We=n(30),Ye=function(){function e(t,n,o,i,c,a,r){Object(Je.a)(this,e),this.modo=t,this.limite_detraccion=n,this.por_detraccion=o,this.por_percepcion=i,this.limite_percepcion=c,this.por_igv=a,this.decimales=r,this.total_afecto=0,this.total_inafecto=0,this.total_igv=0,this.total_isc=0,this.total_exonerado=0,this.total_descuento_lineal=0,this.total_descuento_global=0,this.total_documento=0,this.total_percepcion=0,this.total_detraccion=0,this.total_documento_fin=0,this.total_peso=0}return Object(We.a)(e,[{key:"roundOff",value:function(e){var t=Math.pow(10,8);return Math.round(e*t)/t}},{key:"item",value:function(e,t){return e.afecto?(e=this.isc(e,t),e=this.igv(e,t),e=this.detraccion(e,t)):e=this.inafecto(e,t),(t=Object(k.a)(Object(k.a)({},t),e)).id=void 0,t.producto_id=e.id,t.total_impuestos=0,t.val_descuento=t.val_descuento||0,t.tipo_afecto_igv=t.tipo_afecto_igv||10,t.tipo_producto_id=e.tipo_producto_id,t}},{key:"isc",value:function(e,t){return t&&t.por_isc&&"venta"===this.modo?t.isc=(null===t||void 0===t?void 0:t.precio_venta)*(null===e||void 0===e?void 0:e.por_isc)/100:t.isc=0,e}},{key:"igv",value:function(e,t){return"venta"===this.modo?(t.monto_base_igv=t.precio_venta+t.isc,e.costo_venta=this.roundOff(t.precio_venta/(this.por_igv/100+1)),e.igv=e.costo_venta*(this.por_igv/100),e.por_utilidad=this.roundOff(parseFloat(e.costo_venta)/t.costo_compra*100-100)):t.monto_base_igv=t.precio_venta,e.monto_igv=1.18*t.monto_base_igv-t.monto_base_igv-(t.val_descuento-t.val_descuento/1.18),e}},{key:"inafecto",value:function(e,t){return"venta"===this.modo?(t.monto_base_igv=t.precio_venta,e.costo_venta=this.roundOff(t.precio_venta),e.igv=0,e.por_utilidad=this.roundOff(parseFloat(e.costo_venta)/t.costo_compra*100-100)):t.monto_base_igv=t.precio_venta,e.monto_igv=0,e.isc=0,e}},{key:"detraccion",value:function(e,t){return 2===e.tipo_producto_id||e.por_detraccion>0?(e.check_detraccion_amount=(this.roundOff(t.costo_venta)+this.roundOff(t.isc)+this.roundOff(t.igv))*this.roundOff(t.cantidad),1===e.tipo_producto_id?(e.detraccion=e.check_detraccion_amount*this.roundOff(e.por_detraccion/100),e):2===e.tipo_producto_id?(e.detraccion=e.check_detraccion_amount*this.roundOff(this.por_detraccion/100),console.log("detraccion >>>>>>>>>>>>>>>>",e.detraccion),e):void 0):(e.detraccion=0,e.check_detraccion_amount=0,e)}},{key:"descuentoEfectivo",value:function(e){return e.por_descuento=this.roundOff(100*e.val_descuento/(e.costo_venta+e.igv)).toFixed(2),console.log(e.val_descuento,e.costo_venta,e.igv),e}},{key:"descuentoPorcentaje",value:function(e){return e.val_descuento=this.roundOff(e.por_descuento*(e.costo_venta+e.igv)/100).toFixed(2),console.log(e.val_descuento),e}},{key:"afecto",value:function(e,t){}},{key:"totales",value:function(e,t){this.total_afecto=0,this.total_inafecto=0,this.total_igv=0,this.total_isc=0,this.total_exonerado=0,this.total_descuento_global=t,this.total_descuento_lineal=0,this.total_documento=0,this.total_percepcion=0,this.total_detraccion=0,this.total_documento_fin=0,this.total_peso=0,this.check_detraccion_amount=0;for(var n=0;n<e.length;n++){var o,i=e[n];i.producto.afecto?(this.total_afecto+=this.roundOff(i.precio_unitario*parseFloat(i.cantidad)),this.total_igv+=this.roundOff(i.igv*parseFloat(i.cantidad))):(this.total_inafecto+=this.roundOff(i.precio_unitario*parseFloat(i.cantidad)),this.total_igv+=this.roundOff(i.igv*parseFloat(i.cantidad))),this.total_peso+=this.roundOff((null===i||void 0===i||null===(o=i.producto)||void 0===o?void 0:o.peso)*parseFloat(null===i||void 0===i?void 0:i.cantidad)),this.total_isc+=this.roundOff(null===i||void 0===i?void 0:i.isc)*this.roundOff(null===i||void 0===i?void 0:i.cantidad),this.check_detraccion_amount+=this.roundOff(i.check_detraccion_amount),this.total_detraccion+=this.roundOff(i.detraccion),console.log("total detraccion >>>>>>>>>>>>>>>>>>>>>>>",this.total_detraccion),this.total_descuento_lineal+=this.roundOff(null===i||void 0===i?void 0:i.val_descuento)*this.roundOff(null===i||void 0===i?void 0:i.cantidad),console.log(this.total_descuento_lineal)}return this.check_detraccion_amount>this.limite_detraccion||(this.total_detraccion=0),this.total_documento=this.roundOff(this.roundOff(this.total_igv)+this.roundOff(this.total_afecto)+this.roundOff(this.total_inafecto)+this.roundOff(this.total_isc)),this.por_percepcion>0?this.total_percepcion=this.total_documento*(this.roundOff(this.por_percepcion)/100):this.total_percepcion=0,this.total_documento_fin=this.total_documento+this.total_percepcion-this.roundOff(this.total_descuento_global)-this.roundOff(this.total_descuento_lineal),{total_afecto:this.total_afecto,total_inafecto:this.total_inafecto,total_igv:this.total_igv,total_isc:this.total_isc,total_exonerado:this.total_exonerado,total_descuento_lineal:this.total_descuento_lineal,total_descuento_global:this.roundOff(t),total_documento:this.total_documento,total_percepcion:this.total_percepcion,total_detraccion:this.total_detraccion,total_documento_fin:this.total_documento_fin,total_peso:this.total_peso}}}]),e}(),Qe=n(9),Ke=n(285),Xe=n.n(Ke),Ze=function(e){var t=e.split(" ")[0].split("-");return"".concat(t[2],"/").concat(t[1],"/").concat(t[0])};n(177);var $e=function(e){var t,n,o,i,c,a,r,l,s,d,j,b,m,h,x,p,O,f,g,_,w,C,y,S,T,P,V,F,D,I,N,q,E,A,L,R,G,z,B,M,H,U,J,W,Y,Q,K,X,Z,$,ee,te,ne,oe,ie,ce=e.empresa,ae=e.status,re=e.qrCodeBase64,le=e.impresion,se={fontSize:"8px"};console.log(le.size);var de={padding:"5"},ue={padding:"2"},je={padding:"1px"},be=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return"A4"===le.size?Object(v.jsx)(Qe.Document,{children:Object(v.jsxs)(Qe.Page,{size:"A4",style:{paddingTop:"35",paddingBottom:"65",paddingHorizontal:"35",fontSize:"9px"},children:[Object(v.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},fixed:!0,children:[Object(v.jsx)(Qe.View,{children:Object(v.jsx)(Qe.Image,{source:{uri:u()+"/logo/"+ce.empresa.id},style:{width:"100px",maxWidth:"100px",maxHeigh:"100px"}})}),Object(v.jsxs)(Qe.View,{style:{padding:"10px",fontSize:"7px"},children:[Object(v.jsx)(Qe.Text,{style:ue,children:null===ce||void 0===ce||null===(t=ce.empresa)||void 0===t?void 0:t.nombre_comercial}),Object(v.jsx)(Qe.Text,{style:ue,children:null===ce||void 0===ce||null===(n=ce.empresa)||void 0===n?void 0:n.direccion}),Object(v.jsxs)(Qe.Text,{style:ue,children:["Email: ",null===ce||void 0===ce||null===(o=ce.empresa)||void 0===o?void 0:o.email," Tlf: ",null===ce||void 0===ce||null===(i=ce.empresa)||void 0===i?void 0:i.telefono," ","Cel.",null===ce||void 0===ce||null===(c=ce.empresa)||void 0===c?void 0:c.celular," "]})]}),Object(v.jsxs)(Qe.View,{style:{border:"1px",padding:"10px",alignItems:"center"},children:[Object(v.jsxs)(Qe.Text,{children:["RUC ",null===ce||void 0===ce||null===(a=ce.empresa)||void 0===a?void 0:a.ruc]}),Object(v.jsx)(Qe.Text,{children:null===ae||void 0===ae||null===(r=ae.serie)||void 0===r?void 0:r.descripcion}),Object(v.jsxs)(Qe.Text,{children:[null===ae||void 0===ae||null===(l=ae.serie)||void 0===l?void 0:l.serie," ",null===ae||void 0===ae?void 0:ae.correlativo]})]})]}),Object(v.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"row",alignItems:"space-between",border:"1px",padding:"5",marginTop:"5"},fixed:!0,children:[Object(v.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"column",justifyContent:"",minWidth:"50%",maxWidth:"50%",fontSize:"7px",alignItems:"flex-start"},children:[Object(v.jsxs)(Qe.Text,{style:ue,children:["Cliente: ",null===ae||void 0===ae||null===(s=ae.cliente)||void 0===s?void 0:s.nombre_comercial]}),Object(v.jsxs)(Qe.Text,{style:ue,children:[1===(null===ae||void 0===ae||null===(d=ae.cliente)||void 0===d?void 0:d.tipo_documento_identy_id)?"DNI":2===(null===ae||void 0===ae||null===(j=ae.cliente)||void 0===j?void 0:j.tipo_documento_identy_id)?"RUC":"Documento",": ",null===ae||void 0===ae||null===(b=ae.cliente)||void 0===b?void 0:b.numero_documento]}),Object(v.jsxs)(Qe.Text,{style:ue,children:["Direcci\xf3n: ",null===ae||void 0===ae||null===(m=ae.cliente)||void 0===m?void 0:m.direccion]}),Object(v.jsxs)(Qe.Text,{style:ue,children:["Ubigeo: ",null===ae||void 0===ae||null===(h=ae.cliente)||void 0===h?void 0:h.ubigeo.provincia," ",null===ae||void 0===ae||null===(x=ae.cliente)||void 0===x?void 0:x.ubigeo.distrito," ",null===ae||void 0===ae||null===(p=ae.cliente)||void 0===p?void 0:p.ubigeo.departamento]})]}),Object(v.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:"50%",maxWidth:"50%",fontSize:"7px"},children:[Object(v.jsxs)(Qe.Text,{style:ue,children:["Fecha Emi: ",Ze(ae.fecha_emision)]}),Object(v.jsxs)(Qe.Text,{style:ue,children:["Fecha Reg: ",Ze(ae.fecha_registro)]}),Object(v.jsx)(Qe.Text,{style:ue,children:"Condici\xf3n: Cr\xe9dito"}),Object(v.jsx)(Qe.Text,{style:ue,children:"\xa0"})]})]}),Object(v.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"row",alignItems:"space-evenly",marginTop:"5px"},fixed:!0,children:[Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:50,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"center"}),children:"C\xf3digo"})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:310,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)({},se),children:"Descripcion"})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:50,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"right"}),children:"Cant."})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:70,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"right"}),children:"Present."})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:70,borderBottom:"1px",borderLeft:"1px",borderTop:"1px"}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"right"}),children:"Precio"})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:70,borderBottom:"1px",borderLeft:"1px",borderTop:"1px",borderRight:"1px"}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"right"}),children:"Importe"})})]}),null===ae||void 0===ae?void 0:ae.detalles.map((function(e,t,n){var o,i,c,a=n.length;return Object(v.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"row",marginBottom:"1",fontSize:"9px"},children:[Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:50,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"center"}),children:null===e||void 0===e||null===(o=e.producto)||void 0===o?void 0:o.codigo})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:310,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)({},se),children:null===e||void 0===e||null===(i=e.producto)||void 0===i?void 0:i.nombre})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:50,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"right"}),children:null===e||void 0===e?void 0:e.cantidad})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:70,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"right"}),children:null===e||void 0===e||null===(c=e.presentacion)||void 0===c?void 0:c.nombre})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:70,marginTop:"-1px",borderLeft:"1px",borderBottom:a===t+1?"1px":0}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"right"}),children:null===e||void 0===e?void 0:e.precio_unitario.toFixed(3)})}),Object(v.jsx)(Qe.View,{style:Object(k.a)(Object(k.a)({},de),{width:70,marginTop:"-2px",borderLeft:"1px",borderRight:"1px",borderBottom:a===t+1?"1px":0}),children:Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},se),{textAlign:"right"}),children:((null===e||void 0===e?void 0:e.cantidad)*(null===e||void 0===e?void 0:e.precio_unitario)).toFixed(3)})})]},t)})),Object(v.jsxs)(Qe.View,{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",marginBottom:"1",fontSize:"9px",padding:"10"},children:[Object(v.jsxs)(Qe.View,{children:[Object(v.jsxs)(Qe.Text,{style:ue,children:["Son:"," ",be(Xe()(null===ae||void 0===ae?void 0:ae.total_documento_fin,{lang:"es"}))," ","con 00/100 ",null===ae||void 0===ae||null===(O=ae.moneda)||void 0===O?void 0:O.nombre.toLowerCase()]}),Object(v.jsx)(Qe.Image,{source:{uri:re},style:{width:"80px",marginBottom:"10px"}}),(null===ae||void 0===ae?void 0:ae.detalle)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Observaci\xf3n: \n              ".concat(null===ae||void 0===ae?void 0:ae.detalle)}),(null===ae||void 0===ae?void 0:ae.ubigeo_partida)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Partida: ".concat(null===ae||void 0===ae?void 0:ae.ubigeo_partida.provincia," ").concat(null===ae||void 0===ae?void 0:ae.ubigeo_partida.distrito," ").concat(null===ae||void 0===ae?void 0:ae.ubigeo_partida.distrito," - ").concat(null===ae||void 0===ae?void 0:ae.direccion_partida)}),(null===ae||void 0===ae?void 0:ae.ubigeo_destino)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Destino: ".concat(null===ae||void 0===ae?void 0:ae.ubigeo_destino.provincia," ").concat(null===ae||void 0===ae?void 0:ae.ubigeo_destino.distrito," ").concat(null===ae||void 0===ae?void 0:ae.ubigeo_destino.distrito," - ").concat(null===ae||void 0===ae?void 0:ae.direccion_destino)}),(null===ae||void 0===ae?void 0:ae.transportista_id)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Transportista:\n                Raz\xf3n Social: ".concat(null===ae||void 0===ae?void 0:ae.transportista.nombre_comercial,"\n                Documento: ").concat(null===ae||void 0===ae?void 0:ae.transportista.numero_documento,"\n                Tel\xe9fono ").concat(null===ae||void 0===ae?void 0:ae.transportista.telefono)}),(null===ae||void 0===ae?void 0:ae.vehiculo_id)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Vehiculo:\n                Marca: ".concat(null===ae||void 0===ae?void 0:ae.vehiculo.marca,"\n                Placa: ").concat(null===ae||void 0===ae?void 0:ae.vehiculo.placa)}),(null===ae||void 0===ae?void 0:ae.motivos_sunat_guia_remision)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Motivo: ".concat(null===ae||void 0===ae?void 0:ae.motivos_sunat_guia_remision.descripcion)}),(null===ae||void 0===ae?void 0:ae.documento_relacion)&&(null===ae||void 0===ae?void 0:ae.documento_relacion.map((function(e,t){return Object(v.jsx)(Qe.Text,{style:ue,children:"Documento Relacionado: ".concat((null===e||void 0===e?void 0:e.documento_relacion.uniqueserie).split("-")[2]," ").concat(null===e||void 0===e?void 0:e.documento_relacion.correlativo)})}))),(null===ae||void 0===ae?void 0:ae.numero_expediente)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Numero de Expediente: ".concat(null===ae||void 0===ae?void 0:ae.numero_expediente)}),(null===ae||void 0===ae?void 0:ae.orden_compra)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Orden de Compra: ".concat(null===ae||void 0===ae?void 0:ae.orden_compra)}),(null===ae||void 0===ae?void 0:ae.codigo_unidad_ejecutora)&&Object(v.jsx)(Qe.Text,{style:ue,children:"C\xf3digo de unidad Ejecutora: ".concat(null===ae||void 0===ae?void 0:ae.codigo_unidad_ejecutora)}),(null===ae||void 0===ae?void 0:ae.numero_proceso_seleccion)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Numero de Proceso de Selecci\xf3n: ".concat(null===ae||void 0===ae?void 0:ae.numero_proceso_seleccion)}),(null===ae||void 0===ae?void 0:ae.numero_contrato)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Numero de Contrato: ".concat(null===ae||void 0===ae?void 0:ae.numero_contrato)}),(null===ce||void 0===ce||null===(f=ce.empresa)||void 0===f?void 0:f.detalle)&&Object(v.jsxs)(Qe.Text,{style:ue,children:[null===ce||void 0===ce||null===(g=ce.empresa)||void 0===g?void 0:g.detalle," "]})]}),Object(v.jsxs)(Qe.View,{style:{fontSize:"8px",flexDirection:"row",justifyContent:"space-between"},children:[Object(v.jsxs)(Qe.View,{style:{flexDirection:"column",width:"50px"},children:[3===(null===ae||void 0===ae?void 0:ae.tipo_operacion_id)&&Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:"Peso"}),Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:"Afecto"}),Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:"Inafecto"}),Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:"ISC"}),Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:"IGV"}),Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:"Total"}),Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:"Percepci\xf3n"}),Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:"Total"})]}),Object(v.jsxs)(Qe.View,{style:{flexDirection:"column",width:"80px",textAlign:"right"},children:[3===(null===ae||void 0===ae?void 0:ae.tipo_operacion_id)&&Object(v.jsx)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:null===ae||void 0===ae||null===(_=ae.total_peso)||void 0===_?void 0:_.toFixed(3)}),Object(v.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:[null===ae||void 0===ae||null===(w=ae.moneda)||void 0===w?void 0:w.simbolo," ",null===ae||void 0===ae||null===(C=ae.total_afecto)||void 0===C?void 0:C.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:[null===ae||void 0===ae||null===(y=ae.moneda)||void 0===y?void 0:y.simbolo," ",null===ae||void 0===ae||null===(S=ae.total_inafecto)||void 0===S?void 0:S.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:[null===ae||void 0===ae||null===(T=ae.moneda)||void 0===T?void 0:T.simbolo," ",null===ae||void 0===ae||null===(P=ae.total_isc)||void 0===P?void 0:P.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:[null===ae||void 0===ae||null===(V=ae.moneda)||void 0===V?void 0:V.simbolo," ",null===ae||void 0===ae||null===(F=ae.total_igv)||void 0===F?void 0:F.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:[null===ae||void 0===ae||null===(D=ae.moneda)||void 0===D?void 0:D.simbolo," ",null===ae||void 0===ae||null===(I=ae.total_documento)||void 0===I?void 0:I.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:[null===ae||void 0===ae||null===(N=ae.moneda)||void 0===N?void 0:N.simbolo," ",null===ae||void 0===ae||null===(q=ae.total_percepcion)||void 0===q?void 0:q.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:Object(k.a)(Object(k.a)({},ue),{borderBottom:"1px"}),children:[null===ae||void 0===ae||null===(E=ae.moneda)||void 0===E?void 0:E.simbolo," ",null===ae||void 0===ae||null===(A=ae.total_documento_fin)||void 0===A?void 0:A.toFixed(3)]})]})]})]}),Object(v.jsxs)(Qe.View,{style:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},fixed:!0,children:[Object(v.jsx)(Qe.Text,{style:{color:"black",fontSize:"10px",top:50},render:function(e){var t=e.pageNumber,n=e.totalPages;return"".concat(t," / ").concat(n,"\n              ")}}),Object(v.jsx)(Qe.Text,{style:{fontSize:"7px"},children:"Consulta este comprobante en FivipSystem.com/comprobante"}),Object(v.jsx)(Qe.Image,{source:{uri:u()+"/logo/footer_fivip"},style:{width:"100px",maxWidth:"100px",maxHeigh:"100px",left:465}})]})]})}):"88mm"===le.size?Object(v.jsx)(Qe.Document,{children:Object(v.jsxs)(Qe.Page,{size:[72.1,297],style:{fontSize:"3px"},children:[Object(v.jsxs)(Qe.View,{style:{maxWidth:"72.1 dpi",maxHeight:"297 dpi",padding:"3px"},children:[Object(v.jsxs)(Qe.View,{style:{alignItems:"center",borderBottom:"0.15px"},children:[Object(v.jsx)(Qe.Image,{source:{uri:u()+"/logo/"+ce.empresa.id},style:{width:"30px",maxWidth:"100px",maxHeigh:"100px"}}),Object(v.jsx)(Qe.Text,{children:null===ce||void 0===ce||null===(L=ce.empresa)||void 0===L?void 0:L.nombre_comercial}),Object(v.jsx)(Qe.Text,{children:null===ce||void 0===ce||null===(R=ce.empresa)||void 0===R?void 0:R.direccion}),Object(v.jsxs)(Qe.Text,{children:["Email: ",null===ce||void 0===ce||null===(G=ce.empresa)||void 0===G?void 0:G.email]}),Object(v.jsxs)(Qe.Text,{children:["Tlf: ",null===ce||void 0===ce||null===(z=ce.empresa)||void 0===z?void 0:z.telefono]}),Object(v.jsxs)(Qe.Text,{children:["Cel: ",null===ce||void 0===ce||null===(B=ce.empresa)||void 0===B?void 0:B.celular]}),Object(v.jsxs)(Qe.Text,{children:["RUC: ",null===ce||void 0===ce||null===(M=ce.empresa)||void 0===M?void 0:M.ruc]}),Object(v.jsxs)(Qe.Text,{children:["Fecha Emisi\xf3n: ",Ze(ae.fecha_emision)]}),Object(v.jsxs)(Qe.Text,{children:["Condici\xf3n: ",ae.forma_pago.nombre]})]}),null===ae||void 0===ae?void 0:ae.detalles.map((function(e,t,n){return Object(v.jsxs)(Qe.View,{children:[Object(v.jsxs)(Qe.Text,{style:{marginTop:"1px"},children:[null===e||void 0===e?void 0:e.producto.codigo," ",null===e||void 0===e?void 0:e.producto.nombre]}),Object(v.jsxs)(Qe.View,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:"1px"},children:[Object(v.jsxs)(Qe.Text,{children:["Cant. ",null===e||void 0===e?void 0:e.cantidad," ",null===e||void 0===e?void 0:e.presentacion.abbr]}),Object(v.jsxs)(Qe.Text,{children:[ae.moneda.simbolo," ",(null===e||void 0===e?void 0:e.monto_precio_unitario).toFixed(3)]}),Object(v.jsxs)(Qe.Text,{children:[ae.moneda.simbolo," ",((null===e||void 0===e?void 0:e.monto_precio_unitario)*(null===e||void 0===e?void 0:e.cantidad)).toFixed(3)]})]})]})}))]}),Object(v.jsxs)(Qe.View,{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",fontSize:"3px"},children:[Object(v.jsx)(Qe.View,{}),Object(v.jsxs)(Qe.View,{style:{fontSize:"3px",flexDirection:"row",justifyContent:"space-between"},children:[Object(v.jsxs)(Qe.View,{style:{flexDirection:"column",width:"20px",fontSize:"3px"},children:[Object(v.jsx)(Qe.Text,{style:je,children:"Afecto"}),Object(v.jsx)(Qe.Text,{style:je,children:"Inafecto"}),Object(v.jsx)(Qe.Text,{style:je,children:"ISC"}),Object(v.jsx)(Qe.Text,{style:je,children:"IGV"}),Object(v.jsx)(Qe.Text,{style:je,children:"Total"}),Object(v.jsx)(Qe.Text,{style:je,children:"Percepci\xf3n"}),Object(v.jsx)(Qe.Text,{style:je,children:"Total"})]}),Object(v.jsxs)(Qe.View,{style:{flexDirection:"column",width:"25px",textAlign:"right",fontSize:"3px"},children:[Object(v.jsxs)(Qe.Text,{style:je,children:[null===ae||void 0===ae||null===(H=ae.moneda)||void 0===H?void 0:H.simbolo," ",null===ae||void 0===ae||null===(U=ae.total_afecto)||void 0===U?void 0:U.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:je,children:[null===ae||void 0===ae||null===(J=ae.moneda)||void 0===J?void 0:J.simbolo," ",null===ae||void 0===ae||null===(W=ae.total_inafecto)||void 0===W?void 0:W.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:je,children:[null===ae||void 0===ae||null===(Y=ae.moneda)||void 0===Y?void 0:Y.simbolo," ",null===ae||void 0===ae||null===(Q=ae.total_isc)||void 0===Q?void 0:Q.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:je,children:[null===ae||void 0===ae||null===(K=ae.moneda)||void 0===K?void 0:K.simbolo," ",null===ae||void 0===ae||null===(X=ae.total_igv)||void 0===X?void 0:X.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:je,children:[null===ae||void 0===ae||null===(Z=ae.moneda)||void 0===Z?void 0:Z.simbolo," ",null===ae||void 0===ae||null===($=ae.total_documento)||void 0===$?void 0:$.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:je,children:[null===ae||void 0===ae||null===(ee=ae.moneda)||void 0===ee?void 0:ee.simbolo," ",null===ae||void 0===ae||null===(te=ae.total_percepcion)||void 0===te?void 0:te.toFixed(3)]}),Object(v.jsxs)(Qe.Text,{style:je,children:[null===ae||void 0===ae||null===(ne=ae.moneda)||void 0===ne?void 0:ne.simbolo," ",null===ae||void 0===ae||null===(oe=ae.total_documento_fin)||void 0===oe?void 0:oe.toFixed(3)]})]})]})]}),Object(v.jsxs)(Qe.View,{style:{alignItems:"center"},children:[Object(v.jsxs)(Qe.Text,{style:ue,children:["Son:"," ",be(Xe()(null===ae||void 0===ae?void 0:ae.total_documento_fin,{lang:"es"}))," ","con 00/100 ",null===ae||void 0===ae||null===(ie=ae.moneda)||void 0===ie?void 0:ie.nombre.toLowerCase()]}),Object(v.jsx)(Qe.Image,{source:{uri:re},style:{width:"18px",marginBottom:"3px"}}),(null===ae||void 0===ae?void 0:ae.detalle)&&Object(v.jsx)(Qe.Text,{style:ue,children:"Observaci\xf3n: \n              ".concat(null===ae||void 0===ae?void 0:ae.detalle)}),Object(v.jsx)(Qe.Text,{style:{fontSize:"2px"},children:"Consulta este comprobante en FivipSystem.com/comprobante"}),Object(v.jsx)(Qe.Image,{source:{uri:u()+"/logo/footer_fivip"},style:{width:"15px",maxWidth:"100px",maxHeigh:"100px"}})]})]})}):Object(v.jsx)(Qe.Document,{children:Object(v.jsx)(Qe.Page,{size:"A4",children:Object(v.jsx)(Qe.Text,{children:"Contenido no disponible"})})})},et=function(e){var t,n,i,c,a,r,s,d,u,b,m,h,x,p,O,f,g,w,P,V,F,I,N,q,E,B,M,J,W,Y,K,X,Z,$,ee,te,ne,oe,ie,ae,re,le,se,ue,je,be,me,ve,xe,Oe,Te,Ve,Ne=e.loading,qe=e.selected,Ee=e.handleChangeVenta,Ae=e.editionMode,Le=e.state,Ge=e.formatPrint,ze=e.setFormatPrint,Be=Object(o.createRef)(),Me=Object(y.h)(),He=Object(y.g)(),Je=Object(o.useContext)(_),We=Je.empresa,Ke=Je.setEmpresa,Xe=Je.impresion,et=Object(o.useContext)(D),tt=et.setDocumento,nt=et.ventaDefaultContent,ot=Object(o.useState)(!1),it=Object(l.a)(ot,2),ct=it[0],at=it[1],rt=Object(o.useState)(!1),lt=Object(l.a)(rt,2),st=lt[0],dt=lt[1],ut=Object(o.useState)(!1),jt=Object(l.a)(ut,2),bt=jt[0],mt=jt[1],ht=Object(o.useState)(!1),vt=Object(l.a)(ht,2),xt=vt[0],pt=vt[1],Ot=Object(o.useState)(!1),ft=Object(l.a)(Ot,2),gt=ft[0],_t=ft[1],wt=Object(o.useState)(2),Ct=Object(l.a)(wt,2),yt=Ct[0],kt=Ct[1],St=Object(o.useState)(!1),Tt=Object(l.a)(St,2),Pt=Tt[0],Vt=Tt[1],Ft=Object(o.useState)(!1),Dt=Object(l.a)(Ft,2),It=Dt[0],Nt=Dt[1],qt=Object(o.useState)(null),Et=Object(l.a)(qt,2),At=(Et[0],Et[1]),Lt=Object(o.useState)(!1),Rt=Object(l.a)(Lt,2),Gt=Rt[0],zt=Rt[1],Bt=Object(o.useState)([{key:0}]),Mt=Object(l.a)(Bt,2),Ht=Mt[0],Ut=Mt[1],Jt=Object(o.useState)({model:{precio_venta:0,cantidad:0,descuento:0}}),Wt=Object(l.a)(Jt,2),Yt=Wt[0],Qt=Wt[1],Kt=Object(o.useState)([]),Xt=Object(l.a)(Kt,2),Zt=(Xt[0],Xt[1]),$t=(Object(o.useRef)(null),function(e,t){var n=t.index,o=yt.activeIndex;kt(o===n?-1:n)});qe||(qe=Le?Object(k.a)(Object(k.a)({},Le),nt):{serie:{tipo_operacion_id:1},tipo_operacion_id:1,detalles:[],documento_relacion_search:void 0,documento_relacion_search_id:void 0});var en=Object(pe.e)({resolver:Object(Se.a)(Fe),defaultValues:Object(k.a)({},qe)||Le.model}),tn=en.control,nn=en.handleSubmit,on=en.formState.errors,cn=en.setValue,an=en.reset,rn=en.watch,ln=rn();Object(o.useEffect)((function(){var e=rn((function(e){tt(e)}));return function(){return e.unsubscribe()}}),[rn,tt]);var sn=new Ye("venta",We.empresa.limite_detraccion,We.empresa.por_detraccion,We.empresa.por_percepcion,null,18,8);Object(o.useEffect)((function(){var e,t=null===Gt||void 0===Gt||null===(e=Gt.model)||void 0===e?void 0:e.precios.map((function(e,t){var n;return{key:t,text:null===e||void 0===e||null===(n=e.presentacion)||void 0===n?void 0:n.abbr,value:null===e||void 0===e?void 0:e.id,model:e}}));return Ut(t),function(){Ut(!1)}}),[Gt]),Object(o.useEffect)((function(){if(qe){var e;ze({status:!1});var t=null===(e=document)||void 0===e?void 0:e.querySelector("canvas");_t(null===t||void 0===t?void 0:t.toDataURL("image/jpg",.3)),At(qe),tt(qe)}return function(){At(!1)}}),[]);var dn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=sn.totales(e,t);Object.keys(n).map((function(e){return cn(e,n[e]),e}))},un=function(e){var t=e.productoChoose,n=e.itemSelected;return new Promise((function(e,o){t&&n&&n.model&&t.model.costo_venta&&t.model.cantidad?e({productoChoose:t,itemSelected:n}):o(!1)}))},jn=function(e){"Tab"!==e.key&&"Enter"!==e.key||(bn(),Be.current.querySelector('[aria-selected="true"]')&&Be.current.querySelector(".clear").click(),pn.current.open())},bn=function(){var e=Object(U.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pt(!0),e.next=3,un({productoChoose:Yt,itemSelected:Gt}).then((function(e){var t=Yt.model;t.codigo=Yt.model.codigo,t.monto_igv=Yt.model.igv,t.precio_unitario=Yt.model.costo_venta,t.monto_precio_unitario=Yt.model.costo_venta,t.producto={nombre:Gt.model.nombre,peso:Gt.model.peso,afecto:Gt.model.afecto};var n=ln.detalles||[];n.push(t),cn("detalles",n),dn(ln.detalles),pt(!1),Qt({model:{precio_venta:0,cantidad:0,descuento:0}})}),(function(e){j.b.error("complete el formulario de ingreso de producto"),pt(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mn=function(){var e;if(!(null===(e=He.state)||void 0===e?void 0:e.backgroundLocation))return at(!1),!1;Me(He.state.backgroundLocation.pathname,{state:{reload:{ventas:!0}}})},hn=function(e,t){if(!t)return!1;"precio_venta"===t.name&&(Yt||Yt.model||(Yt.model.cantidad=0));var n={};n[t.name]=t.value;var o=Object(k.a)(Object(k.a)({},Yt.model),n),i=sn.item(Gt.model,o),c=Yt;c.model=i,Qt(Object(k.a)({},c))},vn=function(){cn("correlativo",parseFloat(null===ln||void 0===ln?void 0:ln.correlativo)+1),cn("detalles",[]),cn("total_afecto",0),cn("total_descuento_global",0),cn("total_descuento_lineal",0),cn("total_detraccion",0),cn("total_documento",0),cn("total_documento_fin",0),cn("total_exonerado",0),cn("total_igv",0),cn("total_inafecto",0),cn("total_isc",0),cn("total_percepcion",0),cn("total_peso",0)},xn=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id){e.next=24;break}return at(!0),e.next=4,he.update(t,t.id);case 4:if(n=e.sent,Le){e.next=20;break}if(Ee(t),We.empresa.id!==n.id){e.next=16;break}return We.empresa=n,e.next=11,Ke(We);case 11:return e.next=13,at(!1);case 13:mn(),e.next=18;break;case 16:mn(),at(!1);case 18:e.next=21;break;case 20:at(!1);case 21:(null===Xe||void 0===Xe?void 0:Xe.after_save)&&ze({status:!(null===Ge||void 0===Ge?void 0:Ge.status),from:"update"}),e.next=30;break;case 24:return e.next=26,he.create(t);case 26:return o=e.sent,at(!1),(null===o||void 0===o?void 0:o.errors)?(Le.id&&Ee(t),dt(De(o))):(j.b.success("Documento Guardado Exitosamente"),vn(),(null===Xe||void 0===Xe?void 0:Xe.after_save)&&ze({status:!(null===Ge||void 0===Ge?void 0:Ge.status),from:"create"}),dt(null),mn()),e.abrupt("return",o);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pn=Object(o.useRef)();return Object(v.jsx)("div",{style:He.pathname.search("/space/ventas/")?{overflowY:"scroll",height:"85vh",marginTop:"1vh"}:{overflowY:"scroll",height:"95vh",marginTop:"0vh"},children:Ge&&!(null===Ge||void 0===Ge?void 0:Ge.status)?Object(v.jsxs)(L.a,{onSubmit:nn(xn),noValidate:!0,children:[Object(v.jsxs)(R.a,{loading:Ne,children:[Object(v.jsxs)(L.a.Group,{children:[Ae?Object(v.jsx)(Re,{model:Ie.serie,moreRouteParams:{tipo_operacion_id:null===(i=qe)||void 0===i||null===(c=i.serie)||void 0===c?void 0:c.tipo_operacion_id},empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:4,onListenChange:function(e){var t,n=e.options,o=e.value,i=n.find((function(e,t){return e.value===o}));cn("correlativo",(null===i||void 0===i||null===(t=i.model)||void 0===t?void 0:t.correlativo)||1)}}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Serie",placeholder:"Seleccione Serie",value:(null===ln||void 0===ln||null===(t=ln.serie)||void 0===t?void 0:t.descripcion)+"-"+(null===ln||void 0===ln||null===(n=ln.serie)||void 0===n?void 0:n.serie),readOnly:!0,width:4}),Ae?Object(v.jsx)(Pe,{name:"correlativo",title:"Correlativo",control:tn,errors:on,type:"number",width:2}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Correlativo",placeholder:"Selecione",value:null===ln||void 0===ln?void 0:ln.correlativo,readOnly:!0,width:2}),Ae?Object(v.jsx)(Re,{model:Ie.clientes,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:10}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Cliente",placeholder:"Selecione",value:null===ln||void 0===ln||null===(a=ln.cliente)||void 0===a?void 0:a.nombre,readOnly:!0,width:10})]}),Object(v.jsxs)(L.a.Group,{children:[Ae?Object(v.jsx)(Re,{model:Ie.almacen,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:4}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Almacen",placeholder:"Selecione",value:null===ln||void 0===ln||null===(r=ln.almacen)||void 0===r?void 0:r.nombre,readOnly:!0,width:4}),Ae?Object(v.jsx)(Re,{model:Ie.forma_pago,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:3}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Condici\xf3n de Pago",placeholder:"Selecione",value:null===ln||void 0===ln||null===(s=ln.forma_pago)||void 0===s?void 0:s.nombre,readOnly:!0,width:3}),Ae?Object(v.jsx)(Pe,{name:"fecha_emision",title:"Fecha Emisi\xf3n",control:tn,errors:on,type:"date",width:3}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Fecha de Emisi\xf3n",placeholder:"Selecione",value:Ze(null===ln||void 0===ln?void 0:ln.fecha_emision),readOnly:!0,width:3}),Ae?Object(v.jsx)(Pe,{name:"fecha_registro",title:"Fecha Registro",control:tn,errors:on,type:"date",width:3}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Fecha de Registro",placeholder:"Selecione",value:Ze(null===ln||void 0===ln?void 0:ln.fecha_registro),readOnly:!0,width:3}),Ae?Object(v.jsx)(Re,{model:Ie.moneda,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:3}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Moneda",placeholder:"Selecione",value:null===ln||void 0===ln?void 0:ln.moneda.nombre,readOnly:!0,width:3})]}),Ae&&Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(L.a.Field,{width:6,children:Object(v.jsx)(Ue,{empresaContexto:We,model:Ie.producto,setItemSelected:zt,ref:pn})}),Object(v.jsx)(L.a.Field,{width:2,children:Object(v.jsx)(ge.a,{innerRef:Be,children:Object(v.jsx)(T.a,{fluid:!0,clearable:!0,options:Ht,onChange:function(e,t){var n,o=null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.find((function(e){return(null===t||void 0===t?void 0:t.value)===e.value}));Qt(o)},selection:!0})})}),Object(v.jsx)(L.a.Field,{width:3,children:Object(v.jsx)(ce.a,{content:"Precio de Venta (Con IGV Incluido)",trigger:Object(v.jsx)(_e.a,{label:(null===Yt||void 0===Yt||null===(d=Yt.model)||void 0===d?void 0:d.val_descuento)?{tag:!0,content:((null===Yt||void 0===Yt||null===(u=Yt.model)||void 0===u?void 0:u.precio_venta)-(null===Yt||void 0===Yt||null===(b=Yt.model)||void 0===b?void 0:b.val_descuento)).toFixed(2),color:"teal"}:{icon:"money"},labelPosition:(null===Yt||void 0===Yt||null===(m=Yt.model)||void 0===m?void 0:m.val_descuento)?"right":"right corner",type:"number",name:"precio_venta",value:null===Yt||void 0===Yt||null===(h=Yt.model)||void 0===h?void 0:h.precio_venta,onChange:hn,placeholder:"Precio"})})}),Object(v.jsx)(L.a.Field,{width:2,children:Object(v.jsx)(ce.a,{content:"Cantidad de Items",trigger:Object(v.jsx)(_e.a,{label:{icon:"boxes"},labelPosition:"right corner",type:"number",name:"cantidad",value:null===Yt||void 0===Yt||null===(x=Yt.model)||void 0===x?void 0:x.cantidad,placeholder:"Cantidad",onChange:hn})})}),Object(v.jsx)(L.a.Field,{width:2,children:Object(v.jsx)(ce.a,{content:"Descuento en ".concat(It?"Porcentaje":"Efectivo"),trigger:Object(v.jsx)("div",{children:It?Object(v.jsxs)(_e.a,{type:"number",name:"por_descuento",value:null===Yt||void 0===Yt||null===(p=Yt.model)||void 0===p?void 0:p.por_descuento,placeholder:"Descuento Porcentaje",onChange:function(e,t){var n=t.name,o=t.value,i={};i[n]=Number(o);var c=Object(k.a)(Object(k.a)({},Yt.model),i),a=Object(k.a)(Object(k.a)({},Gt.model),c),r=sn.descuentoPorcentaje(a),l=Yt;l.model=r,l.model=Object(k.a)(Object(k.a)({},l.model),i),Qt(Object(k.a)({},l))},onKeyDown:jn,children:[Object(v.jsx)("input",{}),Object(v.jsx)(G.a,{icon:"percent",style:{marginLeft:"10px"},onClick:function(e){e.preventDefault(),Nt(!It)}})]}):Object(v.jsxs)(_e.a,{type:"number",name:"val_descuento",value:null===Yt||void 0===Yt||null===(O=Yt.model)||void 0===O?void 0:O.val_descuento,placeholder:"Descuento Valor",onChange:function(e,t){var n=t.name,o=t.value,i={};i[n]=Number(o);var c=Object(k.a)(Object(k.a)({},Yt.model),i),a=Object(k.a)(Object(k.a)({},Gt.model),c),r=sn.descuentoEfectivo(a),l=Yt;l.model=r,l.model=Object(k.a)(Object(k.a)({},l.model),i),Qt(Object(k.a)({},l))},onKeyDown:jn,children:[Object(v.jsx)("input",{}),Object(v.jsx)(G.a,{icon:"money",style:{marginLeft:"10px"},onClick:function(e){e.preventDefault(),Nt(!It)}})]})})})}),Object(v.jsx)(L.a.Field,{width:1,children:Object(v.jsxs)(G.a,{as:"a",fluid:!0,color:"teal",animated:"vertical",onClick:bn,disabled:xt,children:[Object(v.jsx)(G.a.Content,{hidden:!0,children:"Agregar"}),Object(v.jsx)(G.a.Content,{visible:!0,children:Object(v.jsx)(Q.a,{name:"arrow down"})})]})})]}),Object(v.jsxs)(C.a,{children:[Object(v.jsxs)(C.a.Column,{width:12,style:{overflowY:"scroll",height:"55vh"},children:[Object(v.jsxs)(we.a,{compact:!0,definition:!0,striped:!0,children:[Object(v.jsx)(we.a.Header,{fullWidth:!0,children:Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.HeaderCell,{width:1}),Object(v.jsx)(we.a.HeaderCell,{width:8,children:"Producto \xf3 Servicio"}),Object(v.jsx)(we.a.HeaderCell,{textAlign:"right",width:2,children:Object(v.jsx)("abbr",{title:"Precio de venta con IGV",children:null===ln||void 0===ln||null===(f=ln.moneda)||void 0===f?void 0:f.simbolo})}),Object(v.jsx)(we.a.HeaderCell,{textAlign:"right",width:2,children:Object(v.jsx)("abbr",{title:"Cantidad",children:"Cant"})}),Object(v.jsx)(we.a.HeaderCell,{textAlign:"right",width:2,children:Object(v.jsx)("abbr",{title:"Descuento",children:"Desc"})}),Object(v.jsx)(we.a.HeaderCell,{textAlign:"right",width:1})]})}),Object(v.jsx)(we.a.Body,{children:null===ln||void 0===ln||null===(g=ln.detalles)||void 0===g?void 0:g.map((function(e,t){return Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{collapsing:!0,children:Object(v.jsx)(Ce.a,{slider:!0})}),Object(v.jsx)(we.a.Cell,{children:e.producto.nombre}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:e.val_descuento?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("s",{children:e.precio_venta?Number(null===e||void 0===e?void 0:e.precio_venta).toFixed(3):(0).toFixed(3)}),Object(v.jsx)("span",{style:{marginLeft:"10px"},children:e.precio_venta?Number((null===e||void 0===e?void 0:e.precio_venta)-e.val_descuento).toFixed(3):(0).toFixed(3)})]}):e.precio_venta?Number(null===e||void 0===e?void 0:e.precio_venta).toFixed(3):(0).toFixed(3)}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:e.cantidad?Number(null===e||void 0===e?void 0:e.cantidad).toFixed(3):(0).toFixed(3)}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:e.val_descuento?Number(null===e||void 0===e?void 0:e.val_descuento).toFixed(3):(0).toFixed(3)}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:Object(v.jsx)(G.a,{circular:!0,as:"a",size:"mini",onClick:function(){!function(e){var t=ln.detalles;t.splice(e,1),Zt(t),cn("detalles",t),dn(ln.detalles,ln.total_descuento_global)}(t)},disabled:!Ae,icon:"trash"})})]},t)}))})]}),ln.is_nulled?Object(v.jsx)(R.a,{placeholder:!0,children:Object(v.jsxs)(A.a,{icon:!0,children:[Object(v.jsx)(Q.a,{name:"ban"}),"Documento sin detalles."]})}):Object(v.jsx)(v.Fragment,{})]}),Object(v.jsxs)(C.a.Column,{floated:"right",width:4,children:[Object(v.jsx)(we.a,{compact:"very",color:"black",children:Object(v.jsxs)(we.a.Body,{children:[Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:"Peso "}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:Object(v.jsxs)("strong",{children:["Kg ",null===ln||void 0===ln||null===(w=ln.total_peso)||void 0===w?void 0:w.toFixed(3)]})})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:" Afecto "}),Object(v.jsxs)(we.a.Cell,{textAlign:"right",children:[Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(P=ln.moneda)||void 0===P?void 0:P.simbolo," ",null===ln||void 0===ln||null===(V=ln.total_afecto)||void 0===V?void 0:V.toFixed(3)]})," "]})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:" Inafecto "}),Object(v.jsxs)(we.a.Cell,{textAlign:"right",children:[Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(F=ln.moneda)||void 0===F?void 0:F.simbolo," ",null===ln||void 0===ln||null===(I=ln.total_inafecto)||void 0===I?void 0:I.toFixed(3)]})," "]})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:" ISC "}),Object(v.jsxs)(we.a.Cell,{textAlign:"right",children:[Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(N=ln.moneda)||void 0===N?void 0:N.simbolo," ",null===(q=ln.total_isc)||void 0===q?void 0:q.toFixed(3)]})," "]})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:" IGV "}),Object(v.jsxs)(we.a.Cell,{textAlign:"right",children:[Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(E=ln.moneda)||void 0===E?void 0:E.simbolo," ",null===ln||void 0===ln||null===(B=ln.total_igv)||void 0===B?void 0:B.toFixed(3)]})," "]})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:"Descuento Items"}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(M=ln.moneda)||void 0===M?void 0:M.simbolo,null===ln||void 0===ln||null===(J=ln.total_descuento_lineal)||void 0===J?void 0:J.toFixed(3)]})})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:"Descuento Global"}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(W=ln.moneda)||void 0===W?void 0:W.simbolo," ",null===ln||void 0===ln||null===(Y=ln.total_descuento_global)||void 0===Y?void 0:Y.toFixed(3)]})})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:"Documento"}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(K=ln.moneda)||void 0===K?void 0:K.simbolo," ",null===ln||void 0===ln||null===(X=ln.total_documento)||void 0===X?void 0:X.toFixed(3)]})})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:" Percepci\xf3n "}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(Z=ln.moneda)||void 0===Z?void 0:Z.simbolo," ",null===ln||void 0===ln||null===($=ln.total_percepcion)||void 0===$?void 0:$.toFixed(3)]})})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{textAlign:"right",children:"Detracci\xf3n"}),Object(v.jsx)(we.a.Cell,{textAlign:"right",children:Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(ee=ln.moneda)||void 0===ee?void 0:ee.simbolo," ",null===ln||void 0===ln||null===(te=ln.total_detraccion)||void 0===te?void 0:te.toFixed(3)]})})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{active:!0,textAlign:"right",children:"Total"}),Object(v.jsx)(we.a.Cell,{active:!0,textAlign:"right",children:ln.is_free?Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(ie=ln.moneda)||void 0===ie?void 0:ie.simbolo," ",(0).toFixed(3)]}):Object(v.jsxs)("strong",{children:[null===ln||void 0===ln||null===(ne=ln.moneda)||void 0===ne?void 0:ne.simbolo," ",null===ln||void 0===ln||null===(oe=ln.total_documento_fin)||void 0===oe?void 0:oe.toFixed(3)]})})]})]})}),Ae&&Object(v.jsxs)("div",{children:[Object(v.jsx)(G.a,{loading:ct,disabled:ct,content:"Guardar",primary:!0,fluid:!0}),Object(v.jsx)(G.a,{style:{marginTop:"1vh"},fluid:!0,as:"a",content:"Deshacer Cambios",onClick:function(){an(qe)}}),Object(v.jsx)(ye.a,{as:S.a,vertical:!0,fluid:!0,children:Object(v.jsxs)(S.a.Item,{children:[Object(v.jsx)(ye.a.Title,{active:!0===Pt,content:"Mas Opciones",index:0,onClick:function(){Vt(!Pt)}}),Object(v.jsx)(ye.a.Content,{active:!0===Pt,content:Object(v.jsxs)(L.a.Group,{grouped:!0,children:[Object(v.jsx)(L.a.Checkbox,{label:"Es gratuita",name:"is_free",checked:ln.is_free,onChange:function(){cn("is_free",!ln.is_free)}}),Object(v.jsx)(L.a.Field,{children:Object(v.jsx)(_e.a,{label:{content:"Desc"},labelPosition:"right",placeholder:"Descuento Global",type:"number",value:ln.total_descuento_global,onChange:function(e,t){cn("total_descuento_global",e.target.value),dn(ln.detalles,e.target.value)}})})]})})]})})]})]})]}),(null===(ae=Object.keys(on))||void 0===ae?void 0:ae.length)?Object(v.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(v.jsx)(v.Fragment,{}),(null===st||void 0===st?void 0:st.length)&&Object(v.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:st})]}),Object(v.jsx)(de.a,{open:bt,content:"Seguro de Deshacer los cambios, perderas los datos modificados",onCancel:function(){return mt(!1)},onConfirm:function(e){an(qe)}}),3===ln.tipo_operacion_id&&Object(v.jsxs)(R.a,{color:"teal",inverted:!0,style:{marginTop:"1vh"},loading:Ne,children:[Object(v.jsxs)(L.a.Group,{children:[Ae?Object(v.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.motivos_sunat_guia_remision,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:4}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Motivo de la Guia de Remision",placeholder:"Selecione",value:null===ln||void 0===ln||null===(re=ln.motivos_sunat_guia_remision)||void 0===re?void 0:re.descripcion,readOnly:!0,width:4}),Ae?Object(v.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.transportista,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:6}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Transportista",placeholder:"Selecione",value:null===ln||void 0===ln||null===(le=ln.transportista)||void 0===le?void 0:le.nombre,readOnly:!0,width:6}),Ae?Object(v.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.vehiculo,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:6}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Veh\xedculo",placeholder:"Selecione",value:null===ln||void 0===ln||null===(se=ln.vehiculo)||void 0===se?void 0:se.descripcion,readOnly:!0,width:6})]}),Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Pe,{name:"direccion_partida",title:"Direccion de Partida",control:tn,errors:on,type:"text",width:8,readOnly:!Ae}),Ae?Object(v.jsx)(Re,{model:Ie.ubigeo_partida,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:8}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Ubigeo de Partida",placeholder:"Selecione",value:(null===ln||void 0===ln?void 0:ln.ubigeo_partida)?(null===ln||void 0===ln||null===(ue=ln.ubigeo_partida)||void 0===ue?void 0:ue.provincia)+"-"+(null===ln||void 0===ln||null===(je=ln.ubigeo_partida)||void 0===je?void 0:je.distrito)+"-"+(null===ln||void 0===ln||null===(be=ln.ubigeo_partida)||void 0===be?void 0:be.departamento):"",readOnly:!0,width:8})]}),Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Pe,{name:"direccion_destino",title:"Direccion de Destino",control:tn,errors:on,type:"text",width:8,readOnly:!Ae}),Ae?Object(v.jsx)(Re,{model:Ie.ubigeo_destino,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:8}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Ubigeo de Destino",placeholder:"Selecione",value:(null===ln||void 0===ln?void 0:ln.ubigeo_destino)?(null===ln||void 0===ln||null===(me=ln.ubigeo_destino)||void 0===me?void 0:me.provincia)+"-"+(null===ln||void 0===ln||null===(ve=ln.ubigeo_destino)||void 0===ve?void 0:ve.distrito)+"-"+(null===ln||void 0===ln||null===(xe=ln.ubigeo_destino)||void 0===xe?void 0:xe.departamento):"",readOnly:!0,width:8})]})]}),Object(v.jsxs)(R.a,{secondary:!0,loading:Ne,children:[Object(v.jsxs)(ye.a,{exclusive:!1,fluid:!0,color:"teal",children:[Object(v.jsxs)(ye.a.Title,{active:2===yt,index:2,onClick:$t,children:[Object(v.jsx)(Q.a,{name:"dropdown"}),"Detalles de la venta"]}),Object(v.jsx)(ye.a.Content,{active:2===yt,children:Object(v.jsx)(pe.a,{name:"detalle",control:tn,render:function(e){var t=e.field,n=t.onChange,o=t.onBlur,i=t.value;return Object(v.jsx)(ke.a,{value:i,onBlur:o,onChange:n,placeholder:"Escribe un Comentario (sera agreagado en la impresi\xf3n del documento)",readOnly:!Ae})}})}),Object(v.jsxs)(ye.a.Title,{active:0===yt,index:0,onClick:$t,children:[Object(v.jsx)(Q.a,{name:"dropdown"}),"Documentos asociados"]}),Object(v.jsxs)(ye.a.Content,{active:0===yt,children:[Ae&&Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.documento_relacion_search,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:10}),Object(v.jsx)(L.a.Field,{style:{marginTop:"24px"},children:Object(v.jsx)(G.a,{primary:!0,as:"a",onClick:function(){if(!ln.documento_relacion_search&&!ln.documento_relacion_search_id)return j.b.error("Seleccione un documento v\xe1lido"),!1;var e=ln.documento_relacion||[],t={documento_relacion_id:ln.documento_relacion_search.id,documento_relacion:ln.documento_relacion_search};e.push(t),cn("documento_relacion",e),cn("documento_relacion_search",0),cn("documento_relacion_search_id",0)},children:"Agregar Documento"})})]}),!Ae&&Object(v.jsx)(G.a,{secondary:!0,as:"a",children:"Ver Historial"}),Object(v.jsxs)(we.a,{compact:!0,collapsing:!0,children:[Object(v.jsx)(we.a.Header,{children:Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.HeaderCell,{children:"Documento"}),Object(v.jsx)(we.a.HeaderCell,{children:"Eliminar"})]})}),Object(v.jsx)(we.a.Body,{children:!!ln.documento_relacion&&(null===ln||void 0===ln?void 0:ln.documento_relacion.map((function(e,t){return Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{children:null===e||void 0===e?void 0:e.documento_relacion.uniqueserie.split("-").splice(2).join("-")}),Object(v.jsx)(we.a.Cell,{children:Object(v.jsx)(G.a,{circular:!0,as:"a",size:"mini",onClick:function(){!function(e){var t=ln.documento_relacion;t.splice(e,1),cn("documento_relacion",t)}(t)},disabled:!Ae,icon:"trash"})})]})})))})]})]}),Object(v.jsxs)(ye.a.Title,{active:1===yt,index:1,onClick:$t,children:[Object(v.jsx)(Q.a,{name:"dropdown"}),"Vendedor"]}),Object(v.jsx)(ye.a.Content,{active:1===yt,children:Object(v.jsx)(L.a.Group,{children:Ae?Object(v.jsx)(Re,{model:null===Ie||void 0===Ie?void 0:Ie.vendedor,empresaContexto:We,control:tn,venta:qe,handleChangeVenta:Ee,setValue:cn,width:10}):Object(v.jsx)(L.a.Input,{fluid:!0,label:"Vendedor",placeholder:"Selecione",value:null===ln||void 0===ln||null===(Oe=ln.vendedor)||void 0===Oe?void 0:Oe.nombre,readOnly:!0,width:10})})}),Object(v.jsxs)(ye.a.Title,{active:3===yt,index:3,onClick:$t,children:[Object(v.jsx)(Q.a,{name:"dropdown"}),"Informacion Relacionada"]}),Object(v.jsxs)(ye.a.Content,{active:3===yt,children:[Object(v.jsx)(L.a.Group,{children:Object(v.jsx)(Pe,{name:"numero_expediente",title:"Numero de Expediente",control:tn,errors:on,type:"text",width:10,readOnly:!Ae})}),Object(v.jsx)(L.a.Group,{children:Object(v.jsx)(Pe,{name:"orden_compra",title:"Orden de Compra",control:tn,errors:on,type:"text",width:10,readOnly:!Ae})}),Object(v.jsx)(L.a.Group,{children:Object(v.jsx)(Pe,{name:"codigo_unidad_ejecutora",title:"C\xf3digo Unidad Ejecutora",control:tn,errors:on,type:"text",width:10,readOnly:!Ae})}),Object(v.jsx)(L.a.Group,{children:Object(v.jsx)(Pe,{name:"numero_proceso_seleccion",title:"N\xfamero de proceso de selecci\xf3n",control:tn,errors:on,type:"text",width:10,readOnly:!Ae})}),Object(v.jsx)(L.a.Group,{children:Object(v.jsx)(Pe,{name:"numero_contrato",title:"N\xfamero de Contrato",control:tn,errors:on,type:"text",width:10,readOnly:!Ae})})]})]}),Ae&&Object(v.jsxs)("div",{style:{marginTop:"5vh"},children:[Object(v.jsx)(G.a,{loading:ct,disabled:ct,content:"Guardar",primary:!0}),Object(v.jsx)(G.a,{style:{marginTop:"1vh"},as:"a",content:"Deshacer Cambios",onClick:function(){an(qe)}})]})]}),Object(v.jsx)(R.a,{style:{marginBottom:"20vh"},loading:Ne,children:Object(v.jsx)(fe.a,{value:"http://fivip.net/comprobante/".concat(We.empresa.ruc,"/").concat(null===ln||void 0===ln||null===(Te=ln.serie)||void 0===Te?void 0:Te.id,"/").concat(null===ln||void 0===ln||null===(Ve=ln.serie)||void 0===Ve?void 0:Ve.serie,"/").concat(null===ln||void 0===ln?void 0:ln.correlativo)})})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Qe.PDFViewer,{style:{width:"100%",height:"80vh"},children:Object(v.jsx)($e,{empresa:We,status:ln,qrCodeBase64:gt,impresion:Xe})}),Object(v.jsxs)(G.a,{color:"teal",fluid:!0,onClick:function(){"create"===Ge.from?(ze({status:!1}),vn()):ze({status:!1})},children:[" ","Cerrar"]})]})})},tt=n(216),nt=n.n(tt),ot=function(e){var t=nt()(e),n=nt()(new Date);return!(t.diff(n)<-36e4)},it=function(e){return Object(v.jsx)(ce.a,{content:"Actualizado recientemente",pinned:!0,trigger:Object(v.jsx)(K.a,{circular:!0,color:"blue",empty:!0},e)})},ct=function(){var e=Object(y.g)(),t=Object(o.useContext)(_),n=t.empresa,i=(t.impresion,Object(o.useState)({current_page:1})),c=Object(l.a)(i,2),a=c[0],s=c[1],d=Object(o.useState)([]),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(o.useState)(null),h=Object(l.a)(m,2),x=h[0],p=h[1],O=Object(o.useState)(!1),f=Object(l.a)(O,2),g=f[0],w=f[1],S=Object(o.useState)(!1),P=Object(l.a)(S,2),V=(P[0],P[1]),F=Object(o.useState)({status:!1,format:"A4"}),D=Object(l.a)(F,2),I=D[0],N=D[1],q=function(){var e=Object(U.a)(H.a.mark((function e(t){var o,i,c,a=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]&&a[1],o=n.empresa.id,i=n.id,e.next=5,he.show(o,i,t);case 5:c=e.sent,s(c),b(c.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){console.log(e);var t=j.map((function(t){return parseInt(t.id)===parseInt(e.id)?e:t}));b(t)},L=function(){var e=Object(U.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(null);case 2:return e.next=4,p(t);case 4:console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){he.download(x,e)},B=function(){var e=Object(U.a)(H.a.mark((function e(t,n){var o,i,c,a,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=j.find((function(e,n){return e.id===t}))).send_status=!0,i=j.map((function(e,t){return e.id===o.id?o:e})),b(i),e.next=6,he.sendSunat(o);case 6:c=e.sent,(a=Object(k.a)(Object(k.a)({},o),c)).send_status=!1,r=j.map((function(e,t){return e.id===a.id?a:e})),b(r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return q(1),function(){b([])}}),[]),Object(o.useEffect)((function(){return N({status:!1,format:"A4"}),e.state=x,x||w(!1),setTimeout((function(){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector("canvas");V(null===t||void 0===t?void 0:t.toDataURL("image/jpg",.3))}),500),function(){}}),[x]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(C.a.Column,{width:5,children:[Object(v.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(v.jsxs)(ie.a.Item,{children:[Object(v.jsxs)(ie.a.Content,{floated:"right",children:[Object(v.jsx)(xe,{}),Object(v.jsx)(se,{empresaContext:n})]}),Object(v.jsxs)(ie.a.Content,{children:[Object(v.jsx)(ie.a.Header,{as:"a",children:Object(v.jsx)(r.b,{to:"/welcome/empresas/".concat(n.empresa.id),state:{backgroundLocation:e,model:n.empresa},children:n.empresa.nombre})}),n.nombre]})]})}),Object(v.jsx)(ie.a,{celled:!0,relaxed:"very",children:null===j||void 0===j?void 0:j.map((function(e,t){var n,o,i,c;return Object(v.jsxs)(ie.a.Item,{onClick:function(){L(e)},style:{backgroundColor:(null===e||void 0===e?void 0:e.id)===(null===x||void 0===x?void 0:x.id)?"rgb(0 181 173 / 12%)":"#fff"},children:[Object(v.jsxs)(ie.a.Content,{style:{width:"135px"},floated:"right",children:[Object(v.jsx)(K.a.Group,{tag:!0,children:Object(v.jsxs)(K.a,{as:"a",children:[null===e||void 0===e||null===(n=e.moneda)||void 0===n?void 0:n.simbolo," ",e.total_documento_fin.toFixed(3)]})}),Object(v.jsx)(ce.a,{content:"Click para enviar comprobante a Sunat",header:"Pendiente por enviar",trigger:2!==e.tipo_operacion_id&&"CT"!==e.serie.abbr&&"NV"!==e.serie.abbr&&Object(v.jsx)(G.a,{icon:"0"===e.sunat_code?"check":e.sunat_code>="2000"?"times":"cloud upload",size:"mini",onClick:function(n){n.stopPropagation(),B(e.id,t)},color:"0"===e.sunat_code?"green":e.sunat_code>="2000"?"red":"primary",loading:e.send_status,disabled:e.send_status||"0"===e.sunat_code})},t),(null===e||void 0===e?void 0:e.is_nulled)?Object(v.jsx)(K.a,{as:"span",content:"Anulado",color:"red"}):Object(v.jsx)(v.Fragment,{children:" \xa0"})]}),Object(v.jsxs)(ie.a.Content,{children:[Object(v.jsxs)(ie.a.Header,{as:"a",children:[null===e||void 0===e||null===(o=e.serie)||void 0===o?void 0:o.abbr," ",null===e||void 0===e||null===(i=e.serie)||void 0===i?void 0:i.serie," ",null===e||void 0===e?void 0:e.correlativo," ",ot(e.updated_at)&&Object(v.jsx)(it,{index:t})]}),Object(v.jsx)(ie.a.Item,{children:Object(v.jsx)("strong",{children:null===e||void 0===e||null===(c=e.cliente)||void 0===c?void 0:c.nombre})}),Object(v.jsxs)(ie.a.Item,{children:["Fecha Emision:"," ",Object(v.jsx)(le.a,{format:"DD/MM/YYYY hh:mm",children:e.fecha_emision})]})]})]},t)}))}),!!j.length&&Object(v.jsx)(ae.a,{onPageChange:function(e,t){q(t.activePage)},defaultActivePage:a.current_page,pointing:!0,secondary:!0,totalPages:a.last_page})]}),Object(v.jsx)(C.a.Column,{width:10,children:x?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(v.jsx)(ie.a.Item,{children:Object(v.jsxs)(ie.a.Content,{floated:"right",children:[x&&Object(v.jsx)(T.a,{text:"Descargar",icon:"download",floating:!0,labeled:!0,button:!0,className:"button ui mini icon",children:Object(v.jsxs)(T.a.Menu,{children:[x.sunat_documento&&Object(v.jsx)(T.a.Item,{onClick:function(){z("xml")},children:"Descargar XML"}),x.sunat_notes&&Object(v.jsx)(T.a.Item,{onClick:function(){z("cdn")},children:"Descargar CDN"})]})}),Object(v.jsx)(G.a,{size:"mini",content:"Imprimir",icon:"print",labelPosition:"left",style:{marginRight:"2px",marginLeft:"2px"},onClick:function(){var e;e=!I.status,N({status:e,format:"A4"})},active:I.status}),x.is_nulled&&x?Object(v.jsx)(v.Fragment,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(G.a,{size:"mini",content:"Editar",icon:"pencil",labelPosition:"left",style:{marginRight:"2px",marginLeft:"2px"},active:g,onClick:function(){w(!g)}}),Object(v.jsx)(ve,{handleChangeVenta:E,documento:x,style:{marginRight:"2px",marginLeft:"2px"}})]})]})})}),Object(v.jsx)(G.a,{circular:!0,size:"mini",icon:!0,onClick:function(){p(null)},children:Object(v.jsx)(Q.a,{name:"times"})}),Object(v.jsx)(r.b,{to:"/space/ventas/1",state:{model:x},children:Object(v.jsx)(G.a,{circular:!0,size:"mini",icon:!0,children:Object(v.jsx)(Q.a,{name:"expand"})})}),x.is_nulled?Object(v.jsx)(K.a,{as:"span",content:"Anulado",icon:"ban",color:"red"}):Object(v.jsx)(v.Fragment,{}),Object(v.jsx)(et,{selected:x,handleChangeVenta:E,editionMode:g,formatPrint:I,setFormatPrint:N})]}):Object(v.jsx)(R.a,{placeholder:!0,style:{marginTop:"6vh"},children:Object(v.jsxs)(A.a,{icon:!0,children:[Object(v.jsx)(Q.a,{name:"file outline"}),"No tienes un documento seleccionado"]})})})]})};n(177);var at=function(e){var t=e.type,n=e.name,c=e.icon,a=e.title,r=e.value,l=e.color,s=e.service,d=e.setValue,j=e.isContextEmpresa,b=Object(o.useContext)(_),m=b.empresa,h=b.setEmpresa,x=i.a.createRef(),p=u("public"),O=function(){var e=Object(U.a)(H.a.mark((function e(t){var o,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.target.files[0],e.next=3,s(m.empresa.id,o);case 3:i=e.sent,d(n,i.success),m.empresa.certificado=i.success,"certificado"===n&&d("certificado_validate",0),"logo"===n&&d("logo",i.success),j&&h(m),console.log(m);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:["imagen"===t&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{children:a}),Object(v.jsxs)(K.a,{as:"a",onClick:function(e){e.preventDefault(),x.current.click()},children:[Object(v.jsx)("img",{src:"".concat(p,"/storage/").concat(m.empresa.id,"/").concat(r),alt:"logo_empresa"})," ",r]})]}),"file"===t&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{children:a}),Object(v.jsx)(G.a,{as:"a",color:l,fluid:!0,content:r||"Certificado",labelPosition:"left",icon:c||"file",onClick:function(e){e.preventDefault(),x.current.click()}})]}),Object(v.jsx)("input",{ref:x,hidden:!0,type:"file",onChange:O})]})},rt=Ve.a({ruc:Ve.b().required("Complete"),nombre:Ve.b().required("Complete"),nombre_comercial:Ve.b().required("Complete").min(2,"Minimo 2 letras").max(50,"Max 50 Letras"),direccion:Ve.b().required("Complete"),ubigeo_id:Ve.b().required("Complete"),telefono:Ve.b().required("Complete"),celular:Ve.b().required("Complete"),email:Ve.b().email().required("Complete"),decimales:Ve.b().required("Complete"),por_detraccion:Ve.b().required("Complete"),por_retencion:Ve.b().required("Complete"),igv:Ve.b().required("Complete"),agente:Ve.b().required("Complete"),por_percepcion:Ve.b().required("Complete"),limite_detraccion:Ve.b().required("Complete"),country_id:Ve.b().required("Complete")}).required(),lt=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=a.empresa,s=a.setEmpresa,d=Object(o.useState)(!1),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(o.useState)(!1),h=Object(l.a)(m,2),x=h[0],p=h[1],O=Object(o.useState)(!1),f=Object(l.a)(O,2),g=f[0],w=f[1],C=Object(pe.e)({resolver:Object(Se.a)(rt),defaultValues:n}),k=C.control,S=C.handleSubmit,T=C.setValue,P=C.formState.errors,V=(0,C.watch)(),F=Object(o.useState)(),D=Object(l.a)(F,2),I=D[0],N=D[1];Object(o.useEffect)(Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,Z.find(n.id);case 3:return t=e.sent,e.abrupt("return",N(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:I});var q=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),n=V.certificado_clave,e.next=5,Z.unlockCertificado(r.empresa.id,n);case 5:o=e.sent,T("certificado_validate",o.status),w(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){i(c.state.backgroundLocation.pathname,{state:{reload:{empresa:!0}}})},A=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!t||!t.id){e.next=8;break}return e.next=4,Z.update(t,t.id);case 4:n=e.sent,r.empresa.id===n.id?(r.empresa=n,window.localStorage.removeItem("empresa"),window.localStorage.setItem("empresa",JSON.stringify(r)),s(r),b(!1),E()):E(),e.next=14;break;case 8:return e.next=10,Z.create(t);case 10:return o=e.sent,b(!1),(null===o||void 0===o?void 0:o.errors)?p(De(o)):(p(null),E()),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(L.a,{onSubmit:S(A),noValidate:!0,children:[Object(v.jsxs)(L.a.Group,{widths:1,children:[Object(v.jsx)(Pe,{name:"ruc",title:"Ruc",control:k,errors:P,width:8}),Object(v.jsx)(L.a.Field,{children:Object(v.jsx)(at,{type:"imagen",name:"logo",title:"Logo de la Empresa",value:V.logo,service:Z.updateLogo,setValue:T,isContextEmpresa:!0})})]}),Object(v.jsxs)(L.a.Group,{widths:2,children:[Object(v.jsx)(Pe,{name:"nombre",title:"Nombre",control:k,errors:P,width:8}),Object(v.jsx)(Pe,{name:"nombre_comercial",title:"Nombre Comercial",control:k,errors:P,width:8})]}),Object(v.jsxs)(L.a.Group,{widths:4,children:[Object(v.jsx)(Pe,{name:"direccion",title:"Direccion",control:k,errors:P,width:8}),Object(v.jsx)(Re,{model:Ie.ubigeo,empresaContexto:r,control:k,venta:V,setValue:T,width:8})]}),Object(v.jsxs)(L.a.Group,{widths:4,children:[Object(v.jsx)(Pe,{name:"telefono",title:"Telefono Fijo",control:k,errors:P,width:4}),Object(v.jsx)(Pe,{name:"celular",title:"Telefono Celular",control:k,errors:P,width:4}),Object(v.jsx)(Pe,{name:"email",title:"Email",control:k,errors:P,width:4}),Object(v.jsx)(Pe,{name:"decimales",title:"Decimales",control:k,errors:P,width:4})]}),Object(v.jsx)(X.a,{}),Object(v.jsxs)(L.a.Group,{widths:5,children:[Object(v.jsx)(L.a.Field,{width:6,children:Object(v.jsx)(at,{type:"file",icon:"expeditedssl",name:"certificado",title:"Certificado Digital",value:V.certificado,color:0===V.certificado_validate?"secundary":1===V.certificado_validate?"red":2===V.certificado_validate?"green":"secundary",service:Z.updateCertificado,empresaContexto:r,setValue:T,isContextEmpresa:!0})}),Object(v.jsx)(Pe,{name:"certificado_clave",title:"Contrase\xf1a del Certificado Digital",control:k,errors:P,width:6,type:"password"}),Object(v.jsxs)(L.a.Field,{children:[Object(v.jsx)("label",{children:"\xa0"}),Object(v.jsx)(G.a,{fluid:!0,content:"Validar Certificado",onClick:q,loading:g})]})]}),Object(v.jsxs)(L.a.Group,{widths:5,children:[Object(v.jsx)(Pe,{name:"usuario_sunat",title:"Usuario Sunat",control:k,errors:P,width:6}),Object(v.jsx)(Pe,{name:"usuario_sunat_clave",title:"Clave de Usuario Sunat",control:k,errors:P,width:6}),Object(v.jsx)(Pe,{name:"country_id",title:"Pais",control:k,errors:P,width:4})]}),Object(v.jsx)(X.a,{}),Object(v.jsxs)(L.a.Group,{widths:5,children:[Object(v.jsx)(Pe,{name:"igv",title:"IGV",control:k,errors:P,width:3}),Object(v.jsx)(Pe,{name:"agente",title:"Agente",control:k,errors:P,width:3}),Object(v.jsx)(Pe,{name:"por_percepcion",title:"% Percepci\xf3n",control:k,errors:P,width:3}),Object(v.jsx)(Pe,{name:"por_retencion",title:"% Retencion",control:k,errors:P,width:3})]}),Object(v.jsx)(X.a,{}),Object(v.jsxs)(L.a.Group,{widths:16,children:[Object(v.jsx)(Pe,{name:"por_detraccion",title:"% Detracci\xf3n",control:k,errors:P,width:3}),Object(v.jsx)(Pe,{name:"limite_detraccion",title:"Limite Detracci\xf3n",control:k,errors:P,width:3}),Object(v.jsx)(Pe,{name:"cuenta_detraccion",title:"Cuenta Detracci\xf3n",control:k,errors:P,width:5})]}),Object(v.jsx)(L.a.Group,{widths:16,children:Object(v.jsx)(L.a.Field,{width:16,children:Object(v.jsx)(pe.a,{name:"detalle",control:k,render:function(e){var t=e.field,n=t.onChange,o=t.onBlur,i=t.value;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{children:"Comentario de Pie de P\xe1gina"}),Object(v.jsx)(ke.a,{rows:12,value:i,onBlur:o,onChange:n,placeholder:"Comentarios de pie de pagina de las impresiones del modulo de ventas"})]})}})})}),(null===(t=Object.keys(P))||void 0===t?void 0:t.length)?Object(v.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(v.jsx)(v.Fragment,{}),(null===x||void 0===x?void 0:x.length)&&Object(v.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:x}),Object(v.jsx)(G.a,{loading:j,secondary:!0,children:"Guardar"})]})},st=Ve.a({nombre:Ve.b().required("Complete"),direccion:Ve.b().required("Complete"),ubigeo_id:Ve.b().required("Complete"),empresa_id:Ve.b().required("Complete")}).required(),dt=function(e){var t,n=e.state;console.log(n);var i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=(a.empresa,a.setEmpresa),s=Object(o.useState)(!1),d=Object(l.a)(s,2),u=d[0],j=d[1],b=Object(o.useState)(!1),m=Object(l.a)(b,2),h=m[0],x=m[1],p=Object(pe.e)({resolver:Object(Se.a)(st),defaultValues:n}),O=p.control,f=p.handleSubmit,g=p.formState.errors,w=Object(o.useState)(),C=Object(l.a)(w,2),k=C[0],S=C[1];Object(o.useEffect)(Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,$.find(n.id);case 3:return t=e.sent,e.abrupt("return",S(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:k});var T=function(){i(c.state.backgroundLocation.pathname,{state:{reload:{empresa:!0}}})},P=function(){var e=Object(U.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),!t||!t.id){e.next=10;break}return e.next=4,$.update(t,t.id);case 4:e.sent,localStorage.removeItem("empresa"),r(null),T(),e.next=16;break;case 10:return e.next=12,$.create(t);case 12:return n=e.sent,j(!1),(null===n||void 0===n?void 0:n.errors)?x(De(n)):(x(null),T()),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(L.a,{onSubmit:f(P),noValidate:!0,children:[Object(v.jsx)(Pe,{name:"nombre",title:"Nombre",control:O,errors:g}),Object(v.jsxs)(L.a.Group,{widths:2,children:[Object(v.jsx)(Pe,{name:"direccion",title:"Direccion",control:O,errors:g}),Object(v.jsx)(Pe,{name:"ubigeo_id",title:"Ubigeo",control:O,errors:g})]}),(null===(t=Object.keys(g))||void 0===t?void 0:t.length)?Object(v.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(v.jsx)(v.Fragment,{}),(null===h||void 0===h?void 0:h.length)&&Object(v.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:h}),Object(v.jsx)(G.a,{loading:u,secondary:!0,children:"Guardar"}),Object(v.jsx)("a",{onClick:T,children:"asd"})]})};var ut={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{order:{id:"DESC"}},n=qe.a.stringify(t);return console.log(n),new Promise((function(t,o){m.get("/cliente/".concat(e,"?").concat(n)).then((function(e){t(e.data)}),(function(e){o(!1)}))}))},find:function(e,t){return new Promise((function(n,o){m.get("cliente/"+e+"/"+t).then((function(e){n(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("cliente",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){return new Promise((function(n,o){m.put("cliente/"+t,e).then((function(e){n(e.data)}))}))},getDni:function(e){return new Promise((function(t,n){d.a.post("https://api.nubefa.com/api/dni",e).then((function(e){t(e)}),(function(e){n(!1)}))}))},getRuc:function(e){return new Promise((function(t,n){d.a.post("https://api.nubefa.com/api/ruc",e).then((function(e){t(e)}),(function(e){n(!1)}))}))}},jt=Ve.a({tipo_documento_identy_id:Ve.b().required("Complete"),numero_documento:Ve.b().required("Complete"),nombre:Ve.b().required("Complete"),nombre_comercial:Ve.b().required("Complete").min(2,"Minimo 2 letras").max(50,"Max 50 Letras"),direccion:Ve.b().required("Complete"),ubigeo_id:Ve.b().required("Complete"),empresa_id:Ve.b().required("Complete")}).required(),bt=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_).empresa,r=Object(o.useState)(!1),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],x=Object(o.useState)(!1),p=Object(l.a)(x,2),O=p[0],f=p[1],g=Object(o.useState)(!1),w=Object(l.a)(g,2),C=w[0],k=w[1],S=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{cliente_id:e}}})},T=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),!t||!t.id){e.next=8;break}return e.next=4,ut.update(t,t.id);case 4:(null===(n=e.sent)||void 0===n?void 0:n.errors)?k(De(n)):(console.log("debugger"),k(null),S(n)),e.next=14;break;case 8:return e.next=10,ut.create(t);case 10:return o=e.sent,u(!1),(null===o||void 0===o?void 0:o.errors)?k(De(o)):(k(null),S(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(pe.e)({resolver:Object(Se.a)(jt),defaultValues:n}),V=P.control,F=P.handleSubmit,D=P.formState.errors,I=P.setValue,N=P.watch,q=P.reset,E=N(),A=function(){var e=Object(U.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),3===(null===E||void 0===E?void 0:E.tipo_documento_identy_id)&&ut.getDni({data:E.numero_documento}).then((function(e){return I("nombre",e.data.ane_alias),I("nombre_comercial",e.data.ane_alias),f(!0),h(!1),!0}),(function(e){return h(!1),!0})),4===(null===E||void 0===E?void 0:E.tipo_documento_identy_id)&&ut.getRuc({data:E.numero_documento}).then((function(e){return I("nombre",e.data.razonSocial),I("nombre_comercial",e.data.razonSocial),I("direccion",e.data.direccion),I("ubigeo_id",parseInt(e.data.ubi_id)),I("ubigeo",{id:e.data.ubi_id,provincia:e.data.provincia,distrito:e.data.distrito,departamento:e.data.departamento}),f(!0),h(!1),!0}),(function(e){return h(!1),!0}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(L.a,{onSubmit:F(T),noValidate:!0,children:[Object(v.jsx)(L.a.Group,{children:Object(v.jsx)(Re,{model:Ie.tipo_documento_identy,empresaContexto:a,control:V,setValue:I,width:7})}),Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Pe,{name:"numero_documento",title:"Numero de Documento",control:V,errors:D,width:7}),4===E.tipo_documento_identy_id||3===E.tipo_documento_identy_id?Object(v.jsx)(L.a.Field,{children:Object(v.jsx)(G.a,{primary:!0,style:{marginTop:"22px"},onClick:function(e){e.preventDefault(),A()},loading:m,children:"Buscar en Sunat"})}):Object(v.jsx)(v.Fragment,{})]}),Object(v.jsxs)(L.a.Group,{widths:2,children:[Object(v.jsx)(Pe,{name:"nombre",title:"Nombre",control:V,errors:D,width:7}),Object(v.jsx)(Pe,{name:"nombre_comercial",title:"Nombre Comercial",control:V,errors:D,width:8})]}),Object(v.jsx)(L.a.Group,{widths:2,children:Object(v.jsx)(Pe,{name:"direccion",title:"Direccion",control:V,errors:D,width:15})}),Object(v.jsx)(L.a.Group,{children:O?Object(v.jsx)(L.a.Field,{width:5,control:_e.a,label:"Ubigeo",value:"".concat(E.ubigeo.provincia," ").concat(E.ubigeo.distrito," ").concat(E.ubigeo.departamento),placeholder:"Ubigeo",type:"text",readOnly:!0}):Object(v.jsx)(Re,{model:Ie.ubigeo,empresaContexto:a,control:V,setValue:I,venta:E})}),Object(v.jsxs)(L.a.Group,{widths:3,children:[Object(v.jsx)(Pe,{name:"telefono",title:"Telefono Fijo",control:V,errors:D,width:5}),Object(v.jsx)(Pe,{name:"celular",title:"Telefono Celular",control:V,errors:D,width:5}),Object(v.jsx)(Pe,{name:"email",title:"Email",control:V,errors:D,width:5})]}),(null===(t=Object.keys(D))||void 0===t?void 0:t.length)?Object(v.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(v.jsx)(v.Fragment,{}),(null===C||void 0===C?void 0:C.length)&&Object(v.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:C}),Object(v.jsx)(G.a,{disabled:d,loading:d,primary:!0,children:"Guardar"}),Object(v.jsx)(G.a,{style:{marginTop:"1vh"},as:"a",content:"Deshacer Cambios",onClick:function(){q(n)}})]})};var mt={show:function(){return new Promise((function(e,t){m.get("/moneda").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("moneda/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("moneda",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){var n=e.empresa_id;return new Promise((function(o,i){m.put("moneda/"+n+"/"+t,e).then((function(e){o(e.data)}))}))}},ht=Ve.a({nombre:Ve.b().required("Complete"),iso:Ve.b().required("Complete"),simbolo:Ve.b().required("Complete"),sunat_codigo:Ve.b().required("Complete"),dolar:Ve.b().required("Complete"),empresa_id:Ve.b().required("Complete")}).required(),vt=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=(a.empresa,a.setEmpresa,Object(o.useState)(!1)),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],x=Object(pe.e)({resolver:Object(Se.a)(ht),defaultValues:n}),p=x.control,O=x.handleSubmit,f=x.formState.errors,g=x.reset,w=Object(o.useState)(),C=Object(l.a)(w,2),k=C[0],S=C[1];Object(o.useEffect)(Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,mt.find(n.id);case 3:return t=e.sent,e.abrupt("return",S(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:k});var T=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{moneda_id:e}}})},P=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),u(!0),!t||!t.id){e.next=9;break}return e.next=5,mt.update(t,t.id);case 5:n=e.sent,T(n),e.next=15;break;case 9:return e.next=11,mt.create(t);case 11:return o=e.sent,u(!1),(null===o||void 0===o?void 0:o.errors)?h(De(o)):(h(null),T(o)),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(L.a,{onSubmit:O(P),noValidate:!0,children:[Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Pe,{name:"nombre",title:"Nombre",control:p,errors:f,width:4}),Object(v.jsx)(Pe,{name:"iso",title:"ISO",control:p,errors:f,width:3}),Object(v.jsx)(Pe,{name:"simbolo",title:"Simbolo",control:p,errors:f,width:3}),Object(v.jsx)(Pe,{name:"sunat_codigo",title:"Codigo Sunat",control:p,errors:f,width:3}),Object(v.jsx)(Pe,{name:"dolar",title:"Dolar",control:p,errors:f,width:3})]}),(null===(t=Object.keys(f))||void 0===t?void 0:t.length)?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}),Object(v.jsx)(R.a,{children:JSON.stringify(f,null,2)})]}):Object(v.jsx)(v.Fragment,{}),(null===m||void 0===m?void 0:m.length)&&Object(v.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:m}),Object(v.jsx)(G.a,{loading:d,disabled:d,content:"Guardar",primary:!0}),Object(v.jsx)(G.a,{as:"a",content:"Deshacer Cambios",secondary:!0,onClick:function(){g(n)}})]})};var xt={show:function(){return new Promise((function(e,t){m.get("/vehiculo").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("vehiculo/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("vehiculo",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t){var n=e.empresa_id;return new Promise((function(o,i){m.put("vehiculo/"+n+"/"+t,e).then((function(e){o(e.data)}))}))}},pt=Ve.a({descripcion:Ve.b().required("Complete"),placa:Ve.b().required("Complete"),marca:Ve.b().required("Complete"),empresa_id:Ve.b().required("Complete")}).required(),Ot=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=(a.empresa,a.setEmpresa,Object(o.useState)(!1)),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],x=Object(pe.e)({resolver:Object(Se.a)(pt),defaultValues:n}),p=x.control,O=x.handleSubmit,f=x.formState.errors,g=x.reset,w=Object(o.useState)(),C=Object(l.a)(w,2),k=C[0],S=C[1];Object(o.useEffect)(Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,xt.find(n.id);case 3:return t=e.sent,e.abrupt("return",S(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),{data:k});var T=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{moneda_id:e}}})},P=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),u(!0),!t||!t.id){e.next=9;break}return e.next=5,xt.update(t,t.id);case 5:n=e.sent,T(n),e.next=15;break;case 9:return e.next=11,xt.create(t);case 11:return o=e.sent,u(!1),(null===o||void 0===o?void 0:o.errors)?h(De(o)):(h(null),T(o)),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(L.a,{onSubmit:O(P),noValidate:!0,children:[Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Pe,{name:"descripcion",title:"Descripci\xf3n",control:p,errors:f,width:4}),Object(v.jsx)(Pe,{name:"placa",title:"Placa",control:p,errors:f,width:3}),Object(v.jsx)(Pe,{name:"marca",title:"Marca",control:p,errors:f,width:3})]}),(null===(t=Object.keys(f))||void 0===t?void 0:t.length)?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}),Object(v.jsx)(R.a,{children:JSON.stringify(f,null,2)})]}):Object(v.jsx)(v.Fragment,{}),(null===m||void 0===m?void 0:m.length)&&Object(v.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:m}),Object(v.jsx)(G.a,{loading:d,disabled:d,content:"Guardar",primary:!0}),Object(v.jsx)(G.a,{as:"a",content:"Deshacer Cambios",secondary:!0,onClick:function(){g(n)}})]})},ft=Ve.a({nombre:Ve.b().required("Complete")}).required(),gt=function(e){var t,n=e.state,i=Object(y.h)(),c=Object(y.g)(),a=Object(o.useContext)(_),r=a.empresa,s=(a.setEmpresa,Object(o.useState)(!1)),d=Object(l.a)(s,2),u=d[0],j=d[1],b=Object(o.useState)(!1),m=Object(l.a)(b,2),h=m[0],x=m[1],p=Object(pe.e)({resolver:Object(Se.a)(ft),defaultValues:n}),O=p.control,f=p.handleSubmit,g=p.watch,w=p.setValue,C=p.formState.errors,k=Object(o.useState)(),S=Object(l.a)(k,2),T=S[0],P=S[1],V=g();Object(o.useEffect)((function(){Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=7;break}return e.next=3,ze.find(n.id);case 3:return t=e.sent,e.abrupt("return",P(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))()}),{data:T});var F=function(e){i(c.state.backgroundLocation.pathname,{state:{reload:{producto_id:e}}})},D=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),!t||!t.id){e.next=8;break}return e.next=4,ze.update(t,t.id);case 4:n=e.sent,F(n),e.next=14;break;case 8:return e.next=10,ze.create(t);case 10:return o=e.sent,j(!1),(null===o||void 0===o?void 0:o.errors)?x(De(o)):(x(null),F(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(L.a,{onSubmit:f(D),noValidate:!0,children:[Object(v.jsx)(Re,{autoFocus:!0,model:Ie.tipo_producto,empresaContexto:r,control:O,venta:V,setValue:w,width:8}),Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Pe,{name:"nombre",title:"Descripci\xf3n",control:O,errors:C,width:8}),Object(v.jsx)(Pe,{name:"codigo",title:"C\xf3digo",control:O,errors:C,width:4}),Object(v.jsx)(Pe,{name:"codigo_barras",title:"C\xf3digo de Barras",control:O,errors:C,width:4})]}),Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Re,{model:Ie.presentacion,empresaContexto:r,control:O,venta:V,setValue:w,width:8}),Object(v.jsx)(Pe,{name:"peso",title:"Peso KG",control:O,errors:C,width:4,type:"number"})]}),Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Pe,{name:"precio_compra",title:"Costo de Compra (SIN IGV)",control:O,errors:C,width:4,type:"number"}),Object(v.jsx)(Pe,{name:"por_detraccion",title:"% Detracci\xf3n",control:O,errors:C,width:4,type:"number"}),Object(v.jsx)(Pe,{name:"por_isc",title:"% ISC",control:O,errors:C,width:4,type:"number"}),Object(v.jsxs)(L.a.Field,{children:[Object(v.jsx)("label",{children:" \xa0"}),Object(v.jsx)(Ce.a,{label:"Afecto",checked:V.afecto,onChange:function(){w("afecto",!V.afecto)}})]})]}),Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Re,{model:Ie.categoria,empresaContexto:r,control:O,venta:V,setValue:w,width:8}),Object(v.jsx)(Re,{model:Ie.subcategoria,empresaContexto:r,control:O,venta:V,setValue:w,width:8})]}),Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Re,{model:Ie.marca,empresaContexto:r,control:O,venta:V,setValue:w,width:8}),Object(v.jsx)(Re,{model:Ie.linea,empresaContexto:r,control:O,venta:V,setValue:w,width:8})]}),(null===(t=Object.keys(C))||void 0===t?void 0:t.length)?Object(v.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(v.jsx)(v.Fragment,{}),(null===h||void 0===h?void 0:h.length)&&Object(v.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:h}),Object(v.jsx)(G.a,{loading:u,secondary:!0,children:"Guardar"})]})},_t=function(){var e=Object(o.useContext)(_).empresa;return Object(v.jsx)(v.Fragment,{children:e?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I,{}),Object(v.jsx)(C.a,{children:Object(v.jsxs)(C.a.Row,{children:[Object(v.jsx)(C.a.Column,{width:1,children:Object(v.jsx)(N,{fluid:!0})}),Object(v.jsx)(C.a.Column,{width:15,style:{marginTop:"1rem",overflowY:"scroll",height:"93vh"},children:Object(v.jsx)(y.b,{})})]})})]}):Object(v.jsx)(y.a,{to:"/welcome/empresas"})})},wt=n(957),Ct=n(444),yt=n(952),kt=function(e){return{filter:e.filter,limit:e.limit,order:e.order,page:e.page}},St=function(e){for(var t=[],n=Object.keys(e),o=0;o<n.length;o++){var i=n[o];e[i]&&"object"!=typeof e[i]&&t.push([i,"like","%".concat(e[i],"%")])}return t},Tt=function(e,t,n){var i=Object(o.useContext)(_).empresa,c=Object(pe.e)({resolver:Object(Se.a)(jt),defaultValues:n}),a=c.control,r=c.formState.errors,l=c.setValue,s=(0,c.watch)();return Object(v.jsxs)(L.a,{onSubmit:function(t){var n=St(s);e.setQuery(Object(k.a)(Object(k.a)({},e.query),{filter:n}))},children:[Object(v.jsx)(Re,{model:Ie.tipo_documento_identy,empresaContexto:i,control:a,setValue:l,width:16}),Object(v.jsx)(Pe,{name:"numero_documento",title:"Numero de Documento",control:a,errors:r,width:16}),Object(v.jsx)(Pe,{name:"nombre",title:"Nombre",control:a,errors:r,width:16}),Object(v.jsx)(Pe,{name:"nombre_comercial",title:"Nombre Comercial",control:a,errors:r,width:16}),Object(v.jsx)(Pe,{name:"direccion",title:"Direccion",control:a,errors:r,width:16}),Object(v.jsx)(Re,{model:Ie.ubigeo,empresaContexto:i,control:a,setValue:l,width:16}),Object(v.jsx)(Pe,{name:"telefono",title:"Telefono Fijo",control:a,errors:r,width:16}),Object(v.jsx)(Pe,{name:"celular",title:"Telefono Celular",control:a,errors:r,width:16}),Object(v.jsx)(Pe,{name:"email",title:"Email",control:a,errors:r,width:16}),Object(v.jsx)(L.a.Button,{content:"Submit"})]})},Pt=function(e){var t=e.state,n=e.resolve,i=Object(o.useState)({}),c=Object(l.a)(i,2),a=c[0],r=c[1];return Object(o.useEffect)((function(){r(n(t))}),[]),Object(v.jsx)(wt.a,{children:Object(v.jsxs)(wt.a.Content,{children:[Object(v.jsx)(wt.a.Header,{content:null===a||void 0===a?void 0:a.title}),Object(v.jsx)(wt.a.Meta,{content:null===a||void 0===a?void 0:a.mensaje}),a.detalles&&Object.keys(a.detalles).map((function(e,t){return Object(v.jsx)(wt.a.Description,{content:"Total: ".concat(a.detalles[e].simbolo," ").concat(a.detalles[e].total)})}))]})})},Vt=function(){var e,t,n,i,c=Object(y.h)(),a=Object(y.g)(),s=Object(o.useContext)(_).empresa,d=Object(o.useState)(!1),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(o.useState)(null),h=Object(l.a)(m,2),x=h[0],p=h[1],O=Object(o.useState)([]),f=Object(l.a)(O,2),g=f[0],w=f[1],T=Object(o.useState)({page:0,limit:14,order:{id:"DESC"}}),P=Object(l.a)(T,2),V=P[0],F=P[1],D=function(){var e=Object(U.a)(H.a.mark((function e(){var t,n,o,i=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]&&i[0],t=i.length>1&&void 0!==i[1]&&i[1],n=s.empresa.id,e.next=5,ut.show(n,t);case 5:o=e.sent,b(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("contacto",t.id),(n={}).filter=[["cliente_id","=",t.id]],n.limit=25,n.order={id:"DESC"},e.next=7,he.show(s.empresa.id,s.id,1,n);case 7:o=e.sent,w(o.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=kt(V);console.log(e),D(!1,e)}),[V]),Object(o.useEffect)((function(){var e;if(null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.reload){var t=kt(V);D(!1,t),p(Object(k.a)({},a.state.reload.cliente_id)),a.state=null}}),[null===a||void 0===a?void 0:a.state]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(C.a.Column,{width:10,children:[Object(v.jsx)(C.a.Row,{children:Object(v.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(v.jsxs)(ie.a.Item,{children:[Object(v.jsx)(ie.a.Content,{floated:"left"}),Object(v.jsxs)(ie.a.Content,{floated:"right",children:[Object(v.jsx)(xe,{child:Object(v.jsx)(Tt,{query:V,setQuery:F})}),Object(v.jsx)(G.a,{size:"mini",color:"teal",onClick:function(){c("/welcome/clientes/create",{state:{backgroundLocation:a,model:{empresa_id:s.empresa.id},empresa:s}})},children:"Nuevo Contacto"})]})]})})}),Object(v.jsx)(C.a.Row,{children:Object(v.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(v.jsxs)(ie.a.Item,{children:[Object(v.jsx)(ie.a.Content,{floated:"left",children:null===V||void 0===V||null===(e=V.filter)||void 0===e?void 0:e.map((function(e,t){return Object(v.jsxs)(K.a,{as:"a",onClick:function(){!function(e){var t=V;t.filter.splice(e,1),F(Object(k.a)({},t))}(t)},children:[e[0],Object(v.jsx)(Q.a,{name:"delete"},t)]},t)}))}),Object(v.jsx)(ie.a.Content,{children:j?Object(v.jsx)(S.a,{pagination:!0,size:"mini",children:null===j||void 0===j||null===(t=j.links)||void 0===t?void 0:t.map((function(e,t){var n=parseFloat(null===e||void 0===e?void 0:e.label);return"number"===typeof n&&n?Object(v.jsx)(S.a.Item,{as:"a",active:null===e||void 0===e?void 0:e.active,onClick:function(){!function(e){var t=Object(k.a)(Object(k.a)({},V),{},{page:e});D(!1,t)}(n)},children:Object(v.jsx)("span",{children:null===e||void 0===e?void 0:e.label})},t):Object(v.jsx)(v.Fragment,{})}))}):Object(v.jsx)("div",{className:"ui placeholder",style:{padding:"8px"},children:Object(v.jsx)("div",{className:"line"})})})]})})}),Object(v.jsx)(C.a.Row,{children:Object(v.jsx)(C.a.Column,{style:{overflowY:"scroll",height:"83vh",marginTop:"1rem"},children:Object(v.jsxs)(we.a,{celled:!0,selectable:!0,children:[Object(v.jsx)(we.a.Header,{children:Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.HeaderCell,{children:"Nombre"}),Object(v.jsx)(we.a.HeaderCell,{children:"Documento"}),Object(v.jsx)(we.a.HeaderCell,{children:"Direccion"})]})}),Object(v.jsx)(we.a.Body,{children:j?null===j||void 0===j||null===(n=j.data)||void 0===n?void 0:n.map((function(e,t){var n;return Object(v.jsxs)(we.a.Row,{onClick:function(){var t;p(t=e),I(t)},children:[Object(v.jsxs)(we.a.Cell,{width:3,children:[e.nombre,"\xa0",ot(e.updated_at)&&Object(v.jsx)(it,{index:t})]}),Object(v.jsxs)(we.a.Cell,{width:3,children:[null===e||void 0===e||null===(n=e.tipo_documento)||void 0===n?void 0:n.nombre," ",e.numero_documento]}),Object(v.jsx)(we.a.Cell,{width:10,children:null===e||void 0===e?void 0:e.direccion})]})})):Array(14).fill(null).map((function(e,t){return Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{width:3,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})}),Object(v.jsx)(we.a.Cell,{width:3,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})}),Object(v.jsx)(we.a.Cell,{width:10,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})})]})}))})]})})})]}),Object(v.jsx)(C.a.Column,{width:5,children:x&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(wt.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,style:{marginTop:"5vh"},children:Object(v.jsxs)(wt.a,{children:[Object(v.jsx)(wt.a.Content,{children:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(wt.a.Header,{children:[Object(v.jsx)(Ct.a,{srcSet:null===x||void 0===x?void 0:x.photo,alt:x.nombre_comercial,as:"div",size:"tiny",circular:!0}),"\xa0 ",null===x||void 0===x?void 0:x.nombre," ",ot(null===x||void 0===x?void 0:x.updated_at)&&Object(v.jsx)(it,{index:null===x||void 0===x?void 0:x.id})]}),Object(v.jsxs)(wt.a.Description,{children:[Object(v.jsx)("b",{children:"Nombre Comercial"})," : ",null===x||void 0===x?void 0:x.nombre_comercial," "]}),Object(v.jsxs)(wt.a.Description,{children:[Object(v.jsx)("b",{children:"Documento "}),": ",null===x||void 0===x||null===(i=x.tipo_documento)||void 0===i?void 0:i.nombre," ",null===x||void 0===x?void 0:x.numero_documento," "]}),Object(v.jsxs)(wt.a.Description,{children:[Object(v.jsx)("b",{children:"Direcci\xf3n "}),": ",null===x||void 0===x?void 0:x.direccion]}),Object(v.jsxs)(wt.a.Description,{children:[Object(v.jsx)("b",{children:"Email "}),": ",null===x||void 0===x?void 0:x.email]}),Object(v.jsxs)(wt.a.Description,{children:[Object(v.jsx)("b",{children:"Tel\xe9fono "}),": ",null===x||void 0===x?void 0:x.telefono]}),Object(v.jsxs)(wt.a.Description,{children:[Object(v.jsx)("b",{children:"Celular "}),": ",null===x||void 0===x?void 0:x.celular]})]})}),Object(v.jsxs)(wt.a.Content,{extra:!0,children:[Object(v.jsx)(G.a,{primary:!0,onClick:function(){c("/welcome/clientes/"+x.id,{state:{backgroundLocation:a,model:x,empresa:s}})},children:"Editar"}),Object(v.jsx)(G.a,{children:"Redactar Mensaje"})]})]})}),!!x&&!!g.length&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(wt.a.Group,{itemsPerRow:1,stackable:!0,children:Object(v.jsx)(Pt,{state:g,resolve:function(e){for(var t={title:"Ventas",mensaje:"Ultimos 25 Documento",detalles:{}},n=0;n<e.length;n++){var o=e[n];t.detalles.hasOwnProperty(o.moneda.nombre)?t.detalles[o.moneda.nombre].total+=o.total_documento_fin:t.detalles[o.moneda.nombre]={simbolo:o.moneda.simbolo,total:o.total_documento_fin}}return t}})}),Object(v.jsx)(wt.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,children:Object(v.jsx)(wt.a,{children:Object(v.jsx)(wt.a.Content,{style:{overflowY:"scroll",height:"30vh"},children:Object(v.jsx)(yt.a,{children:g.map((function(e,t){var n,o,i;return Object(v.jsxs)(yt.a.Event,{children:[Object(v.jsx)(yt.a.Label,{icon:"shopping bag"}),Object(v.jsxs)(yt.a.Content,{children:[Object(v.jsx)(yt.a.Date,{children:Object(v.jsx)(le.a,{fromNow:!0,children:e.updated_at})}),Object(v.jsxs)(yt.a.Summary,{children:[Object(v.jsxs)(r.b,{to:"/space/ventas/".concat(e.id),state:{model:e},children:[null===e||void 0===e||null===(n=e.serie)||void 0===n?void 0:n.descripcion," ",null===e||void 0===e||null===(o=e.serie)||void 0===o?void 0:o.serie,"-",null===e||void 0===e?void 0:e.correlativo," \xa0\xa0\xa0"]}),null===e||void 0===e||null===(i=e.moneda)||void 0===i?void 0:i.simbolo," ",e.total_documento_fin]}),Object(v.jsx)(yt.a.Meta,{children:Object(v.jsxs)(yt.a.Like,{children:[Object(v.jsx)(Q.a,{name:"comments outline"}),"1 Comentarios"]})})]})]})}))})})})})]})]})})]})};var Ft={show:function(){return new Promise((function(e,t){m.get("/local").then((function(t){e(t.data)}),(function(e){t(new Error("bad request"))}))}))},find:function(e){return new Promise((function(t,n){m.get("local/"+e).then((function(e){t(e.data)}))}))},create:function(e){return new Promise((function(t,n){m.post("precio",e).then((function(e){t(e.data)})).catch((function(e){e.response&&t(e.response.data)}))}))},update:function(e,t,n){return new Promise((function(o,i){m.put("precio/"+t+"/"+n,e).then((function(e){o(e.data)}))}))},destroy:function(e,t,n){m.delete("precio/"+t+"/"+n,e).then((function(e){return e.data}))}},Dt=function(){var e,t,n,i,c,a,r,s=Object(y.h)(),d=Object(y.g)(),u=Object(o.useContext)(_).empresa,j=Object(o.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],x=Object(o.useState)(null),p=Object(l.a)(x,2),O=p[0],f=p[1],g=Object(o.useState)([]),w=Object(l.a)(g,2),T=w[0],P=w[1],V=Object(o.useState)({show:!1,message:"Eliminar Precio"}),F=Object(l.a)(V,2),D=F[0],I=F[1],N=Object(o.useState)({page:0,limit:14,order:{id:"DESC"}}),q=Object(l.a)(N,2),E=q[0],L=q[1],R=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={}).filter=[["producto_id","=",t.id]],n.limit=25,n.order={id:"DESC"},e.next=6,he.showDetalles(u.empresa.id,u.id,1,n);case 6:o=e.sent,P(o.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(U.a)(H.a.mark((function e(){var t,n,o,i=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]&&i[0],t=i.length>1&&void 0!==i[1]&&i[1],n=u.empresa.id,e.next=5,ze.show("producto/"+n,t);case 5:o=e.sent,h(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft.destroy(D.precio.id);case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=kt(E);console.log(e),z(!1,e)}),[E]),Object(o.useEffect)((function(){var e,t,n,o,i,c;if((null===d||void 0===d||null===(e=d.state)||void 0===e?void 0:e.reload)&&(null===d||void 0===d||null===(t=d.state)||void 0===t||null===(n=t.reload)||void 0===n?void 0:n.producto_id)){var a=kt(E);z(!1,a),f(Object(k.a)({},d.state.reload.producto_id)),d.state=null}if((null===d||void 0===d||null===(o=d.state)||void 0===o?void 0:o.reload)&&(null===d||void 0===d||null===(i=d.state)||void 0===i||null===(c=i.reload)||void 0===c?void 0:c.precio_id)){var r,l;if(null===d||void 0===d||null===(r=d.state)||void 0===r||null===(l=r.reload)||void 0===l?void 0:l.push){var s=O,u=O.precios||[];u.push(d.state.reload.precio_id),s.precios=u,f(Object(k.a)({},s))}else{var j=null===O||void 0===O?void 0:O.precios.map((function(e,t){return e.id===d.state.reload.precio_id.id?d.state.reload.precio_id:e}));if(j){var b=O;b.precios=j,f(Object(k.a)({},b))}}d.state=null}}),[null===d||void 0===d?void 0:d.state]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(C.a.Column,{width:8,children:[Object(v.jsx)(C.a.Row,{children:Object(v.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(v.jsxs)(ie.a.Item,{children:[Object(v.jsx)(ie.a.Content,{floated:"left"}),Object(v.jsxs)(ie.a.Content,{floated:"right",children:[Object(v.jsx)(xe,{child:Object(v.jsx)(Tt,{query:E,setQuery:L})}),Object(v.jsx)(G.a,{size:"mini",color:"teal",onClick:function(){s("/welcome/productos/create",{state:{backgroundLocation:d,model:{empresa_id:u.empresa.id,local_id:u.id,afecto:1},empresa:u}})},children:"Nuevo Producto"})]})]})})}),Object(v.jsx)(C.a.Row,{children:Object(v.jsx)(ie.a,{relaxed:"very",style:{marginTop:"1rem"},children:Object(v.jsxs)(ie.a.Item,{children:[Object(v.jsx)(ie.a.Content,{floated:"left",children:null===E||void 0===E||null===(e=E.filter)||void 0===e?void 0:e.map((function(e,t){return Object(v.jsxs)(K.a,{as:"a",onClick:function(){!function(e){var t=E;t.filter.splice(e,1),L(Object(k.a)({},t))}(t)},children:[e[0],Object(v.jsx)(Q.a,{name:"delete"},t)]},t)}))}),Object(v.jsx)(ie.a.Content,{children:m?Object(v.jsx)(S.a,{pagination:!0,size:"mini",children:null===m||void 0===m||null===(t=m.links)||void 0===t?void 0:t.map((function(e,t){var n=parseFloat(null===e||void 0===e?void 0:e.label);return"number"===typeof n&&n?Object(v.jsx)(S.a.Item,{as:"a",active:null===e||void 0===e?void 0:e.active,onClick:function(){!function(e){var t=Object(k.a)(Object(k.a)({},E),{},{page:e});z(!1,t)}(n)},children:Object(v.jsx)("span",{children:null===e||void 0===e?void 0:e.label})},t):Object(v.jsx)(v.Fragment,{})}))}):Object(v.jsx)("div",{className:"ui placeholder",style:{padding:"8px"},children:Object(v.jsx)("div",{className:"line"})})})]})})}),Object(v.jsx)(C.a.Row,{children:Object(v.jsx)(C.a.Column,{style:{overflowY:"scroll",height:"83vh",marginTop:"1rem"},children:Object(v.jsxs)(we.a,{celled:!0,selectable:!0,children:[Object(v.jsx)(we.a.Header,{children:Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.HeaderCell,{children:"Codigo"}),Object(v.jsx)(we.a.HeaderCell,{children:"Descripci\xf3n"}),Object(v.jsx)(we.a.HeaderCell,{children:"Codigo de Barras"}),Object(v.jsx)(we.a.HeaderCell,{children:"Marca"}),Object(v.jsx)(we.a.HeaderCell,{children:"Presentaci\xf3n"}),Object(v.jsx)(we.a.HeaderCell,{children:"Categor\xeda"}),Object(v.jsx)(we.a.HeaderCell,{children:"Sub Categoria"})]})}),Object(v.jsx)(we.a.Body,{children:m?null===m||void 0===m||null===(n=m.data)||void 0===n?void 0:n.map((function(e,t){var n,o,i,c;return Object(v.jsxs)(we.a.Row,{onClick:function(){var t;f(t=e),R(t)},children:[Object(v.jsx)(we.a.Cell,{width:1,children:e.codigo}),Object(v.jsxs)(we.a.Cell,{width:6,children:[e.nombre,"\xa0",ot(e.updated_at)&&Object(v.jsx)(it,{index:t})]}),Object(v.jsx)(we.a.Cell,{width:2,children:null===e||void 0===e?void 0:e.codigo_barras}),Object(v.jsx)(we.a.Cell,{width:2,children:null===e||void 0===e||null===(n=e.marca)||void 0===n?void 0:n.nombre}),Object(v.jsx)(we.a.Cell,{width:1,children:null===e||void 0===e||null===(o=e.presentacion)||void 0===o?void 0:o.nombre}),Object(v.jsx)(we.a.Cell,{width:2,children:null===e||void 0===e||null===(i=e.categoria)||void 0===i?void 0:i.nombre}),Object(v.jsx)(we.a.Cell,{width:2,children:null===e||void 0===e||null===(c=e.subcategoria)||void 0===c?void 0:c.nombre})]})})):Array(14).fill(null).map((function(e,t){return Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.Cell,{width:1,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})}),Object(v.jsx)(we.a.Cell,{width:6,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})}),Object(v.jsx)(we.a.Cell,{width:2,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})}),Object(v.jsx)(we.a.Cell,{width:2,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})}),Object(v.jsx)(we.a.Cell,{width:1,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})}),Object(v.jsx)(we.a.Cell,{width:2,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})}),Object(v.jsx)(we.a.Cell,{width:2,children:Object(v.jsx)("div",{className:"ui placeholder",children:Object(v.jsx)("div",{className:"line"})})})]})}))})]})})})]}),Object(v.jsxs)(C.a.Column,{width:5,children:[O&&O.id&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(wt.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,style:{marginTop:"5vh"},children:[Object(v.jsxs)(wt.a,{children:[Object(v.jsx)(wt.a.Content,{children:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(wt.a.Header,{children:[null===O||void 0===O?void 0:O.nombre," ",ot(null===O||void 0===O?void 0:O.updated_at)&&Object(v.jsx)(it,{index:null===O||void 0===O?void 0:O.id})]}),Object(v.jsx)(wt.a.Description,{children:Object(v.jsx)(we.a,{basic:"very",children:Object(v.jsxs)(we.a.Body,{children:[Object(v.jsxs)(we.a.Row,{children:[Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"C\xf3digo:"}),Object(v.jsx)("br",{}),null===O||void 0===O?void 0:O.codigo]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"C\xf3digo de Barras:"}),Object(v.jsx)("br",{}),null===O||void 0===O?void 0:O.codigo_barras]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"Marca:"}),Object(v.jsx)("br",{}),null===O||void 0===O||null===(i=O.marca)||void 0===i?void 0:i.nombre]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"Linea:"}),Object(v.jsx)("br",{}),null===O||void 0===O||null===(c=O.linea)||void 0===c?void 0:c.nombre]})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"Afecto:"}),Object(v.jsx)("br",{}),(null===O||void 0===O?void 0:O.afecto)?"Si":"No"]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"Precio de Compra:"}),Object(v.jsx)("br",{}),null===O||void 0===O||null===(a=O.moneda)||void 0===a?void 0:a.simbolo," ",null===O||void 0===O?void 0:O.precio_compra]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"Peso:"}),Object(v.jsx)("br",{}),null===O||void 0===O?void 0:O.peso," KG"]}),Object(v.jsx)(we.a.Cell,{children:"\xa0"})]}),Object(v.jsxs)(we.a.Row,{children:[Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"% IGV:"}),Object(v.jsx)("br",{}),null===O||void 0===O?void 0:O.igv]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"% Detracci\xf3n:"}),Object(v.jsx)("br",{}),null===O||void 0===O?void 0:O.por_detraccion]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"% ISC:"}),Object(v.jsx)("br",{}),null===O||void 0===O?void 0:O.por_isc]}),Object(v.jsx)(we.a.Cell,{children:" \xa0"})]})]})})})]})}),Object(v.jsx)(wt.a.Content,{extra:!0,children:Object(v.jsx)(G.a,{primary:!0,onClick:function(){s("/welcome/productos/"+O.id,{state:{backgroundLocation:d,model:O,empresa:u}})},children:"Editar"})})]}),Object(v.jsx)(wt.a,{children:Object(v.jsxs)(wt.a.Content,{style:{overflowY:"scroll",height:"24vh"},children:[Object(v.jsxs)(wt.a.Header,{children:["Precios de Venta",Object(v.jsxs)(G.a,{floated:"right",icon:!0,labelPosition:"left",primary:!0,size:"small",onClick:function(){s("/welcome/precios/create",{state:{backgroundLocation:d,model:{local_id:u.id,empresa_id:u.empresa.id,producto_id:O.id,costo_compra:O.precio_compra,presentacion_id:49},empresa:u}})},style:{marginBottom:"1vh"},children:[Object(v.jsx)(Q.a,{name:"currency"}),"Nuevo Precio"]})]}),Object(v.jsx)(wt.a.Description,{children:Object(v.jsxs)(we.a,{basic:"very",children:[Object(v.jsx)(we.a.Header,{children:Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.HeaderCell,{children:Object(v.jsx)("abbr",{title:"Presentacion Unitaria",children:"PST."})}),Object(v.jsx)(we.a.HeaderCell,{children:Object(v.jsx)("abbr",{title:"Utlidad",children:"UTL."})}),Object(v.jsx)(we.a.HeaderCell,{children:Object(v.jsx)("abbr",{title:"Precio de Compra sin IGV",children:"COSTO"})}),Object(v.jsx)(we.a.HeaderCell,{children:Object(v.jsx)("abbr",{title:"Precio de Venta sin IGV",children:"GRAV."})}),Object(v.jsx)(we.a.HeaderCell,{children:Object(v.jsx)("abbr",{title:"Valor del IGV",children:"IGV"})}),Object(v.jsx)(we.a.HeaderCell,{children:Object(v.jsx)("abbr",{title:"Precio de Venta",children:"PV."})}),Object(v.jsx)(we.a.HeaderCell,{})]})}),Object(v.jsx)(we.a.Body,{children:null===O||void 0===O||null===(r=O.precios)||void 0===r?void 0:r.map((function(e,t){var n,o,i,c;return Object(v.jsxs)(we.a.Row,{children:[Object(v.jsxs)(we.a.Cell,{children:[e.presentacion.nombre," \xa0",ot(e.updated_at)&&Object(v.jsx)(it,{index:t})," "]}),Object(v.jsxs)(we.a.Cell,{children:["% ",null===e||void 0===e?void 0:e.por_utilidad]}),Object(v.jsxs)(we.a.Cell,{children:[null===(n=O.moneda)||void 0===n?void 0:n.simbolo," ",null===e||void 0===e?void 0:e.costo_compra]}),Object(v.jsxs)(we.a.Cell,{children:[null===e||void 0===e||null===(o=e.moneda)||void 0===o?void 0:o.simbolo," ",e.costo_venta]}),Object(v.jsxs)(we.a.Cell,{children:[null===e||void 0===e||null===(i=e.moneda)||void 0===i?void 0:i.simbolo," ",e.igv]}),Object(v.jsx)(we.a.Cell,{children:Object(v.jsxs)("b",{children:[null===e||void 0===e||null===(c=e.moneda)||void 0===c?void 0:c.simbolo," ",e.precio_venta]})}),Object(v.jsx)(we.a.Cell,{children:Object(v.jsx)(G.a.Group,{size:"mini",children:Object(v.jsx)(G.a,{icon:"pencil",onClick:function(){var t;s("/welcome/precios/"+(t=e).id,{state:{backgroundLocation:d,model:t,empresa:u}})}})})})]})}))}),Object(v.jsx)(we.a.Footer,{fullWidth:!0,children:Object(v.jsxs)(we.a.Row,{children:[Object(v.jsx)(we.a.HeaderCell,{}),Object(v.jsx)(we.a.HeaderCell,{colSpan:"6"})]})})]})})]})})]}),Object(v.jsx)(wt.a.Group,{}),!!O&&!!T.length&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(wt.a.Group,{doubling:!0,itemsPerRow:1,stackable:!0,children:Object(v.jsx)(wt.a,{children:Object(v.jsx)(wt.a.Content,{style:{overflowY:"scroll",height:"30vh"},children:Object(v.jsx)(yt.a,{children:T.map((function(e,t){var n,o;return Object(v.jsxs)(yt.a.Event,{children:[Object(v.jsx)(yt.a.Label,{icon:"box"}),Object(v.jsxs)(yt.a.Content,{children:[Object(v.jsx)(yt.a.Date,{children:Object(v.jsx)(le.a,{fromNow:!0,children:e.updated_at})}),Object(v.jsxs)(yt.a.Summary,{children:[null===e||void 0===e||null===(n=e.venta)||void 0===n?void 0:n.uniqueserie,"\xa0\xa0\xa0",null===e||void 0===e||null===(o=e.moneda)||void 0===o?void 0:o.simbolo," ",e.total_documento_fin]}),Object(v.jsx)(yt.a.Summary,{children:Object(v.jsx)(we.a,{basic:"very",children:Object(v.jsx)(we.a.Body,{children:Object(v.jsxs)(we.a.Row,{children:[Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"Cant:"}),Object(v.jsx)("br",{}),null===e||void 0===e?void 0:e.cantidad.toFixed(2)]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"Gravado:"}),Object(v.jsx)("br",{}),null===e||void 0===e?void 0:e.monto_base_igv.toFixed(2)]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"IGV:"}),Object(v.jsx)("br",{}),null===e||void 0===e?void 0:e.monto_igv.toFixed(2)]}),Object(v.jsxs)(we.a.Cell,{children:[Object(v.jsx)("b",{children:"PV:"}),Object(v.jsx)("br",{}),null===e||void 0===e?void 0:e.precio_venta.toFixed(2)]})]})})})})]})]})}))})})})})})]}),Object(v.jsx)(de.a,{open:D.show,content:D.message,onCancel:function(){I({show:!D.show})},onConfirm:function(){B()}})]}),Object(v.jsx)(C.a.Column,{width:2,children:Object(v.jsxs)(C.a.Row,{children:[Object(v.jsxs)(A.a,{as:"h2",style:{marginTop:"6vh"},children:[Object(v.jsx)(Q.a,{name:"warehouse"}),Object(v.jsx)(A.a.Content,{children:"Almacen"})]}),Object(v.jsxs)(wt.a.Group,{children:[Object(v.jsxs)(wt.a,{children:[Object(v.jsxs)(wt.a.Content,{children:[Object(v.jsx)(wt.a.Header,{children:"Almacen Principal"}),Object(v.jsx)(wt.a.Meta,{children:"Local Principal"}),Object(v.jsxs)(wt.a.Description,{children:["Stock: ",Object(v.jsx)("strong",{children:"1590"})]})]}),Object(v.jsx)(wt.a.Content,{extra:!0,children:Object(v.jsxs)("div",{className:"ui two buttons",children:[Object(v.jsx)(G.a,{icon:"dolly",content:"Ajustar"}),Object(v.jsx)(G.a,{icon:"truck",content:"Mover"})]})})]}),Object(v.jsxs)(wt.a,{children:[Object(v.jsxs)(wt.a.Content,{children:[Object(v.jsx)(wt.a.Header,{children:"Almacen Principal"}),Object(v.jsx)(wt.a.Meta,{children:"Local Principal"}),Object(v.jsxs)(wt.a.Description,{children:["Stock: ",Object(v.jsx)("strong",{children:"1590"})]})]}),Object(v.jsx)(wt.a.Content,{extra:!0,children:Object(v.jsxs)("div",{className:"ui two buttons",children:[Object(v.jsx)(G.a,{icon:"dolly",content:"Ajustar"}),Object(v.jsx)(G.a,{icon:"truck",content:"Mover"})]})})]})]})]})})]})},It=Ve.a({presentacion_id:Ve.b().required("Complete"),moneda_id:Ve.b().required("Complete"),producto_id:Ve.b().required("Complete")}).required(),Nt=n(46),qt=n(47),Et=function(e){Object(Nt.a)(n,e);var t=Object(qt.a)(n);function n(){return Object(Je.a)(this,n),t.apply(this,arguments)}return Object(We.a)(n,[{key:"costoVenta",value:function(e){return e.precio_venta=this.roundOff(1.18*e.costo_venta).toFixed(4),e.por_utilidad=this.roundOff(e.costo_venta/e.costo_compra*100-100).toFixed(4),e.utilidad=this.roundOff(e.por_utilidad*e.costo_venta/100).toFixed(4),e.igv=18,e}},{key:"precioVenta",value:function(e){return e.costo_venta=this.roundOff(e.precio_venta/1.18).toFixed(4),e.por_utilidad=this.roundOff(e.costo_venta/e.costo_compra*100-100).toFixed(4),e.utilidad=this.roundOff(e.por_utilidad*e.costo_venta/100).toFixed(4),e.igv=18,e}}]),n}(Ye),At=Et,Lt=function(e){var t,n,c,a=e.state,r=Object(y.h)(),s=Object(y.g)(),d=Object(o.useContext)(_),u=d.empresa,j=(d.setEmpresa,Object(o.useState)(!1)),b=Object(l.a)(j,2),m=b[0],h=b[1],x=Object(o.useState)(!1),p=Object(l.a)(x,2),O=p[0],f=p[1],g=Object(pe.e)({resolver:Object(Se.a)(It),defaultValues:a}),w=g.control,C=g.handleSubmit,k=g.setValue,S=g.watch,T=g.formState.errors,P=S(),V=new At;i.a.useEffect((function(){var e=S((function(e,t){var n=t.name,o=t.type,i=[];"precio_venta"===n&&"change"===o&&(i=V.precioVenta(e)),"costo_venta"===n&&"change"===o&&(i=V.costoVenta(e));for(var c=Object.keys(i),a=0;a<c.length;a++){var r=c[a];k(r,i[r])}}));return function(){return e.unsubscribe()}}),[S]);var F=Object(o.useState)(),D=Object(l.a)(F,2),I=D[0],N=D[1];Object(o.useEffect)((function(){Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.id){e.next=7;break}return e.next=3,Ft.find(a.id);case 3:return t=e.sent,e.abrupt("return",N(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))()}),{data:I});var q=function(e,t){r(s.state.backgroundLocation.pathname,{state:{reload:{precio_id:e,push:t}}})},E=function(){var e=Object(U.a)(H.a.mark((function e(t){var n,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),!t||!t.id){e.next=8;break}return e.next=4,Ft.update(t,u.empresa.id,t.id);case 4:n=e.sent,q(n,!1),e.next=14;break;case 8:return e.next=10,Ft.create(t);case 10:return o=e.sent,h(!1),(null===o||void 0===o?void 0:o.errors)?f(De(o)):(f(null),q(o,!0)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(L.a,{onSubmit:C(E),noValidate:!0,children:[Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Re,{model:Ie.presentacion,empresaContexto:u,control:w,venta:a,setValue:k,width:6}),Object(v.jsx)(Re,{model:Ie.moneda,empresaContexto:u,control:w,venta:a,setValue:k,width:3})]}),Object(v.jsxs)(L.a.Group,{children:[Object(v.jsx)(Pe,{name:"costo_compra",title:"Costo de Compra",control:w,errors:T,width:3,readOnly:!0}),Object(v.jsx)(Pe,{name:"igv",title:"% de IGV",control:w,errors:T,width:3,readOnly:!0}),Object(v.jsx)(Pe,{name:"por_utilidad",title:"% de Utilidad",type:"number",control:w,errors:T,width:3,readOnly:!0}),Object(v.jsx)(Pe,{name:"utilidad",title:(null===P||void 0===P||null===(t=P.moneda)||void 0===t?void 0:t.simbolo)?"Utilidad "+(null===P||void 0===P||null===(n=P.moneda)||void 0===n?void 0:n.simbolo):"Utilidad",control:w,errors:T,width:3,readOnly:!0,type:"number"}),Object(v.jsx)(Pe,{name:"costo_venta",title:"Costo de Venta",control:w,errors:T,width:3,type:"number"}),Object(v.jsx)(Pe,{name:"precio_venta",title:"Precio Venta",control:w,errors:T,width:3,type:"number"})]}),(null===(c=Object.keys(T))||void 0===c?void 0:c.length)?Object(v.jsx)(z.a,{color:"orange",header:"Advertencia",list:["Verifique que todos los campos requeridos esten completos."]}):Object(v.jsx)(v.Fragment,{}),(null===O||void 0===O?void 0:O.length)&&Object(v.jsx)(z.a,{color:"red",header:"Verifique los siguientes campos",list:O}),Object(v.jsx)(G.a,{loading:m,secondary:!0,children:"Guardar"})]})};function Rt(){return Object(v.jsx)("div",{children:Object(v.jsx)("h2",{children:"Reports"})})}function Gt(){return Object(v.jsx)("div",{children:Object(v.jsx)("h2",{children:"Profile"})})}function zt(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Nothing to see here!"}),Object(v.jsx)("p",{children:Object(v.jsx)(r.b,{to:"/",children:"Go to the home page"})})]})}var Bt=function(){var e=Object(o.useState)({status:!1}),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(y.g)(),a=c.state||{backgroundLocation:c};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(y.e,{location:(null===a||void 0===a?void 0:a.backgroundLocation)?null===a||void 0===a?void 0:a.backgroundLocation:c,children:[Object(v.jsx)(y.c,{path:"/",element:Object(v.jsx)(w,{})}),Object(v.jsx)(y.c,{path:"/signup",element:Object(v.jsx)(B,{})}),Object(v.jsx)(y.c,{path:"welcome",element:Object(v.jsx)(E,{}),children:Object(v.jsx)(y.c,{path:"empresas",element:Object(v.jsx)(ee,{})})}),Object(v.jsxs)(y.c,{path:"/workspace",element:Object(v.jsx)(q,{}),children:[Object(v.jsx)(y.c,{path:"app",element:Object(v.jsx)(oe,{})}),Object(v.jsx)(y.c,{path:"ventas",element:Object(v.jsx)(ct,{})}),Object(v.jsx)(y.c,{path:"ventas/:id",fullwidth:!0,element:Object(v.jsx)(et,{state:null===a||void 0===a?void 0:a.model,editionMode:!0})}),Object(v.jsx)(y.c,{path:"contactos",element:Object(v.jsx)(Vt,{})}),Object(v.jsx)(y.c,{path:"productos",element:Object(v.jsx)(Dt,{})}),Object(v.jsx)(y.c,{path:"reports",element:Object(v.jsx)(Rt,{})}),Object(v.jsx)(y.c,{path:"profile",element:Object(v.jsx)(Gt,{})})]}),Object(v.jsxs)(y.c,{path:"/space",element:Object(v.jsx)(_t,{}),children:[Object(v.jsx)(y.c,{path:"productos/create/:id",element:Object(v.jsx)(F,{children:Object(v.jsx)(et,{state:null===a||void 0===a?void 0:a.model,editionMode:!0})})}),Object(v.jsx)(y.c,{path:"productos/:id",element:Object(v.jsx)(F,{children:Object(v.jsx)(et,{state:null===a||void 0===a?void 0:a.model,editionMode:!0})})}),Object(v.jsx)(y.c,{path:"ventas/create/:id",element:Object(v.jsx)(et,{formatPrint:n,setFormatPrint:i,state:null===a||void 0===a?void 0:a.model,editionMode:!0})}),Object(v.jsx)(y.c,{path:"ventas/:id",element:Object(v.jsx)(et,{formatPrint:n,setFormatPrint:i,state:null===a||void 0===a?void 0:a.model,editionMode:!0})})]}),Object(v.jsx)(y.c,{path:"*",element:Object(v.jsx)(zt,{})})]}),(null===a||void 0===a?void 0:a.backgroundLocation)&&Object(v.jsxs)(y.e,{children:[Object(v.jsx)(y.c,{path:"welcome/empresas/create",element:Object(v.jsx)(ne,{size:"large",setTitle:"Crea Nueva Empresa",children:Object(v.jsx)(lt,{})})}),Object(v.jsx)(y.c,{path:"welcome/empresas/:id",element:Object(v.jsx)(ne,{size:"large",setTitle:"Editar Empresa",children:Object(v.jsx)(lt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/locals/create",element:Object(v.jsx)(ne,{size:"large",setTitle:"Crea Nuevo Local",children:Object(v.jsx)(dt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/locals/:id",element:Object(v.jsx)(ne,{size:"large",setTitle:"Editar Local",children:Object(v.jsx)(dt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/clientes/create",element:Object(v.jsx)(ne,{size:"large",setTitle:"Crea Nuevo Cliente",children:Object(v.jsx)(bt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/clientes/:id",element:Object(v.jsx)(ne,{size:"large",setTitle:"Editar Cliente",children:Object(v.jsx)(bt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/moneda/create",element:Object(v.jsx)(ne,{size:"small",setTitle:"Crea Nueva Moneda",children:Object(v.jsx)(vt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/moneda/:id",element:Object(v.jsx)(ne,{size:"small",setTitle:"Editar Moneda",children:Object(v.jsx)(vt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/vehiculo/create",element:Object(v.jsx)(ne,{size:"small",setTitle:"Crea Nuevo Vehiculo",children:Object(v.jsx)(Ot,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/vehiculo/:id",element:Object(v.jsx)(ne,{size:"small",setTitle:"Editar Vehiculo",children:Object(v.jsx)(Ot,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/ventas/create",element:Object(v.jsx)(ne,{size:"fullscreen",setTitle:"Title",children:Object(v.jsx)(vt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/ventas/:id",element:Object(v.jsx)(ne,{size:"fullscreen",setTitle:"Title"})}),Object(v.jsx)(y.c,{path:"welcome/productos/create",element:Object(v.jsx)(ne,{size:"large",setTitle:"Crea Nuevo Producto \xf3 Servicio",children:Object(v.jsx)(gt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/productos/:id",element:Object(v.jsx)(ne,{size:"large",setTitle:"Editar Producto \xf3 Servicio",children:Object(v.jsx)(gt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/precios/create",element:Object(v.jsx)(ne,{size:"small",setTitle:"Crea Nuevo Precio",children:Object(v.jsx)(Lt,{state:null===a||void 0===a?void 0:a.model})})}),Object(v.jsx)(y.c,{path:"welcome/precios/:id",element:Object(v.jsx)(ne,{size:"small",setTitle:"Editar Precio",children:Object(v.jsx)(Lt,{state:null===a||void 0===a?void 0:a.model})})})]})]})};console.log=function(){};var Mt=function(){return Object(v.jsx)(p,{children:Object(v.jsxs)(g,{children:[Object(v.jsx)(F,{children:Object(v.jsx)(r.a,{children:Object(v.jsx)(Bt,{})})}),Object(v.jsx)(j.a,{})]})})};a.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(Mt,{})}),document.getElementById("root"))}},[[926,1,2]]]);
//# sourceMappingURL=main.92d7c5b2.chunk.js.map